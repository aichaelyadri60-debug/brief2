"use strict";
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="a01237c6-871e-5542-9ef8-943586617389")}catch(e){}}();
(globalThis.webpackChunk_figma_web_bundler=globalThis.webpackChunk_figma_web_bundler||[]).push([[351],{603172:(e,t,l)=>{l.d(t,{A7:()=>r,i4:()=>o,nt:()=>a});var s=l(599078),n=l(58814);let a=e=>e.library.localStyleSelection,o=(0,s.Mz)([a,(e,t)=>t],(e,t)=>e?.type===t?e:null),r=(0,s.Mz)([o,(e,t,l)=>l],(e,t)=>{if(!e)return null;let l=new Set,s=new Set;return e.folderNames.forEach(e=>{let a=t.find(t=>"STYLE_FOLDER"===t.type&&t.name===e);a&&((0,n.KU)(a).forEach(e=>{l.add(e.name)}),(0,n.dm)(a).forEach(e=>{s.add(e.node_id)}))}),{type:e.type,folderNames:l,styleIds:s}})},270351:(e,t,l)=>{l.d(t,{Q:()=>eY});var s=l(104076),n=l(716976),a=l(903927),o=l(951002),r=l(99723),i=l(88314),d=l(387092),c=l(266808),u=l(170627),y=l(324063),p=l(359166),m=l(776111),f=l(883765),g=l(328341),h=l(641518),w=l(563276),S=l(836982),x=l(192075),C=l(147046),E=l(850701),_=l(239613),k=l(928818),b=l(197055),T=l(489175),j=l(354114),L=l(74620),v=l(211862),R=l(624155),I=l(567325),N=l(603172),D=l(564914),P=l(25870),M=l(589481),K=l(694896),A=l(737139),B=l(684742),F=l(420680),U=l(736813),O=l(390579),Y=l(536358),X=l(7718),$=l(894210),H=l(674524),W=l(511570),V=l.n(W),Z=l(221586),z=l(404343);let G="styles--contextMenu--C-hVT",Q="styles--caret--DZmzh",q="styles--rowSelectedExpanded--MGvUV",J="styles--panelHeaderRow--Kxqgo styles--styleTypeSectionRow--wVTIO",ee="styles--panelHeaderRowFaded--pfgKz styles--panelHeaderRow--Kxqgo styles--styleTypeSectionRow--wVTIO draggable_list--panelHeaderRowFaded--kETRR",et="styles--panelTitleText--v7gXm draggable_list--panelTitleText--SwKez";function el({childLeft:e,childRight:t,deleteSelectedItems:l,forceShowHoverBorder:a,hideStylePreview:o,index:r,inspectStyleSelected:i,isDragging:d,isEditable:c,isRenaming:u,isCollapsed:y=!0,isLastChildOfSelection:p=!1,isFirstChildOfSelection:m=!1,isFolder:f,isFocused:g,level:h,name:w,nameRef:S,onContextMenu:x,onFocus:C,onBlur:E,onCreateFolder:_,onDoubleClick:k,onHoverChange:b,onMouseDown:T,onMouseMove:L,recordingKey:v,rowRef:R,secondaryName:I,selected:N,selectedSecondary:D,stopRenamingItem:P,tooltipData:K}){let[B,F]=n.useState(w),[U,O]=n.useState(!1),Y=n.useCallback(e=>{e?.select()},[]);n.useEffect(()=>{F(w)},[w]);let X=n.useCallback(e=>{""===e.trim()?(P(r,w),F(w)):P(r,e)},[r,w,P]),$=(0,H.AF)((0,H.Pt)(v,"text-input"),"change",n.useCallback(e=>{F(e.currentTarget.value)},[F])),W=(0,H.v_)((0,H.Pt)(v,"text-input"),"keydown",e=>{e.keyCode===Z.Uz.ESCAPE?(P(r,w),F(w)):e.keyCode===Z.Uz.ENTER&&X(e.currentTarget.value)},{recordMetadata:e=>({inputValue:e.currentTarget.value}),playbackMetadata:e=>({currentTarget:{value:e.inputValue}})}),G=(0,H.v_)(v,"keydown",e=>{c&&!u&&(e.keyCode===Z.Uz.BACKSPACE||e.keyCode===Z.Uz.DELETE)?l():c&&!u&&e.keyCode===Z.Uz.G&&(0,Z.Fo)(e)?(_(),e.preventDefault()):!u&&"Tab"!==e.key&&e.nativeEvent&&j.Y5.forwardKeyboardEvent(e.nativeEvent)}),Q=n.useCallback(()=>{X(B)},[X,B]),J=(0,H.rf)(v,"contextmenu",e=>{x(e)}),ee=(0,H.rf)(v,"mousemove",e=>{L(e)},{recordMetadata:e=>({bounds:e.currentTarget.getBoundingClientRect(),pageX:e.pageX,pageY:e.pageY}),playbackMetadata:e=>({currentTarget:{getBoundingClientRect:()=>e.bounds},pageX:e.pageX,pageY:e.pageY})}),et=(0,H.rf)(v,"mousedown",e=>{T(e),o()}),el=(0,H.rf)(v,"mouseenter",n.useCallback(()=>{O(!0),b?.(!0)},[O,b])),es=n.useCallback(()=>{O(!1),b?.(!1)},[O,b]),en=(0,H.rf)(v,"dblclick",n.useCallback(e=>{k(e)},[k])),ea=Math.min((h-1)*3,18),eo=z.jNX-4-ea,er=(U||g)&&!u,ei=N||D,ed=V()({[q]:!y&&ei,"styles--folderSecondarySelected--SL0JY":D||N&&!m}),ec=V()({"styles--rowSelectedSecondaryLightBlue--S-zy- draggable_list--rowSelectedSecondary--yOI1g raw_components--rowSelectedSecondary---U7Us raw_components--rowSelected--M2Eip":ei,[q]:!p&&ei}),eu=V()("styles--rowWithBorder--bphZ-",{[ed]:f,[ec]:!f,"styles--rowWithHover--RWNMH":!ei&&(a||U&&!d)}),ey=(0,s.jsx)("div",{className:u?"styles--rowContentsRenaming--oDTtO styles--rowContents--37JBy":"styles--rowContents--37JBy",style:{width:"100%"},children:u?(0,s.jsx)(A.ks,{autoCapitalize:"off",autoCorrect:"off",autoFocus:!0,className:"styles--input--LbjR0",innerRef:Y,onBlur:Q,onChange:$,onKeyDown:W,spellCheck:!1,value:B}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"styles--name--KWZ8d ellipsis--ellipsis--Tjyfa",ref:S,...K,children:w}),I&&(0,s.jsx)("div",{className:"styles--textStyle--DiUv4",children:I})]})},w);return(0,s.jsxs)(M.e6,{ref:R,className:eu,dragging:d,hideGrabber:!0,onBlur:E,onContextMenu:J,onDoubleClick:en,onFocus:C,onKeyDown:G,onMouseDown:et,onMouseEnter:el,onMouseLeave:es,onMouseMove:ee,selected:N,selectedSecondary:!1,tabIndex:0,children:[ea>0&&(0,s.jsx)("span",{style:{gridColumnEnd:`span ${ea}`}}),(0,s.jsxs)("div",{className:"styles--childLeftContainer--Hu61K",style:{gridColumnEnd:`span ${er||i?eo-7:eo}`},children:[e,ey]}),t]})}function es({deleteSelectedItems:e,folder:t,folderNameToNestUnder:l,hideStylePreview:o,index:r,isCollapsed:i,isDragging:d,isEditable:c,isRenaming:u,isTemporarilyExpanded:y,isFirstChildOfSelection:p,level:m,onContextMenu:f,onCreateFolder:g,onMouseDown:w,onMouseMove:S,onRenameItem:C,recordingKey:E,selected:_,selectedSecondary:k,stopRenamingItem:T,temporarilyExpandFolder:j,toggleFolder:L}){let v=(0,a.wA)(),[R,N]=n.useState(!1),D=n.useRef(null),P=n.useRef(null),M=R&&!u&&c,K=n.useCallback(()=>{L(!i)},[i,L]),H=n.useCallback(e=>{e.target!==P.current&&t.styleTypeSection&&C(t.name,!1,t.styleTypeSection)},[t.name,t.styleTypeSection,C]);n.useEffect(()=>{if(R&&d&&i){let e=setTimeout(()=>{j(t.name)},1e3);return()=>clearTimeout(e)}},[R,d,i,j,t]);let W=n.useCallback(()=>{let e=(0,X.Zk)(t.styleTypeSection),l=D.current?.getBoundingClientRect();e&&l&&v(b.Zs({rowLeft:l.left,rowTop:l.top,styleType:t.styleTypeSection,styleNameInputPrefix:`${t.name}/`,inheritStyleKeyField:e}))},[D,t.name,t.styleTypeSection,v]);return(0,s.jsx)(el,{childLeft:(0,s.jsx)(B.E,{onClick:K,className:"styles--caretContainer--4-dqw",ref:P,children:i&&!y?(0,s.jsx)(U.k,{className:Q}):(0,s.jsx)(O.O,{className:Q})}),childRight:M&&(0,s.jsx)(A.$4,{children:(0,s.jsx)(F.K,{recordingKey:h.Pt(E,"addButton"),"aria-label":(0,x.t)("design_systems.styles.tooltips.create"),onClick:W,htmlAttributes:{"data-tooltip-type":$.Ib.TEXT,"data-tooltip":(0,x.t)("design_systems.styles.tooltips.create")},children:(0,s.jsx)(Y.e,{})})}),deleteSelectedItems:e,forceShowHoverBorder:l===t.name,hideStylePreview:o,index:r,isCollapsed:i,isDragging:d,isEditable:c,isFirstChildOfSelection:p,isFolder:!0,isRenaming:u,level:m,name:(0,I.kH)(t.name),onContextMenu:f,onCreateFolder:g,onDoubleClick:H,onHoverChange:N,onMouseDown:w,onMouseMove:S,onRenameItem:C,recordingKey:E,rowRef:D,selected:_,selectedSecondary:k,stopRenamingItem:T})}var en=l(454851),ea=l(101441),eo=l(983500),er=l(258709),ei=l(563792),ed=l(645249),ec=l(834812);function eu({deleteSelectedItems:e,hideStylePreview:t,index:l,isDragging:o,isEditable:r,isRenaming:i,isLastChildOfSelection:d,level:c,onContextMenu:u,onCreateFolder:y,onInspectStyle:p,onMouseDown:m,onMouseMove:f,onRenameItem:g,recordingKey:w,selected:S,selectedSecondary:C,stopRenamingItem:_,dsStyle:k,stylePreviewShown:j,updateContextMenuStyleRef:L,updateSelection:v,updateFocusRowRef:R}){let[N,D]=n.useState(!1),[P,M]=n.useState(!1),K=(0,a.wA)(),B=n.useRef(null),F=n.useRef(null),U=n.useCallback(()=>{M(!0)},[]),O=n.useCallback(e=>{e.currentTarget.contains(e.relatedTarget)||M(!1)},[]),Y=n.useCallback(()=>{r&&g(k.node_id,!0,k.style_type)},[g,k.node_id,k.style_type,r]),X=j.isShown&&!j.isCreating&&j.style.node_id===k.node_id&&(0,er.EF)(j.style,k),H=(N||P)&&!i||X,W=n.useCallback(function(){let e=F.current;if(e){let t=e.getBoundingClientRect();X?K(b.sw()):(K(b.rk({style:k,rowTop:t.top,rowLeft:t.left})),p(k),v({type:k.style_type,folderNames:new Set,styleIds:new Set(k.node_id)}))}K(E.XE())},[K,p,v,k,X]),V=n.useCallback(e=>{(2===e.button||e.ctrlKey)&&L(F.current),m(e),X&&W()},[W,m,X,L]),Z=B.current,G=!!Z&&Z.offsetWidth<Z.scrollWidth,Q=n.useMemo(()=>!o&&k.description&&G?{"data-tooltip-type":$.Ib.SPECIAL,"data-tooltip":ec.Z,"data-tooltip-style-name":(0,I.kH)(k.name),"data-tooltip-style-description":k.description,"data-tooltip-max-width":z.jNX*(0,eo.hG)(z.dGl)}:null,[G,o,k.name,k.description]),q="TEXT"===k.style_type&&k.meta?.style_thumbnail?k.meta.style_thumbnail:null;return(0,s.jsx)(el,{childLeft:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(ed.zi,{dsStyle:k,disableTooltip:!0}),S&&"FILL"===k.style_type&&(0,s.jsx)("div",{className:"styles--selectedRing--UniEc"})]}),childRight:H&&(0,s.jsxs)(A.$4,{children:[(0,s.jsx)("div",{style:{gridColumnEnd:"span 1"}}),(0,s.jsx)(en.d,{recordingKey:h.Pt(w,"customButton"),"aria-expanded":X,onClick:W,htmlAttributes:{"data-tooltip-type":$.Ib.TEXT,"data-tooltip":r?(0,x.t)("design_systems.styles.edit_style"):(0,x.t)("design_systems.styles.view_style"),onMouseDown:T.dG,tabIndex:0,onKeyDown:e=>{("Enter"===e.key||"Space"===e.key)&&(e.preventDefault(),W())}},children:(0,s.jsx)(ea.P,{}),"aria-label":r?(0,x.t)("design_systems.styles.edit_style"):(0,x.t)("design_systems.styles.view_style")})]}),deleteSelectedItems:e,hideStylePreview:t,index:l,inspectStyleSelected:X,isDragging:o,isEditable:r,isFocused:P,isFolder:!1,isLastChildOfSelection:d,isRenaming:i,level:c,name:(0,I.kH)(k.name),nameRef:B,onBlur:O,onContextMenu:u,onCreateFolder:y,onDoubleClick:Y,onFocus:U,onHoverChange:D,onMouseDown:V,onMouseMove:f,onRenameItem:g,recordingKey:w,rowRef:e=>{e&&(R?.(e),F.current=e)},secondaryName:q&&(0,ei.P$)(q),selected:S,selectedSecondary:C,stopRenamingItem:_,tooltipData:Q})}function ey({styleType:e,setDefaultToolOnCreateStyle:t,children:l}){let n=!(0,L.p8)("isReadOnly");return(0,s.jsxs)("div",{className:"styles--styleTypeSection--jPjTq component_tiles--section--qMua7",children:[n?(0,s.jsx)(ep,{styleType:e,recordingKey:`style-section-header-${e}`,setDefaultToolOnCreateStyle:t}):(0,s.jsx)("div",{className:"styles--styleTypeSectionHeader--224lA component_tiles--sectionHeader--eEC6d raw_components--panelTitle--VAQQA",children:(0,R.QT)(e)}),l]})}function ep({styleType:e,setDefaultToolOnCreateStyle:t,recordingKey:l}){let[o,r]=n.useState(!1),i=(0,a.wA)(),d=n.useRef(null),c=n.useCallback(()=>{t&&j.Y5.triggerAction("set-tool-default");let l=(0,X.Zk)(e),s=d.current?.getBoundingClientRect();l&&s&&i(b.Zs({rowLeft:s.left,rowTop:s.top,styleType:e,inheritStyleKeyField:l}))},[t,e,i]);return(0,s.jsxs)("div",{className:"styles--styleTypeSectionRow--wVTIO",onMouseEnter:()=>r(!0),onMouseLeave:()=>r(!1),onFocusCapture:()=>r(!0),onBlur:()=>r(!1),ref:d,children:[(0,s.jsx)("h3",{className:"styles--styleTypeSectionRowLabel--PrKm-",children:(0,R.QT)(e)}),(0,s.jsx)("div",{style:{opacity:o?1:0},children:(0,s.jsx)(F.K,{recordingKey:h.Pt(l,"addButton"),"aria-label":(0,x.t)("design_systems.styles.tooltips.create_style_from_section",{kind:(0,R.XV)(e).toLowerCase()}),onClick:c,htmlAttributes:{"data-tooltip-type":$.Ib.TEXT,"data-tooltip":(0,x.t)("design_systems.styles.tooltips.create_style_from_section",{kind:(0,R.XV)(e).toLowerCase()})},children:(0,s.jsx)(Y.e,{})})})]})}ey.displayName="StyleTypeSection";var em=l(665261),ef=l(506192),eg=l(58814);let eh=em.ms,ew=em.c$,eS=em.wv,ex="styles-by-type-context-menu",eC=.75*(0,eo.hG)(z.uj0);function eE({styleRowRef:e,onEditStyle:t,onRenameItem:l,onCreateFolder:o,onDeleteItems:r,onCutItems:i,onCopyItems:d,onDuplicateItems:c,onPasteItems:u,styleType:y}){let p=(0,ef.Um)(),m=(0,a.d4)(e=>e.library.localStyleSelection),f=n.useMemo(()=>m&&m.type===y&&p?.type===ex?(0,eg.QA)(m,p.data.uiList):[],[m,p,y]),g=n.useMemo(()=>(0,eg.Ug)(f).map(e=>e.node_id),[f]),h=g.length;return p&&g.length?(0,s.jsx)(e_,{dropdownShown:p,numStyles:h,onCopyItems:d,onCreateFolder:o,onCutItems:i,onDeleteItems:r,onDuplicateItems:c,onEditStyle:t,onPasteItems:u,onRenameItem:l,selectedItems:f,styleRowRef:e}):(0,s.jsx)("div",{})}function e_({styleRowRef:e,selectedItems:t,numStyles:l,dropdownShown:o,onEditStyle:r,onRenameItem:i,onCreateFolder:d,onDeleteItems:u,onCutItems:y,onCopyItems:p,onDuplicateItems:m,onPasteItems:f}){let g=(0,a.wA)();n.useEffect(()=>(c.glU?.computePastableStyleCount(),()=>{c.glU?.clearPastableStyleCount()}),[]);let h=(0,a.d4)(e=>e.mirror.appModel.pastableStyleCount),w=!!v.q5()?.canEdit,S=n.useCallback(()=>{if(!t.length||t[0].type!==D.PW.STYLE)return;let l=t[0];if(e){let t=e.getBoundingClientRect();g(b.rk({style:l,rowTop:t.top,rowLeft:t.left})),g(E.XE())}r(l)},[g,t,r,e]),C=n.useCallback(()=>{if(!t.length||t[0].type===D.PW.STYLE)return;let e=t[0];i(e.name,!1,e.styleTypeSection)},[i,t]);if(-1===h)return(0,s.jsx)("div",{});if(!w)return l>1?(0,s.jsx)("div",{}):(0,s.jsx)(eh,{style:o.data.position,className:G,children:(0,s.jsx)(ew,{recordingKey:"edit-style-option",onClick:S,children:(0,x.tx)("design_systems.styles.view_style")})});let _=1===l&&(t[0].type===D.PW.STYLE?(0,s.jsx)(ew,{recordingKey:"edit-style-option",onClick:S,children:(0,x.tx)("design_systems.styles.edit_style")}):(0,s.jsx)(ew,{recordingKey:"rename-folder-option",onClick:C,children:(0,x.tx)("design_systems.styles.rename_folder")}));return(0,s.jsxs)(eh,{style:o.data.position,className:G,children:[(0,s.jsx)(ew,{recordingKey:"create-folder-option",onClick:d,children:(0,x.tx)("design_systems.styles.add_new_folder")}),_,(0,s.jsx)(ew,{recordingKey:"delete-style-option",onClick:u,children:(0,x.tx)("design_systems.styles.delete_styles",{numStyles:l})}),(0,s.jsx)(eS,{}),(0,s.jsx)(ew,{recordingKey:"cut-style-option",onClick:y,children:(0,x.tx)("design_systems.styles.cut_styles",{numStyles:l})}),(0,s.jsx)(ew,{recordingKey:"copy-style-option",onClick:p,children:(0,x.tx)("design_systems.styles.copy_styles",{numStyles:l})}),(0,s.jsx)(ew,{recordingKey:"duplicate-style-option",onClick:m,children:(0,x.tx)("design_systems.styles.duplicate_styles",{numStyles:l})}),!!h&&(0,s.jsx)(ew,{recordingKey:"paste-style-option",onClick:f,children:(0,x.tx)("design_systems.styles.paste_styles",{numStyles:h})})]})}var ek=l(307829),eb=l(180),eT=l(227601),ej=l(843457),eL=l(984282),ev=l(876070),eR=l(812714),eI=l(565526),eN=l(215853),eD=l(825911),eP=l(501883);let eM="local-style-creation-dropdown";function eK({setDefaultToolOnCreateStyle:e}){return(0,eR.kc)().eu_fpl_styles_header_menu?(0,s.jsx)(eF,{setDefaultToolOnCreateStyle:e}):(0,s.jsx)(eA,{setDefaultToolOnCreateStyle:e})}function eA({setDefaultToolOnCreateStyle:e}){let t=(0,a.wA)(),l=(0,n.useContext)(eD.lk),o=!(0,L.p8)("isReadOnly"),r=n.useRef(null),i=n.useRef(null),d=r.current,c=(0,ef.Um)(),u=c?.type===eM,y=c?.data?.targetRect,p="localStyleHeader",m=0===(0,K.Bs)().length,g=(0,a.d4)(e=>e.stylePreviewShown.isShown&&e.stylePreviewShown.isCreating),w=n.useMemo(()=>y||(u&&d?d.getBoundingClientRect():null),[y,d,u]),S=()=>{t(C.oB())},E=()=>{t(C.j7({type:eM}))},_=e=>{e.stopPropagation(),t(b.YG());let l=r.current;u?S():l&&((0,f.sx)("editor-local-styles-dropdown-show"),E())},k=t=>{e&&j.Y5.triggerAction("set-tool-default"),S();let s=(0,X.Zk)(t),n=i.current?.getBoundingClientRect();s&&n&&l({styleType:t,inheritStyleKeyField:s,rowLeft:n.left,rowTop:n.top})},T=m&&!u&&!g;return(0,s.jsxs)(A.fI,{className:T?ee:J,ref:i,children:[(0,s.jsx)(eP.xZ,{className:et,onMouseDown:e=>T&&_(e),onClick:e=>e.stopPropagation(),children:(0,x.tx)("design_systems.styles.local_styles")}),o&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(A.K0,{ref:r,onMouseDown:_,onClick:e=>e.stopPropagation(),className:u?"styles--stylesHeaderButtonHighlight--WTeWy raw_components--iconButtonSelected--bJibL raw_components--_iconButton---ybo6":"styles--stylesHeaderButton--jhpA5 draggable_list--addButton--D0q--","data-tooltip-type":$.Ib.TEXT,"data-tooltip":(0,x.t)("design_systems.create_style.create_style"),recordingKey:h.Pt(p,"addButton"),children:(0,s.jsx)(eb.$,{})}),u&&w&&(0,s.jsx)(eN.Cf,{targetRect:w,minWidth:128,disableDropdownScrollContainer:!0,propagateCloseClick:!0,children:R.og.map(e=>{let{icon:t,label:l}=eB(e),n=t=>{t.stopPropagation(),k(e)};return(0,s.jsxs)(em.c$,{className:"styles--createStyleDropdownRow--7iCXQ",onClick:n,onPointerUp:n,recordingKey:h.Pt(p,`dropdown-option-${e}`),children:[(0,s.jsx)(eI.Nu,{children:t}),l]},e)})})]})]})}function eB(e){switch(e){case"TEXT":return{icon:(0,s.jsx)(eT.B,{}),label:(0,x.t)("design_systems.styles.dropdown.text")};case"FILL":return{icon:(0,s.jsx)(ej.j,{}),label:(0,x.t)("design_systems.styles.dropdown.fill")};case"GRID":return{icon:(0,s.jsx)(eL.E,{}),label:(0,x.t)("design_systems.styles.dropdown.guide")};case"EFFECT":return{icon:(0,s.jsx)(ev.A,{}),label:(0,x.t)("design_systems.styles.dropdown.effect")};default:throw(0,o.j)(e),Error(`Invalid style type: ${e}`)}}function eF({setDefaultToolOnCreateStyle:e}){let t=n.useRef(null),l=(0,n.useContext)(eD.lk),{getTriggerProps:o,manager:r}=ek.b(),{onClick:i,...d}=o(),c=!(0,L.p8)("isReadOnly"),u=0===(0,K.Bs)().length,y=(0,a.d4)(e=>e.stylePreviewShown.isShown&&e.stylePreviewShown.isCreating),p=u&&!r.isOpen&&!y,m=n.useCallback(()=>{p&&(r.setOpen(!0),(0,f.sx)("editor-local-styles-dropdown-show"))},[r,p]),g=n.useCallback(e=>{r.isOpen||(0,f.sx)("editor-local-styles-dropdown-show"),i(e)},[r.isOpen,i]),h=n.useCallback(s=>{e&&j.Y5.triggerAction("set-tool-default");let n=(0,X.Zk)(s),a=t.current?.getBoundingClientRect();n&&a&&l({styleType:s,inheritStyleKeyField:n,rowLeft:a.left,rowTop:a.top})},[l,e,t]);return(0,s.jsxs)(A.fI,{className:p?ee:J,ref:t,children:[(0,s.jsx)(eP.xZ,{className:et,onMouseDown:m,onClick:e=>e.stopPropagation(),children:(0,x.tx)("design_systems.styles.local_styles")}),c&&(0,s.jsx)(eU,{manager:r,triggerProps:{...d,onClick:g},onMenuItemClick:h,recordingKey:"localStyleHeader"})]})}function eU({manager:e,triggerProps:t,onMenuItemClick:l,recordingKey:n}){return(0,s.jsxs)(ek.bL,{manager:e,children:[(0,s.jsx)(en.d,{"aria-label":(0,x.t)("design_systems.create_style.create_style"),recordingKey:h.Pt(n,"addButton"),...t,children:(0,s.jsx)(eb.$,{})}),(0,s.jsx)(ek.mc,{children:R.og.map(e=>{let{icon:t,label:a}=eB(e);return(0,s.jsxs)(ek.q7,{onClick:()=>l(e),recordingKey:h.Pt(n,`menu-item-${e}`),children:[(0,s.jsx)(ek.Q$,{children:t}),a]},e)})})]})}let eO="collapsed-style-folders";function eY({scrollContainer:e,setDefaultToolOnCreateStyle:t,recordingKey:l}){let n=(0,K.Bs)(),a=(0,L.p8)("isReadOnly");return 0===n.length&&a?null:(0,s.jsx)(S.k,{name:"local_styles_panel",children:(0,s.jsx)(A.Zk,{children:(0,s.jsx)(eX,{scrollContainer:e,setDefaultToolOnCreateStyle:t,recordingKey:l})})})}function eX({scrollContainer:e,setDefaultToolOnCreateStyle:t,recordingKey:l}){let r=(0,a.wA)(),i=(0,a.d4)(e=>e.stylePreviewShown),y=(0,a.d4)(e=>e.mirror.appModel.activeCanvasEditModeType),p=(0,a.d4)(e=>e.mirror.appModel.currentTool),m=n.useRef(null),g=(0,K.Bs)(),w=(0,a.d4)(e=>e.library.localStyleSelection),[S,x]=n.useState(null),[E,k]=n.useState(null),L=n.useRef(null),[v,N]=n.useState(!1),P=y===c.m1T.GRADIENT||y===c.m1T.RASTER||p===c.NLJ.DROPPER_COLOR;n.useEffect(()=>{let e=()=>{!P&&(r(_.Bn(null)),i.isShown&&(r(b.sw()),c.glU?.selectStyle(d.n3.INVALID,d.IA.INVALID)))},t=(0,T.ft)();return t?window.addEventListener("pointerdown",e):window.addEventListener("mousedown",e),()=>{t?window.removeEventListener("pointerdown",e):window.removeEventListener("mousedown",e)}},[r,i.isShown,P]);let{stylesByType:M,foldersAndStylesByType:A}=n.useMemo(()=>{let e=(0,R.Kw)(g),t=new Map;return R.og.map(l=>{let s=e.get(l);if(s){(0,R.LX)(s);let e=(0,eg.lM)(s,l),n=(0,eg.l0)(e);t.set(l,n)}}),{stylesByType:e,foldersAndStylesByType:t}},[g]),B=n.useCallback(e=>{c.glU&&((0,o.KF)(null!=e.content_hash,"style does not have a hash"),c.glU.selectStyleByGuid(e.node_id),r(_.ay({isRenaming:!1})),(0,f.sx)("Style Inspected",{styleType:e.style_type,from:"styleListClick"}))},[r]),F=n.useCallback((e,t,l)=>{x(t?e:null),k(t?null:{name:e,styleTypeSection:l})},[]),U=n.useCallback(e=>{if(!e){r(_.Bn(null));return}let t=new Set;e.styleIds.forEach(l=>{let s=g.find(e=>e.type===D.PW.STYLE&&e.node_id===l);if(!s)return;let n=(0,I.In)(s.name);e.folderNames.has(n)||t.add(l)});let l={type:e.type,folderNames:e.folderNames,styleIds:t};r(_.Bn(l))},[r,g]),O=n.useCallback((e,t,l)=>{if(!w)return;let s=e[t],n=(e,t)=>{let s=(0,I.ke)(e.name),n=null!=t?t:s.length-1;s[n]=l;let a=(0,eg.Pc)(s.join("/"));u.l7.user("rename-style",()=>c.glU?.renameNode(e.node_id,a))};if(s.name!==l){if(s.type===D.PW.STYLE)n(s);else{(0,eg.mx)(t,e).forEach(t=>{let l=e[t];l.type===D.PW.STYLE&&n(l,s.level-1)});let a=new Set(w.folderNames);a.delete(s.name);let o=(0,I.In)(s.name)+"/"+l;a.add(o),U({type:w.type,folderNames:a,styleIds:w.styleIds})}}j.Y5.triggerAction("commit"),x(null),k(null)},[w,U]),Y=n.useCallback((e,t)=>{t.preventDefault(),t.stopPropagation(),r(C.j7({type:ex,data:{uiList:e,position:{top:t.clientY,left:Math.min(t.clientX,window.innerWidth-eC)}}}))},[r]),X=n.useCallback(e=>{L.current=e},[]),$=n.useCallback(()=>{N(!0)},[]),H=n.useCallback(()=>{N(!1)},[]);return(0,s.jsxs)("div",{className:"styles--localStylesPanel--T4Gqs",ref:m,children:[(0,s.jsx)(eK,{setDefaultToolOnCreateStyle:t}),R.og.map(n=>{let a=M.get(n);if(!a)return;let o=A.get(n);if(o)return(0,s.jsx)(e$,{isDragging:v,onContextMenu:Y,onDragEnd:H,onDragStart:$,onEditStyle:B,onInspectStyle:B,onRenameItem:F,recordingKey:h.Pt(l,`style-section-${n}`),renamingFolder:E,renamingStyleID:S,scrollContainer:e,setDefaultToolOnCreateStyle:t,stopRenamingItem:O,storedStyleList:a,styleList:o,styleRowRef:L.current,styleType:n,updateContextMenuStyleRef:X,updateSelection:U},n)})]})}function e$({styleType:e,storedStyleList:t,styleList:l,renamingStyleID:o,renamingFolder:f,onRenameItem:S,stopRenamingItem:C,onDragStart:_,onDragEnd:T,onInspectStyle:R,onContextMenu:M,updateContextMenuStyleRef:K,updateSelection:A,styleRowRef:B,scrollContainer:F,setDefaultToolOnCreateStyle:U,recordingKey:O}){let Y=(0,v.q5)(),X=!(0,L.p8)("isReadOnly"),$=(0,a.wA)(),H=(0,a.d4)(e=>e.stylePreviewShown),W=(0,a.d4)(t=>(0,N.i4)(t,e)),V=(0,a.d4)(t=>(0,N.A7)(t,e,l)),[Z,z]=n.useState(()=>{if(p.x4&&Y){let t=JSON.parse(p.x4.getItem(eO)||"{}");if(Y.key in t){let l=t[Y.key];if(e in l)return new Set(l[e])}else t[Y.key]={},p.x4.setItem(eO,JSON.stringify(t))}return new Set(l.filter(e=>"STYLE_FOLDER"===e.type).map(e=>e.name))}),[G,Q]=n.useState([]),[q,J]=n.useState(null),[ee,et]=n.useState(null),el=n.useMemo(()=>(0,r.s)(()=>{$(k.GT({styleType:e}))},200),[$,e]);n.useEffect(()=>{(0,m.nl)()||el()},[el,l]);let en=(0,g.ZC)(Z);n.useEffect(()=>{if(!en||!p.x4||!Y||(0,w._f)(en,Z))return;let t=JSON.parse(p.x4.getItem(eO)||"{}"),l=t[Y.key];l&&(l[e]=[...Z],p.x4.setItem(eO,JSON.stringify(t)))},[Z,Y,en,e]);let ea=n.useCallback(e=>!!e&&"STYLE_FOLDER"===e.type,[]),eo=n.useCallback((e,t)=>{let s=new Set(e),n=[];l.forEach((e,t)=>{if(s.has(e)&&(n.push(t),"STYLE_FOLDER"===e.type)){let e=(0,eg.mx)(t,l);n.push(...e)}});let a=new Set(n),o=t?l.indexOf(t):l.length,r=[...(0,i.y1)(o).filter(e=>!a.has(e)),...n,...(0,i.y1)(o,l.length).filter(e=>!a.has(e))],d=new Map;return r.forEach((e,t)=>{e!==t&&d.set(e,t)}),d},[l]),er=n.useCallback(()=>{c.glU&&H.isShown&&($(b.sw()),$(E.XE()),c.glU.selectStyle(d.n3.INVALID,d.IA.INVALID))},[$,H.isShown]),ei=n.useMemo(()=>{if(!q)return null;if("in"===q.type){let e=l[q.index];return e?{folderNameToNestUnder:e.name,dividerStyles:{display:"none"}}:null}if(null==q.index||null==ee||!W)return null;let e=null,t=null;return 0===q.index?t=l[q.index]:q.index===l.length?e=l[q.index-1]:(e=l[q.index-1],t=l[q.index]),(0,eg.g5)({prevItem:e,nextItem:t,localStyleSelection:W,styleList:l,collapsedFolders:Z,temporarilyExpandedFolders:G,horizontalDragAmount:ee})},[Z,ee,W,q,l,G]),ed=n.useCallback((s,n,a,o)=>{if(!t||!n&&!a||!ei)return;let r=ei.folderNameToNestUnder;if(null===r)return;let i=[],d=[];s.forEach(e=>{(0,eg.Md)(n,e,a,r)&&("STYLE_FOLDER"===e.type?d.push(e):i.push(e))});let c=i.concat(d);if(!c.length)return;let y=u.l7.user("reorder-styles",()=>(0,eg.VB)(c,n,a,r,l,t,o||!1)),p=new Set,m=new Set;c.forEach(e=>{let t=(0,eg.t_)(e),l=y?.get(t);l&&("STYLE_FOLDER"===e.type?p.add(l):m.add(t))}),A({type:e,folderNames:p,styleIds:m});let f=new Set;return Z.forEach(e=>{if(r.startsWith(e))return;let t=y?.get(e);t?f.add(t):f.add(e)}),z(f),er(),o||j.Y5.triggerAction("commit"),eo(c,a)},[A,Z,ei,eo,er,t,l,e]),ec=n.useCallback((e,t)=>{if("STYLE_FOLDER"!==t.type)return;let s=l.indexOf(t),n=(0,eg.dm)(t).filter(e=>(0,I.In)(e.name)===t.name);if(!n.length)return ed(e,t,l[s+1]);{let t=n[n.length-1],s=l.indexOf(t);return ed(e,t,l[s+1])}},[ed,l]),ep=(0,y.xx)((e,t)=>{let s=new Map,n=t.map(e=>e.type===D.PW.STYLE?e.node_id:e.name);return e.forEach(e=>{let a=n.indexOf(e);-1!==a&&(0,eg.mx)(a,l).forEach(e=>{let l=t[e],n="STYLE_FOLDER"===l.type?l.name:l.node_id,a=s.get(n);a||(a=0),s.set(n,a+1)})}),s}),em=n.useCallback(()=>{if(!W)return;let t=(0,eg.QA)(W,l);if(0===t.length)return;let{prevItem:s,nextItem:n}=(0,eg.j3)(t,l);ed(t,s,n,!0);let a=(0,I.In)(t[0]?.name||""),o=(0,x.t)("design_systems.create_style.new_folder");a&&(o=`${a}/${o}`);let r=(e,t)=>{if(e.type===D.PW.STYLE){let l=o+"/"+t+(0,I.kH)(e.name);u.l7.user("rename-style",()=>{c.glU.renameNode(e.node_id,l)})}else{let l=t+(0,I.kH)(e.name)+"/";e.styles.forEach(e=>{r(e,l)}),e.subfolders.forEach(e=>{r(e,l)})}};t.forEach(e=>{r(e,"")}),A({type:e,folderNames:new Set([o]),styleIds:new Set}),S(o,!1,e)},[A,ed,W,S,l,e]),ef=n.useCallback((e,t)=>{let s=l[e];"STYLE_FOLDER"===s.type&&z(e=>{let l=new Set(e);return t?l.add(s.name):l.delete(s.name),l})},[l]),eh=n.useCallback((e,t)=>{z(s=>{let n=new Set(s),a=l[e];if("STYLE_FOLDER"===a.type){let e=(0,I.In)(a.name),l=""===e?t:e+"/"+t;Z.has(a.name)&&(Z.delete(a.name),Z.add(l)),(0,eg.KU)(a).forEach(e=>{if(Z.has(e.name)){let t=e.name.replace(a.name,"");Z.add(l+t),Z.delete(e.name)}})}return n}),C(l,e,t)},[C,Z,l]),ew=n.useCallback(e=>{M(l,e)},[M,l]),eS=n.useCallback((e,t,l)=>{let s=t>.5?1:Math.round(1e3*t)/1e3;J({index:e,type:l?"in":"before"}),et(s)},[]),ex=n.useCallback(()=>{z(e=>u.l7.user("delete-styles",()=>{let t=new Set(e);return(W?(0,eg.QA)(W,l):[]).forEach(e=>{"STYLE_FOLDER"===e.type?((0,eg.a2)(e,Y?.key||null),Z.delete(e.name),(0,eg.KU)(e).forEach(e=>Z.delete(e.name))):(0,eg.Nr)(e,Y?.key||null)}),t})),j.Y5.triggerAction("commit"),H.isShown&&($(b.sw()),$(E.XE()),c.glU.selectStyle(d.n3.INVALID,d.IA.INVALID)),A(null)},[H.isShown,A,W,l,Y?.key,Z,$]),eC=n.useMemo(()=>{let e=W?(0,eg.QA)(W,l):[];return(0,eg.Ug)(e).map(e=>e.node_id)},[W,l]),e_=n.useCallback(()=>{u.l7.user("cut-styles",()=>c.glU&&c.glU.cutStyles(eC))},[eC]),ek=n.useCallback(()=>{u.l7.user("copy-styles",()=>c.glU&&c.glU.copyStyles(eC))},[eC]),eb=n.useCallback(()=>{u.l7.user("duplicate-styles",()=>c.glU&&c.glU.duplicateStyles(eC))},[eC]),eT=n.useCallback(()=>{u.l7.user("paste-styles",()=>c.glU&&c.glU.pasteStyles())},[]);!function({cutSelectedItems:e,copySelectedItems:t,localStyleSelection:l,onPaste:s}){n.useEffect(()=>{if(!l)return;let n=(e,t)=>{e.target&&("INPUT"===e.target.tagName||"TEXTAREA"===e.target.tagName)||(t(),e.stopPropagation())},a=t=>{n(t,e)},o=e=>{n(e,s)},r=e=>{n(e,t)};return document.addEventListener("cut",a),document.addEventListener("paste",o),document.addEventListener("copy",r),()=>{document.removeEventListener("cut",a),document.removeEventListener("paste",o),document.removeEventListener("copy",r)}},[e,s,t,l])}({cutSelectedItems:e_,onPaste:eT,copySelectedItems:ek,localStyleSelection:W});let ej=n.useCallback(e=>{Q(t=>[...t,e])},[]),eL=n.useCallback(()=>{_()},[_]),ev=h.rf(O,"ondragend",n.useCallback(()=>{J(null),et(null),Q([]),T()},[T])),eR=(0,g.ZC)(W);n.useEffect(()=>{eR!==W&&W&&z(e=>{let l=new Set(e);for(let e of W.styleIds.values()){let s=t.find(t=>t.node_id===e);if(!s)continue;let n=(0,I.ke)(s.name);for(let e=0;e<n.length;e++){let t=n.slice(0,e).join("/");l.delete(t)}}return l})},[W,eR,t]);let eI=n.useRef(null),eN=n.useCallback(e=>{eI.current=e},[eI]),eD=n.useMemo(()=>W?(0,eg.h$)(W,l):[],[W,l]),eP=n.useMemo(()=>V?(0,eg.h$)(V,l):[],[V,l]),eM=n.useMemo(()=>[...eD,...eP].sort((e,t)=>e-t),[eD,eP]),eK=n.useCallback((e,t,n,a,r,i)=>{let d="STYLE_FOLDER"===e.type?e.name:e.node_id,c=!1,u=!1;for(let t of G)if("STYLE_FOLDER"===e.type){if(e.name===t){u=!0;break}e.name.startsWith(t)&&(c=!0)}else if((0,I.In)(e.name)===t){c=!0;break}if(!u&&!c&&ep(Z,l).has(d))return null;let y=eM&&eM[eM.length-1]===t,p=eM&&eM[0]===t;if(e.type===D.PW.STYLE){let l=(0,eg.rM)(e),d=null!=o&&o===e.node_id;return(0,s.jsx)(eu,{deleteSelectedItems:ex,dsStyle:e,hideStylePreview:er,index:t,isDragging:a,isEditable:X,isLastChildOfSelection:y,isRenaming:d,level:l,onContextMenu:ew,onCreateFolder:em,onInspectStyle:R,onMouseDown:r,onMouseMove:i,onRenameItem:S,recordingKey:`style-row-${t}`,selected:n,selectedSecondary:V?.styleIds.has(e.node_id)||!1,stopRenamingItem:eh,stylePreviewShown:H,updateContextMenuStyleRef:K,updateFocusRowRef:n?eN:null,updateSelection:A},e.node_id)}{let l=null!=f&&f.name===e.name&&f.styleTypeSection===e.styleTypeSection,o=ei?.folderNameToNestUnder||null;return(0,s.jsx)(es,{deleteSelectedItems:ex,folder:e,folderNameToNestUnder:o,hideStylePreview:er,index:t,isCollapsed:Z.has(e.name),isDragging:a,isEditable:X,isFirstChildOfSelection:p,isRenaming:l,isTemporarilyExpanded:u,level:e.level,onContextMenu:ew,onCreateFolder:em,onMouseDown:r,onMouseMove:i,onRenameItem:S,recordingKey:`folder-section-${e.styleTypeSection}-row-${t}`,selected:n,selectedSecondary:V?.folderNames.has(e.name)||!1,stopRenamingItem:eh,temporarilyExpandFolder:ej,toggleFolder:e=>ef(t,e)},t)}},[A,eM,Z,ex,ei?.folderNameToNestUnder,ep,er,ew,em,R,S,f,o,V?.folderNames,V?.styleIds,eh,l,H,ej,G,ef,K,X,eN]),eA=n.useCallback(t=>{let s=new Set,n=new Set;t.forEach(e=>{let t=l[e];"STYLE_FOLDER"===t.type?s.add(t.name):n.add(t.node_id)}),A({type:e,folderNames:s,styleIds:n})},[A,l,e]),eB=n.useRef(),eF=n.useRef();return n.useEffect(()=>{eB.current&&eD.length?(eB.current(),eI.current&&!eI.current.contains(document.activeElement)&&eI.current.focus()):eF.current&&!eD.length&&(eF.current(),eI.current=null)},[eB,eD,eI]),(0,s.jsx)(P.vL,{name:"StyleDraggableList",focusFunctionRef:eB,blurFunctionRef:eF,children:(0,s.jsxs)(ey,{styleType:e,setDefaultToolOnCreateStyle:U,children:[(0,s.jsx)(eH,{canInsertItemsIn:ea,insertDividerStyle:ei?.dividerStyles,isDragDisabled:!X,listItems:l,onDrag:eS,onDragEnd:ev,onDragStart:eL,onInsertItemsBetweenValues:ed,onInsertItemsIn:ec,recordingKey:"style-draggable-list",renderListItem:eK,scrollContainer:F,selectedIndices:eD,updateSelection:eA}),(0,s.jsx)(eE,{onCopyItems:ek,onCreateFolder:em,onCutItems:e_,onDeleteItems:ex,onDuplicateItems:eb,onEditStyle:R,onPasteItems:eT,onRenameItem:S,styleRowRef:B,styleType:e})]})})}let eH=M.m6}}]);

//# debugId=a01237c6-871e-5542-9ef8-943586617389

//# sourceMappingURL=https://admin.figma.com/admin/webpack-artifacts/fcc1a1091c2aaa9d82b629815d3a14b20f85f845/351-7923683eb43055b0.min.js.map