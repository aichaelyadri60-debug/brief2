"use strict";
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="876ee152-a1b0-50f1-abc5-3ca42691dd5c")}catch(e){}}();
(globalThis.webpackChunk_figma_web_bundler=globalThis.webpackChunk_figma_web_bundler||[]).push([[5913],{411916:(e,t,i)=>{i.d(t,{W:()=>u});var n=i(716976),r=i(903927),a=i(449572),o=i(513369),s=i(316862),l=i(435869),d=i(59849);function u(e=!1){let t=(0,r.wA)(),i=n.useMemo(()=>(0,s.g)(),[]),c=(0,a.bc)((0,d.gvX)({cacheNonce:i}));n.useEffect(()=>{if("loaded"!==c.status)return;let i=(0,o.oA)(c.data.currentUser.notificationExperimentInfo);i&&("exp_notification_catfile"===i.experimentName||"exp_notification_catfic"===i.experimentName)&&("prompt_to_opt_in"===i.type?t((e?l.hU:l.ZI)({userId:i.userId,fileKey:i.fileKey,experimentName:i.experimentName,toastType:"prompt_to_opt_in"})):t(l.EJ({userId:i.userId,fileKey:i.fileKey,preference:i.preference,experimentName:i.experimentName})))},[t,c,e])}},776968:(e,t,i)=>{i.d(t,{_:()=>c});var n=i(104076),r=i(716976),a=i(266808),o=i(652539),s=i(790099),l=i(223837),d=i(692042),u=i(733644);let c=r.memo(function(e){let{nodeId:t}=e,i=r.useRef(null),o=r.useRef(null),s=(0,d._X)({subscribeToUpdates_expensive:!0});return r.useEffect(()=>{let e=(0,l.EE)(`loading-embed-${t}`,[t],e=>{if(!e.position){a.glU.removeLoadingEmbed(t);return}o.current=e.position,f(i,s,o)}),n=e.currentNodePosition[t]?.position;return n?(o.current=n,f(i,s,o)):a.glU.removeLoadingEmbed(t),()=>{(0,l.lB)(`loading-embed-${t}`)}},[t,s]),(0,n.jsx)("div",{ref:i,children:(0,n.jsx)(m,{})})});function m(){return(0,n.jsx)("span",{className:"loading_embed_overlay--root--UKqJ8",children:(0,n.jsx)(o.B,{svg:u.A,className:"loading_embed_overlay--spinner--bw3Cv",autosize:!0})})}function f(e,t,i){if(!e.current||!t||!i.current)return;let n=e.current,r=i.current,a=(0,d.Yb)(t,r),o=28*t.zoomScale;n.style.transform=`translate(${a.x+(a.width-o)/2+t.x}px, ${a.y+(a.height*s.Ao/s.RN-o)/2+t.y}px) rotate(${r.angle}deg) scale(${t.zoomScale})`,n.style.transformOrigin="top left",n.style.position="absolute"}},143480:(e,t,i)=>{i.d(t,{Pm:()=>n,aF:()=>a});var n=(e=>(e.Light="LIGHT",e.Dark="DARK",e.Translucent="TRANSLUCENT",e))(n||{}),r=(e=>(e.Light="light",e.Dark="dark",e))(r||{});function a(e){let t,i;switch(e.theme){case void 0:case"LIGHT":t="LIGHT";break;case"DARK":case"TRANSLUCENT":t="DARK"}i="LIGHT"===t?"light":"dark";let n="true"===e.hideBackground;return n&&(i=function(e){switch(e){case"light":return"dark";case"dark":return"light"}}(i)),{theme:t,preferredTokenTheme:i,transparentMode:n}}},99876:(e,t,i)=>{i.d(t,{DR:()=>D,E$:()=>A,Wd:()=>U,gD:()=>M,lu:()=>F,wL:()=>j});var n=i(104076),r=i(716976),a=i(903927),o=i(684742),s=i(707779),l=i(266808),d=i(170627),u=i(264993),c=i(980852),m=i(812714),f=i(511570),p=i.n(f),E=i(367793),g=i(236631),y=i(192075),v=i(58212),h=i(638641),_=i(337059),b=i(135592),I=i(657878),x=i(592726),N=i(331497),P=i(523966),w=i(190589),S=i(125616),T=i(719625),R=i(960245),L=i(961501),O=i(697915);function D(e){let{nodeId:t,setConfigData:i,isReadOnly:o,invalidateThumbnail:s}=e,{isEmbedActive:u,setActiveEmbed:f}=(0,T._)(t),p=!o,E=(0,a.wA)(),g=(0,N.ut)(l.Ez5?.flappData().embeddablePrototypeIdPendingInsertion,""),[b,I]=(0,r.useState)(),x=(0,r.useMemo)(()=>{let t=M(e.configData);if(!t)return;let i=_.hY[t.presetIdentifier],n=t.rotation===l.xOL.CCW_90,{x:r,y:a}=i?.imageSize??{x:0,y:0},[o,s]=n?[a,r]:[r,a];return o/s},[e.configData]);(0,r.useEffect)(()=>{if(!p)return;let e=(0,c.UN)().get(t),i=x??b;e&&i&&d.l7.system("resizing-embed",()=>{let t=e.size.x>0?e.size.x:400,n=Math.floor(t/i);0===e.size.x&&(e.x-=t/2,e.y-=n/2),e.resizeWithConstraints(t,n),e.proportionsConstrained=!0})},[t,x,b,p]),(0,r.useEffect)(()=>{t===g&&(E(v.F.enqueue({type:"slides-embedded-prototype",message:(0,y.t)("slides.inserting_embed.visual_bell"),icon:h.zX.SPINNER,timeoutOverride:1/0})),f(),setTimeout(()=>{t===l.Ez5?.flappData().embeddablePrototypeIdPendingInsertion.getCopy()&&l.oHM?.embeddablePrototypeLoadFailed()},3e4))},[t,g,E,f]),(0,r.useEffect)(()=>{let e=e=>{if(e.origin!==location.origin||e.source&&"frameElement"in e.source&&null!=e.source.frameElement&&e.source.frameElement.id!==w.xu+t)return;let n=e.data;if("EMBED_PROTO_ASPECT_RATIO"===n.type&&n.data.aspectRatio&&(I(n.data.aspectRatio),t===g&&l.oHM?.embeddablePrototypeLoadSucceeded()),"EMBED_PROTO_DEVICE"===n.type){let e=n.data.device;p&&e?d.l7.system("set-embed-device-frame-config-data",()=>{i("deviceFrameShown",""!==e.presetIdentifier&&"PRESET"===e.type?"true":"false"),i("deviceFramePreset",e.presetIdentifier),i("deviceFrameRotation",e.rotation)}):p&&d.l7.system("set-embed-device-frame-config-data",()=>{i("deviceFrameShown","false"),i("deviceFramePreset",""),i("deviceFrameRotation","NONE")})}if("EMBED_PROTO_FILE_METADATA"===n.type&&p&&d.l7.system("embed-file-metatada",()=>{i("fileName",n.data.fileName),i("pageName",n.data.pageName),n.data.activeStartingPointNodeId&&i("activeStartingPointNodeId",n.data.activeStartingPointNodeId),n.data.startingPointsData&&i("startingPointsData",JSON.stringify(n.data.startingPointsData))}),"EMBED_PROTO_THUMBNAIL"===n.type&&n.data.thumbnail){if(!(0,m.kc)().slides_iframe_embedded_prototypes_thumbnail)return;(0,w.yx)(n.data.thumbnail,n.data.width,n.data.height,t,s)}};return window.addEventListener("message",e),()=>{window.removeEventListener("message",e)}},[t,i,E,g,p,s]);let P=(0,T.s)(t)||!u;return(0,n.jsx)(C,{...e,isActive:u,setActive:f,disablePointerEvents:!P})}function A(e){let t=(0,I.mr)(),i=(0,E.hk)(),a=e.nodeId,[o,s]=(0,r.useState)(i?.isActiveSlidesEmbeddedPrototype(a)||!1);(0,E.O5)(i,"embeddedPrototypeDataChange",r.useCallback(e=>{let t=!1;for(let i of e)if(u.dI(i.nodeId)===a){t=!0;break}s(t)},[a]));let l=(0,r.useCallback)(e=>{t.isAudienceViewPopout?(0,R.oR)({type:"LOAD_EMBEDDED_PROTOTYPE",nodeId:e}):i?.setActiveSlidesEmbeddedPrototype(e)},[i,t]);return(0,n.jsx)(C,{...e,isActive:o,setActive:l})}function C({configData:e,nodeId:t,setConfigData:i,isViewer:a,isActive:o,setActive:s,disablePointerEvents:l,invalidateThumbnail:d}){let u=(0,E.hk)(),c=M(e),m=r.useCallback(e=>{let i=document.getElementById(w.xu+t);i?.contentWindow?.postMessage({type:"PROTOTYPE_EMBED_SELECT_FLOW",data:{flowId:e}},"*")},[t]);return(0,r.useEffect)(()=>{e.activeStartingPointNodeId&&m(e.activeStartingPointNodeId)},[e.activeStartingPointNodeId,m]),(0,r.useEffect)(()=>{let e=e=>{e.origin!==location.origin||e.source&&"frameElement"in e.source&&null!=e.source.frameElement&&e.source.frameElement.id!==w.xu+t||!u||"EMBEDDED_PROTOTYPE_SESSION_ID"!==e.data.type||u.setEmbeddedPrototypeSession(t,e.data.data.sessionId)};return window.addEventListener("message",e),()=>{window.removeEventListener("message",e)}},[u,t,i,a]),(0,n.jsx)(j,{deviceFrame:c,invalidateThumbnail:d,children:(0,n.jsxs)("div",{className:g.s.hFull.wFull.$,style:{pointerEvents:l?"none":"auto"},children:[o&&e.url?(0,n.jsx)(k,{baseUrl:e.url,nodeId:t,activeStartingNodeId:e.activeStartingPointNodeId}):null,!o&&s?(0,n.jsx)(F,{isViewer:a,nodeId:t,onClick:()=>s(t)}):null]})})}let F=r.memo(({isViewer:e,nodeId:t,onClick:i})=>{let[a,l]=(0,r.useState)(null);(0,r.useEffect)(()=>{let e=!0,i=null;return(async()=>{try{let n=(0,c.UN)().get(t);if(!n||!n.fills||0===n.fills.length)return;let r=n.fills.find(e=>"IMAGE"===e.type&&e.image?.hash);if(!r||!r.image?.hash)return;let a=await (0,P.I)(r);if(!a||!e)return;let o=new Blob([a],{type:"image/png"});i=URL.createObjectURL(o),e&&l(i)}catch(e){console.error("Failed to load thumbnail for embed overlay:",e)}})(),()=>{e=!1,i&&URL.revokeObjectURL(i)}},[t]);let d=(0,m.kc)().slides_iframe_embedded_prototypes_thumbnail?O.kg:O.zP,u=a&&(0,m.kc)().slides_iframe_embedded_prototypes_thumbnail?{backgroundImage:`url(${a})`}:{};return e?(0,n.jsx)(o.E,{className:p()(d,g.s.cursorPointer.$),style:u,onClick:i,children:(0,n.jsx)(s.i,{className:O.uZ})}):(0,n.jsx)("div",{className:d,style:u,children:(0,n.jsx)(s.i,{className:p()(O.uZ,g.s.cursorPointer.$),onClick:i})})});function j({deviceFrame:e,children:t,invalidateThumbnail:i}){let r=e?.rotation===l.xOL.CCW_90?{x:e?.size.y??V.size.y,y:e?.size.x??V.size.x}:{x:e?.size.x??V.size.x,y:e?.size.y??V.size.y};return(0,n.jsx)("div",{className:O.kL,children:(0,n.jsx)(S._,{initialViewerSize:r,isDeviceFrameShown:null!=e&&e.type===l.XQq.PRESET&&""!==e.presetIdentifier,prototypeDevice:e,isInlinePreview:!1,onDeviceFrameLoaded:i,children:t})})}function k({baseUrl:e,nodeId:t,activeStartingNodeId:i}){let[a,o]=(0,r.useState)(i),s=function(e,t,i){let n;if(!e)return null;try{n=new URL(e)}catch(e){return null}let r=n.searchParams;return(0,L.e)(r,"bare-ui","1"),(0,L.e)(r,"scaling","fit-width"),(0,L.e)(r,"content-scaling","fixed"),(0,L.e)(r,"needsAlpha","1"),(0,L.e)(r,"inline-viewer","1"),(0,L.e)(r,"disable-default-keyboard-nav","1"),t&&(0,L.e)(r,"fuid",t),i&&(0,L.e)(r,"starting-point-node-id",i),n}(e,(0,x.TA)(),a),[l,d]=(0,r.useState)(!1);return(0,n.jsx)("div",{className:p()(O.pU,{[O.Kc]:l}),children:(0,n.jsx)("iframe",{id:`${w.xu}${t}`,className:p()(O.pU,{[O.Kc]:l}),onLoad:()=>{d(!0)},loading:"eager",src:s?.toString(),title:(0,y.t)("slides.flapp.embed.title"),allow:"autoplay; encrypted-media; picture-in-picture; fullscreen;",sandbox:"allow-scripts allow-same-origin allow-popups allow-top-navigation-by-user-activation",referrerPolicy:"same-origin"})})}let z=e=>{switch(e){case"NONE":default:return l.xOL.NONE;case"CCW_90":return l.xOL.CCW_90}};function U(e){return!!e.deviceFramePreset&&(void 0===e.deviceFrameShownOverride?"true"===e.deviceFrameShown:"true"===e.deviceFrameShownOverride)}function M(e){return U(e)?function(e){let t=_.hY[e.deviceFramePreset??""];return t?{type:l.XQq.PRESET,size:t.framePresetSize,presetIdentifier:t.presetIdentifier,rotation:z(e.deviceFrameRotation)}:null}(e):null}let B=b.eo[0],V={type:l.XQq.PRESET,size:B?.framePresetSize??{x:0,y:0},presetIdentifier:B?.presetIdentifier??"",rotation:l.xOL.NONE}},996981:(e,t,i)=>{i.d(t,{u:()=>D});var n=i(104076),r=i(716976),a=i(754245),o=i(276800),s=i(498349),l=i(266808),d=i(170627),u=i(980852),c=i(812714),m=i(824570),f=i(511570),p=i.n(f),E=i(232706),g=i.n(E),y=i(666875),v=i(883765);function h(e){let t=document.activeElement;if(!t)return!1;let i=e&&"current"in e?e.current:e;return!!i&&(i===t||i.contains(t))}var _=i(278491),b=i(260495),I=i(223837),x=i(643077),N=i(692042),P=i(74620),w=i(211862),S=i(331497),T=i(141330),R=i(290407),L=i(235181),O=i(871600);function D(){let e=(0,N._X)({subscribeToUpdates_expensive:!0}),t=(0,P.p8)("isReadOnly"),i=(0,P.p8)("topLevelMode")===l.lyf.HISTORY,r=(0,m.k9)(()=>e,[e]),o=document.getElementById("fullscreen-root");if(!o)return null;let s=o.querySelectorAll(".view.container-view");if(0===s.length)return null;let d=s[s.length-1];return d?(0,a.createPortal)((0,n.jsx)(A,{viewportInfo:r,isReadOnly:t||i}),d):null}function A({viewportInfo:e,shouldRenderMobileFlapps:t,isReadOnly:i}){let a=(0,r.useCallback)(e=>{let t=(0,u.UN)().get(e.nodeId),i=t?.containingSlideId,n=t?.containingCanvas;if(t&&e.position&&i)return{guid:e.nodeId,slideId:i,pageId:n,position:e.position,type:t.interactiveSlideElementType}},[]),o=(0,S.ut)(l.Ez5?.flappData().nodeIds,[]),s=(0,I.tB)("Flapps",o,a,{useFlushSyncExpensive:!0}),d=(0,S.ut)(l.Ez5?.singleSlideView().focusedNodeId,""),c=l.Ez5?.singleSlideView().isFocusedNodeViewFocused()??!1,f=(0,x.dh)(),p=(0,m.k9)(()=>Object.values(s).filter(e=>e.pageId===f&&(!c||c&&e.slideId===d)),[s,c,d,f]);return(0,R.wj)(T.JT.BOARD_TO_DECK).state===R.qy.RUNNING?null:(0,n.jsx)(n.Fragment,{children:p.map(r=>(0,n.jsx)(C,{element:r,viewportInfo:e,shouldRenderMobileFlapp:t,isReadOnly:i},r.guid))})}let C=r.memo(({element:e,viewportInfo:t,shouldRenderMobileFlapp:i,isReadOnly:a})=>{let o=(0,r.useRef)(null),d=function(e){let[t,i]=(0,r.useState)(()=>h(e));return r.useEffect(()=>{let t=()=>{i(h(e))};return document.addEventListener("focusin",t),document.addEventListener("focusout",t),t(),()=>{document.removeEventListener("focusin",t),document.removeEventListener("focusout",t)}},[e]),t}(o),m=(0,S.ut)(l.Ez5?.flappData().nodeThumbnailEditCount,new Map).get(e.guid)??0,[f,E]=(0,r.useState)(0),g=(0,r.useCallback)(()=>E(e=>e+1),[]),[y,v]=(0,r.useState)(null);if(!e||!e.position||!t)return(0,n.jsx)(n.Fragment,{});let b=(0,u.UN)().get(e.guid);if(!b)return null;let x=(0,N.Yb)(t,e.position),P="ALIGNMENT"===e.type||"POLL"===e.type||"FACEPILE"===e.type||"EMBED"===e.type&&!(0,c.kc)().slides_iframe_embedded_prototypes_thumbnail;return(0,n.jsx)(s.i,{children:(0,n.jsxs)("div",{ref:o,className:p()({[_.Qx]:d}),"data-testid":`flapp-${e.guid}`,title:b.name,style:{position:"fixed",width:e.position.width,height:e.position.height,top:t.y,left:t.x,transform:`translate(${x.x}px, ${x.y}px) ${(0,I.aZ)(e.position,t.zoomScale)}`,transformOrigin:"top left",pointerEvents:a?"none":"auto"},children:[(0,n.jsx)("div",{className:O.U,ref:v,children:(0,n.jsx)(F,{element:e,shouldRenderMobileFlapp:i,isReadOnly:a,invalidateThumbnail:g})}),y&&P&&(0,n.jsx)(j,{nodeId:e.guid,editCount:m,flappDomElement:y,isReadOnly:a,manualThumbnailInvalidationCount:f})]})})});function F({element:e,shouldRenderMobileFlapp:t,isReadOnly:i,invalidateThumbnail:r}){if(null===e.type)return null;let{EditorFlapp:a}=t?(0,L.v)(e.type):(0,L.Z)(e.type);return(0,n.jsx)(a,{nodeId:e.guid,isReadOnly:i,invalidateThumbnail:r})}function j({nodeId:e,editCount:t,manualThumbnailInvalidationCount:i,flappDomElement:a,isReadOnly:s}){let[l]=(0,y.A)(t,500),[c]=(0,y.A)(i,500),m=(0,w.tS)();return r.useEffect(()=>{var t;if(s)return;let i=(0,u.UN)().get(e);if(!i||"INTERACTIVE_SLIDE_ELEMENT"!==i.type)return;let n=o.lQ;return t=()=>{n=function(e,t,i){let n=t.interactiveSlideElementType,r=t.guid,a=!1;return g().toBlob(e,{bgcolor:"transparent"}).then(e=>e?.arrayBuffer()).then(e=>{if(!e||0===e.byteLength)throw Error("Cannot decode empty buffer");return(0,b.UD)(new Uint8Array(e),"image/png",`${r}thumbnail`)}).then(e=>{t.isAlive&&!a&&d.l7.system("generate-slide-thumbnail",()=>{0===t.fills.length?t.insertImageInFillPaint(e):t.setImageInFillPaint(e)})}).catch(e=>{(0,v.sx)("Failed to generate thumbnail in editor for slide",{error:e,nodeId:r,flappType:n,fileKey:i},{forwardToDatadog:!0})}),()=>{a=!0}}(a,i,m??"")},requestAnimationFrame(()=>requestAnimationFrame(t)),n},[s,e,l,c,a,m]),(0,n.jsx)(n.Fragment,{})}},960245:(e,t,i)=>{i.d(t,{oR:()=>r}),i(716976),i(812714),i(795033),i(776111);var n=i(457365);function r(e){if(!window.opener){console.error("No parent window found! Did you open this window manually?");return}n.L?.addAction("postMessageToPresenterView",{type:e.type}),window.opener.postMessage(e,"*")}i(367793),i(997996);var a=(e=>(e[e.LOADING=1]="LOADING",e[e.PRESENTER_VIEW_CAN_DRIVE=2]="PRESENTER_VIEW_CAN_DRIVE",e[e.POPOUT_VIEWER_CAN_DRIVE=3]="POPOUT_VIEWER_CAN_DRIVE",e[e.PRESENTER_VIEW_SPOTLIGHT=4]="PRESENTER_VIEW_SPOTLIGHT",e))(a||{})}}]);

//# debugId=876ee152-a1b0-50f1-abc5-3ca42691dd5c

//# sourceMappingURL=https://admin.figma.com/admin/webpack-artifacts/fcc1a1091c2aaa9d82b629815d3a14b20f85f845/5913-f161c17f4e1174f7.min.js.map