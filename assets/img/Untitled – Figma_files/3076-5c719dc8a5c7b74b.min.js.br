"use strict";
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="d3ceaa90-116f-5c29-a9eb-010a8af53c6e")}catch(e){}}();
(globalThis.webpackChunk_figma_web_bundler=globalThis.webpackChunk_figma_web_bundler||[]).push([[3076],{697915:(e,t,l)=>{l.d(t,{Kc:()=>n,kL:()=>a,kg:()=>o,pU:()=>s,uZ:()=>i,zP:()=>r});let a="embed--container--KRhyf",s="embed--iframe--6z9Fq",n="embed--loaded--LStWq",i="embed--playIcon--8LC5v",r="embed--inactiveOverlayBackdrop__OLD--8aXxQ",o="embed--inactiveOverlayBackdrop--DDuMq"},871600:(e,t,l)=>{l.d(t,{U:()=>a});let a="flapp_overlay--elementContainer--b1Khv"},961501:(e,t,l)=>{l.d(t,{e:()=>a});function a(e,t,l){""!==l&&(e.delete(t),"starting-point-node-id"===t&&(e.delete("node-id"),e.append("node-id",l)),e.append(t,l))}},235181:(e,t,l)=>{l.d(t,{Z:()=>e2,v:()=>e5});var a=l(104076),s=l(716976),n=l(980852),i=l(641518),r=l(835307);let o=(0,s.createContext)(null);function p(){let e=(0,s.useContext)(o);if(!e)throw Error("useFlappConfigContext must be used within a FlappConfigProvider");return e}let c=(0,s.createContext)(null);function d(){let e=(0,s.useContext)(c);if(!e)throw Error("useFlappParticipantData must be used within a FlappParticipantDataProvider");return e}function u(e){return function({nodeId:t,isReadOnly:l,invalidateThumbnail:i}){let p=(0,s.useCallback)((e,l)=>{let a=(0,n.UN)().get(t);a&&a.setInteractiveSlideConfigData(e,l)},[t]),d=(0,s.useCallback)(e=>{let l=(0,n.UN)().get(t);l&&l.deleteInteractiveSlideConfigData(e)},[t]),u=(0,s.useCallback)((e,l)=>{let a=(0,n.UN)().get(t);a&&a.setInteractiveSlideParticipantData(e,l)},[t]),m=(0,s.useCallback)(()=>{let e=(0,n.UN)().get(t);e&&e.resetInteractiveSlideParticipantData()},[t]),f=(0,r.Fk)((e,t)=>{let l=e.get(t);return l?l.interactiveSlideConfigData:null},t),h=(0,r.Fk)((e,t)=>{let l=e.get(t);return l?l.interactiveSlideParticipantData:null},t);return f&&h?(0,a.jsx)(o.Provider,{value:{configData:f,isViewer:!1,isPresenter:!1,nodeId:t,isReadOnly:l,invalidateThumbnail:i,setConfigData:p,deleteConfigData:d},children:(0,a.jsx)(c.Provider,{value:{participantData:h,setParticipantData:u,resetParticipantData:m},children:(0,a.jsx)(e,{configData:f,deleteConfigData:d,invalidateThumbnail:i,isPresenter:!1,isReadOnly:l,isViewer:!1,nodeId:t,participantData:h,recordingKey:`flapp.${t}`,resetParticipantData:m,setConfigData:p,setParticipantData:u})})}):null}}function m(e){return function({viewer:t,nodeId:l}){let n=(0,r.x3)((e,t)=>{let l=e.getPrototypeNode(t);return l?e.nodeInteractiveSlideConfigData(l):null},l),i=(0,r.x3)((e,t)=>{let l=e.getPrototypeNode(t);return l?e.nodeInteractiveSlideParticipantData(l):null},l),p=(0,s.useCallback)((e,a)=>{t.setInteractiveSlideConfigData(l,e,a)},[t,l]),d=(0,s.useCallback)((e,a)=>{t.setInteractiveSlideParticipantData(l,e,a)},[t,l]);if(!n||!i)return null;let u=t.isPresenterSession();return(0,a.jsx)(o.Provider,{value:{configData:n,isViewer:!0,isPresenter:u,nodeId:l,isReadOnly:!1,invalidateThumbnail:void 0,setConfigData:p,deleteConfigData:void 0},children:(0,a.jsx)(c.Provider,{value:{participantData:i,setParticipantData:d,resetParticipantData:void 0},children:(0,a.jsx)(e,{configData:n,participantData:i,setConfigData:p,setParticipantData:d,recordingKey:`flapp.${l}`,isViewer:!0,isPresenter:u,nodeId:l,viewer:t})})})}}function f(e,t){return(t?i.Pt("flapp",e,t):i.Pt("flapp",e))||`flapp.${e}`}var h=l(684742),g=l(997811),x=l(20165),v=l(790009),_=l(170627),b=l(511570),j=l.n(b),N=l(697157),y=l(652539),w=l(236631),C=l(192075),I=l(278491),P=l(117313),S=l(592726),k=l(894210),U=l(218587),F=l(143480);let E="alignment_scale--prompt--D-cNA";var D=l(807151);function T({recordingKey:e,prompt:t,setPrompt:l}){return(0,a.jsx)(N.L,{className:j()(E,I.Qx,I.Uu),type:"text",placeholder:(0,C.t)("slides.flapp.alignment.prompt_placeholder"),value:t,onChange:e=>{l(e.target.value)},onPaste:e=>{l(e.clipboardData.getData("text"))},recordingKey:e})}function L({prompt:e}){return(0,a.jsx)("p",{className:E,children:e||(0,C.t)("slides.flapp.alignment.prompt_placeholder")})}function B({promptElement:e,onVoteRequest:t}){var l;let{configData:n,setConfigData:i,nodeId:r}=p(),{participantData:o}=d(),c=(0,S.iZ)(),u=t&&c?(e,l)=>{t({name:c.name,userId:c.id,thumbnailUrl:c.img_url,alignmentXOffsetPercentage:e,alignmentYOffsetPercentage:l,timestamp:Date.now()})}:void 0,[m,h]=(l=c?.id,(0,s.useMemo)(()=>{let e;return o?[Object.values(o).reduce((t,a)=>{try{let s=JSON.parse(a);s.userId===l&&(e=s),t.push(s)}catch(e){}return t},[]).sort((e,t)=>e.timestamp-t.timestamp),e]:[[],void 0]},[o,l])),g="true"===n.resultsShown,x=_.nc.user("slides-toggle-alignment-scale-results-shown",()=>{i("resultsShown",(!g).toString())}),b=(0,F.aF)(n);return(0,a.jsx)(v.J,{mode:b.preferredTokenTheme,children:(0,a.jsxs)("div",{className:j()(w.s.wFull.flex.flexColumn.justifyCenter.itemsCenter.$,"alignment_scale--alignmentScaleThemeWrapper--1VvHW"),"data-transparency-mode":b.transparentMode,children:[(0,a.jsxs)("div",{className:"alignment_scale--mainContainer--aIN2p",children:[(0,a.jsx)(O,{prompt:e,allVoteData:m,currentUserVoteData:h}),(0,a.jsx)(V,{resultsShown:g,alignmentVoteData:m,onScaleClick:u}),(0,a.jsx)(A,{})]}),(0,a.jsx)(Q,{recordingKey:f(r,"slides-alignment-scale-reveal-results"),resultsShown:g,onToggle:x})]})})}function O({prompt:e,allVoteData:t,currentUserVoteData:l}){return(0,a.jsxs)("div",{className:"alignment_scale--headerContainer--l688h",children:[(0,a.jsx)("div",{className:"alignment_scale--promptContainer--hRH11 text--fontPos20--Bcz97 text--_fontBase--QdLsd",children:e}),(0,a.jsx)(M,{allVoteData:t,currentUserVoteData:l})]})}function V({resultsShown:e,alignmentVoteData:t,onScaleClick:l}){let n=(0,s.useRef)(null),i=l?e=>{let t=e.currentTarget.getBoundingClientRect(),a=e.clientX-t.left,s=e.clientY-t.top;l(a/t.width,s/t.height)}:void 0;return(0,a.jsxs)("div",{className:"alignment_scale--scaleContainerPseudoBorder--Jj6DE",children:[(0,a.jsx)("div",{className:"alignment_scale--scaleContainerSolidBackground--s4pRF"}),(0,a.jsxs)(h.E,{"aria-label":(0,C.t)("slides.flapp.alignment.prompt_placeholder"),className:j()("alignment_scale--scaleContainer--gmwd3",l?w.s.cursorPointer.$:""),ref:n,onClick:i,children:[(0,a.jsx)("div",{className:"alignment_scale--scaleLine--uHC-I"}),(0,a.jsxs)("div",{className:"alignment_scale--scaleMarkerContainer--X5x-j",children:[(0,a.jsx)("div",{className:"alignment_scale--scaleMarker0--QIykm alignment_scale--_scaleMarker---mTsV"}),(0,a.jsx)("div",{className:"alignment_scale--scaleMarker25--3Xe8a alignment_scale--_scaleMarker---mTsV"}),(0,a.jsx)("div",{className:"alignment_scale--scaleMarker50--L4exg alignment_scale--_scaleMarker---mTsV"}),(0,a.jsx)("div",{className:"alignment_scale--scaleMarker75--Urto8 alignment_scale--_scaleMarker---mTsV"}),(0,a.jsx)("div",{className:"alignment_scale--scaleMarker100--AHcJW alignment_scale--_scaleMarker---mTsV"})]}),e&&n.current?t.map(e=>(0,a.jsx)("img",{src:(0,P.p)(e.thumbnailUrl),alt:e.name,className:"alignment_scale--alignmentScaleVote--zkhC9",style:{left:`${Math.floor(100*e.alignmentXOffsetPercentage)}%`,top:`${Math.floor(100*e.alignmentYOffsetPercentage)}%`,transform:"translate(-15px, -15px)"}},e.userId)):null]})]})}function A(){return(0,a.jsxs)("div",{className:"alignment_scale--scaleLabelContainer--HF5-I",children:[(0,a.jsx)("div",{className:"alignment_scale--stronglyDisagreeLabel--1Yzc0 alignment_scale--_labelBase--enfVZ text--fontPos14--OL9Hp text--_fontBase--QdLsd",children:(0,C.tx)("slides.flapp.alignment.strongly_disagree_label")}),(0,a.jsx)("div",{className:"alignment_scale--neutralLabel--qqm5f alignment_scale--_labelBase--enfVZ text--fontPos14--OL9Hp text--_fontBase--QdLsd",children:(0,C.tx)("slides.flapp.alignment.neutral_label")}),(0,a.jsx)("div",{className:"alignment_scale--stronglyAgreeLabel--Dhs7h alignment_scale--_labelBase--enfVZ text--fontPos14--OL9Hp text--_fontBase--QdLsd",children:(0,C.tx)("slides.flapp.alignment.strongly_agree_label")})]})}function M({allVoteData:e,currentUserVoteData:t}){let l,s=e;return t&&(s=[t,...e.filter(e=>e.userId!==t.userId)]),l=0===s.length?(0,C.t)("slides.flapp.results.no_votes_yet"):1===s.length?t?(0,C.t)("slides.flapp.results.single_self_vote"):(0,C.t)("slides.flapp.results.single_other_vote",{person:s[0].name}):t?(0,C.t)("slides.flapp.results.multiple_votes_including_user",{totalVotes:s.length-1}):(0,C.t)("slides.flapp.results.multiple_other_votes",{totalVotes:s.length}),(0,a.jsxs)("div",{className:"alignment_scale--voteDisplayContainer--upm2F text--fontPos13--xW8hS text--_fontBase--QdLsd",children:[(0,a.jsx)("p",{className:"alignment_scale--description--kxZH3",children:l}),(0,a.jsx)($,{allVoteData:s,maxToShow:2})]})}function $({allVoteData:e,maxToShow:t}){let l=e.length;e.length>t+1&&(l=t);let s=e.slice(0,l),n=e.slice(l),i=n.map(e=>({id:e.userId,handle:e.name,img_url:e.thumbnailUrl}));return(0,a.jsxs)("div",{className:"alignment_scale--voteProfilesContainer--wbH0G",children:[s.map(e=>(0,a.jsx)("img",{className:"alignment_scale--voteProfile--Um0e6",alt:e.name,src:(0,P.p)(e.thumbnailUrl),"data-tooltip-type":k.Ib.TEXT,"data-tooltip":e.name},e.userId)),n.length>0?(0,a.jsx)("div",{className:"alignment_scale--overflowVote--KIoww text--fontPos11--2LvXf text--_fontBase--QdLsd","data-tooltip-type":k.Ib.SPECIAL,"data-tooltip":U.c,"data-tooltip-overflow-user-data":JSON.stringify(i),children:`+${n.length}`}):null]})}function Q({recordingKey:e,resultsShown:t,onToggle:l}){return(0,a.jsxs)("div",{className:"alignment_scale--resultToggleContainer--euX1O",children:[(0,a.jsx)(y.B,{className:"alignment_scale--resultToggleContainerSvg--PFGWI",svg:D.A}),(0,a.jsxs)(h.E,{className:"alignment_scale--resultToggle--alry6 text--fontPos13--xW8hS text--_fontBase--QdLsd",onClick:l,recordingKey:e,children:[t?(0,a.jsx)(g.l,{}):(0,a.jsx)(x.f,{}),(0,a.jsx)("p",{children:t?(0,C.t)("slides.flapp.results.results_shown"):(0,C.t)("slides.flapp.results.results_hidden")})]})]})}let z={EditorFlapp:u(function(){let{configData:e,setConfigData:t,nodeId:l}=p(),s=(0,a.jsx)(T,{recordingKey:f(l,"slides-alignment-scale-prompt-input"),prompt:e.prompt,setPrompt:e=>{_.l7.user("slides-update-alignment-scale-prompt",()=>{t("prompt",e)})}});return(0,a.jsx)(B,{promptElement:s})}),ViewerFlapp:m(function(){let{configData:e}=p(),{setParticipantData:t}=d();return(0,a.jsx)(B,{promptElement:(0,a.jsx)(L,{prompt:e.prompt}),onVoteRequest:e=>{_.l7.user("slides-update-alignment-scale-vote",()=>{t(e.userId,JSON.stringify(e))})}})})};var K=l(99876),W=l(219199),R=l(681398),q=l(367793);function H({configData:e,nodeId:t}){let l=(0,q.hk)(),s=(0,K.gD)(e);return(0,a.jsx)(K.wL,{deviceFrame:s,children:(0,a.jsx)(K.lu,{isViewer:!0,nodeId:t,onClick:()=>{e.url&&l&&W.Ay.redirect(e.url,R.uG?void 0:"_blank")}})})}let Y={EditorFlapp:u(K.DR),ViewerFlapp:m(K.E$)},J={EditorFlapp:u(H),ViewerFlapp:m(H)};var X=l(971080),Z=l(816565);let G="facepile--facepileStamp---gzFz facepile--_fixedStampBase--icx6v facepile--_stampBase--eCNDB";var ee=l(363895);function et({prompt:e,setPrompt:t}){let{nodeId:l}=p();return(0,a.jsx)(X.Y,{id:f(l,"facepile-prompt-input"),"aria-label":(0,C.t)("slides.flapp.facepile.input_label"),className:j()(I.Qx,I.Uu),type:"text",placeholder:(0,C.t)("slides.flapp.facepile.prompt_placeholder"),value:e,onChange:e=>{t(e)},htmlAttributes:{onPaste:e=>{t(e.clipboardData.getData("text"))}},recordingKey:f(l,"facepile-prompt-input")})}function el({prompt:e}){return(0,a.jsx)("h1",{children:e||(0,C.t)("slides.flapp.facepile.prompt_placeholder")})}function ea({promptElement:e,onToggleStampRequest:t}){let{configData:l,isViewer:s}=p(),{participantData:n}=d(),i=(0,S.iZ)(),r=function(e,t){if(!e||0===Object.keys(e).length)return{stamps:[],currentUserStamped:!1};let l=!1;return{stamps:Object.values(e).reduce((e,a)=>{try{let s=JSON.parse(a);s.userId===t&&(l=!0),e.push(s)}catch(e){}return e},[]).sort((e,l)=>e.userId===t?-1:l.userId===t?1:e.timestamp-l.timestamp),currentUserStamped:l}}(n,i?.id),o=function(e,t){let{stamps:l,currentUserStamped:a}=e;return 0===l.length?t?(0,C.t)("slides.flapp.facepile.description_click_to_stamp"):(0,C.t)("slides.flapp.results.no_stamps_yet"):1===l.length?a?(0,C.t)("slides.flapp.results.single_self_stamp"):(0,C.t)("slides.flapp.results.single_other_stamp",{person:l[0].name}):a?(0,C.t)("slides.flapp.results.multiple_stamps_including_user",{totalStamps:l.length-1}):(0,C.t)("slides.flapp.results.multiple_other_stamps",{totalStamps:l.length})}(r,s),c=(0,F.aF)(l);return(0,a.jsx)(v.J,{mode:c.preferredTokenTheme,children:(0,a.jsxs)("div",{className:j()("facepile--container--k1p6f","facepile--facepileThemeWrapper--dG-S8"),"data-transparent-mode":c.transparentMode,children:[(0,a.jsx)("div",{className:"facepile--prompt--6Xfxz text--fontPos24--YppUD text--_fontBase--QdLsd",children:e}),(0,a.jsx)(es,{isStampingEnabled:s,stampsWithMetadata:r,maxStampsToShow:3,currentUser:i,onToggleStampRequest:t}),(0,a.jsx)("p",{className:"facepile--description--SesIh text--fontPos20--Bcz97 text--_fontBase--QdLsd",children:o})]})})}function es({isStampingEnabled:e,stampsWithMetadata:t,maxStampsToShow:l,currentUser:s,onToggleStampRequest:n}){let{stamps:i,currentUserStamped:r}=t,o=i.length;i.length>l+1&&(o=l);let p=i.slice(0,o),c=i.slice(o),d=e&&s&&!r;return(0,a.jsxs)("div",{className:w.s.flex.gap12.pt36.pb24.itemsCenter.alignCenter.$,children:[p.map(e=>{let t=n&&s&&e.userId===s.id,l={text:e.name,subtext:t?(0,C.t)("slides.flapp.facepile.tooltip.click_to_remove"):void 0};return(0,a.jsx)(en,{stamp:e,tooltipToShow:l,onClick:()=>{t&&n(s.id,void 0)}},`${e.userId}-stamp`)}),c.length>0?(0,a.jsx)(ei,{overflowStamps:c}):null,(0,a.jsx)(er,{previewStamp:d?eo(s):void 0,onClick:()=>{d&&n&&n(s.id,eo(s))},disabled:!d})]})}function en({stamp:e,tooltipToShow:t,onClick:l}){return(0,a.jsx)(h.E,{onClick:l,"aria-label":t?.subtext?(0,C.t)("slides.flapp.facepile.stamp_with_action",{name:e.name,action:t.subtext}):(0,C.t)("slides.flapp.facepile.stamp_by_user",{name:e.name}),htmlAttributes:{"data-tooltip-type":k.Ib.TEXT,"data-tooltip":t?.text,"data-tooltip-subtext":t?.subtext,"data-tooltip-offset-y":8},children:(0,a.jsx)(Z.oW,{className:G,src:(0,P.p)(e.thumbnailUrl),alt:e.name,draggable:!1})})}function ei({overflowStamps:e}){let t=e.map(e=>({id:e.userId,handle:e.name,img_url:e.thumbnailUrl}));return(0,a.jsx)("div",{className:"facepile--overflowStamp--j3fn3 text--fontPos22--4H4Fc text--_fontBase--QdLsd facepile--_stampBase--eCNDB","data-tooltip-type":k.Ib.SPECIAL,"data-tooltip":U.c,"data-tooltip-overflow-user-data":JSON.stringify(t),"data-tooltip-offset-y":8,children:(0,a.jsx)("p",{children:`+${e.length}`})})}function er({previewStamp:e,onClick:t,disabled:l}){return(0,a.jsxs)(h.E,{className:j()("facepile--emptyStampContainer--dAbYv facepile--_fixedStampBase--icx6v facepile--_stampBase--eCNDB",e?"facepile--displayPreviewOnHover--qPtfX":""),onClick:t,"aria-label":(0,C.t)("slides.flapp.facepile.add_stamp_button"),disabled:l,children:[(0,a.jsx)(y.B,{className:"facepile--emptyStamp--KiqZH",svg:ee.A}),e?(0,a.jsx)("div",{className:"facepile--previewStamp--TbFAQ",children:(0,a.jsx)(Z.oW,{className:G,src:(0,P.p)(e.thumbnailUrl),alt:e.name,draggable:!1})}):null]})}function eo(e){return{name:e.name,userId:e.id,thumbnailUrl:e.img_url,timestamp:Date.now()}}let ep={EditorFlapp:u(function(){let{configData:e,setConfigData:t}=p(),l=(0,a.jsx)(et,{prompt:e.prompt,setPrompt:e=>{_.l7.user("slides-update-facepile-question",()=>{t("prompt",e)})}});return(0,a.jsx)(ea,{promptElement:l})}),ViewerFlapp:m(function(){let{configData:e}=p(),{setParticipantData:t}=d();return(0,a.jsx)(ea,{promptElement:(0,a.jsx)(el,{prompt:e.prompt}),onToggleStampRequest:(e,l)=>{_.l7.user("slides-add-user-facepile-stamp",()=>{t(e,JSON.stringify(l))})}})})};var ec=l(293422),ed=l(236901),eu=l(699474),em=l(404660),ef=l(20226),eh=l(903927),eg=l(954068),ex=l(180),ev=l(256384);let e_="slides-update-poll-question",eb="slides-update-poll-option",ej="slides-update-poll-options",eN="poll--question--F1M7f text--fontPos30--N-YT7 text--_fontBase--QdLsd",ey="poll--optionContainer--ds9OS",ew="poll--newOption--H35l3",eC="poll--optionInner--WmnWP",eI="poll--optionFill--birzf",eP="poll--winning--ZgYy7",eS="poll--optionContent--XecHh text--fontPos20--Bcz97 text--_fontBase--QdLsd",ek="poll--optionContentText---N25s",eU="poll--optionMetadata--IbCVD";function eF({option:e,votes:t,isWinningVote:l,isUserVote:s,percentage:n,resultsShown:i,recordingKey:r,optionIndex:o}){let{setParticipantData:p}=d(),c=(0,eh.wA)(),u=(0,S.iZ)(),m=_.nc.system("slides-update-poll-votes",e=>{if(!u){c(ev.s.error((0,C.t)("slides.flapp.poll.vote_failure")));return}let t={userId:u.id,name:u.name,thumbnailUrl:u.img_url,timestamp:Date.now(),selectedOption:e};p(t.userId,JSON.stringify(t))}),f=t.map(e=>({id:e.userId,handle:e.name,img_url:e.thumbnailUrl}));return(0,a.jsx)("div",{className:ey,children:(0,a.jsxs)(h.E,{className:j()(eC,"poll--hoverable--uHwKu"),recordingKey:r,onClick:()=>{m(o)},"aria-label":(0,C.t)("slides.flapp.poll.vote_for_option",{option:e}),htmlAttributes:{"data-tooltip-type":k.Ib.SPECIAL,"data-tooltip":i&&f.length>0?U.c:void 0,"data-tooltip-overflow-user-data":JSON.stringify(f),"data-tooltip-offset-y":8},children:[i&&(0,a.jsx)("div",{className:j()(eI,l?eP:""),style:{width:`${n}%`}}),(0,a.jsxs)("div",{className:eS,children:[(0,a.jsx)("div",{className:ek,children:e}),(0,a.jsxs)("div",{className:eU,children:[s&&(0,a.jsx)(eg.g,{}),i&&(0,a.jsx)("span",{children:`${n}%`})]})]})]})})}function eE({option:e,votes:t,isWinningVote:l,isUserVote:s,percentage:n,resultsShown:i,recordingKey:r,optionIndex:o,inputRef:c,setPollUpdated:d}){let{configData:u,setConfigData:m,deleteConfigData:f}=p(),h=eT(u),g=e=>`option${e}`,x=_.nc.user(eb,e=>{m(g(o),e)}),v=_.nc.user(eb,e=>{m(g(o),e.clipboardData.getData("text"))}),b=_.nc.user(ej,e=>{o===h.length-1&&("Enter"===e.key&&h.length<6?(m(g(o+1),""),d(!0)):h.length>2&&0===h[o].length&&("Backspace"===e.key||"Delete"===e.key)&&(f&&(f(g(o)),e.preventDefault()),d(!0)))}),N=t.map(e=>({id:e.userId,handle:e.name,img_url:e.thumbnailUrl}));return(0,a.jsx)("div",{className:ey,children:(0,a.jsxs)("div",{className:eC,"data-tooltip-type":k.Ib.SPECIAL,"data-tooltip":i&&N.length>0?U.c:void 0,"data-tooltip-overflow-user-data":JSON.stringify(N),"data-tooltip-offset-y":8,children:[i&&(0,a.jsx)("div",{className:j()(eI,l?eP:""),style:{width:`${n}%`}}),(0,a.jsxs)("div",{className:eS,children:[(0,a.jsx)(X.Y,{id:r,className:j()(ek,I.Qx,I.Uu),value:e,placeholder:(0,C.t)("slides.flapp.poll.option_placeholder"),onChange:x,htmlAttributes:{onPaste:v,onKeyDownCapture:b},ref:c,recordingKey:r}),(0,a.jsxs)("div",{className:eU,children:[s&&(0,a.jsx)(eg.g,{}),i&&(0,a.jsx)("span",{children:`${n}%`})]})]})]})})}function eD({recordingKey:e,onClick:t}){let{isViewer:l}=p();return l||!t?(0,a.jsx)("div",{"aria-hidden":"true",className:j()(ey,ew,"poll--newOptionInvisible--XwjKd")}):(0,a.jsx)("div",{className:ey,children:(0,a.jsx)(h.E,{className:ew,onClick:t,recordingKey:i.Pt(e,"addOption"),"aria-label":(0,C.t)("slides.flapp.poll.add_option"),children:(0,a.jsx)(ex.$,{})})})}function eT(e){let t=[];for(let l=0;l<6;l++){let a=e[`option${l}`];void 0!==a&&t.push(a)}return t}function eL({resultsShown:e,setResultsShown:t}){let l=e?(0,C.t)("slides.flapp.results.results_shown"):(0,C.t)("slides.flapp.results.results_hidden");return(0,a.jsx)(ec.WW,{"aria-label":l,htmlAttributes:{"data-tooltip":l,"data-tooltip-type":k.Ib.TEXT},onClick:()=>t(!e),recordingKey:"resultsButton",variant:"secondary",iconPrefix:e?(0,a.jsx)(ed.T,{}):(0,a.jsx)(eu.A,{}),children:l})}function eB({totalVotes:e,hasUserVote:t,firstVoteByTimestamp:l}){let s;return s=0===e?(0,C.t)("slides.flapp.results.no_votes_yet"):1===e?t?(0,C.t)("slides.flapp.results.single_self_vote"):l?(0,C.t)("slides.flapp.results.single_other_vote",{person:l.name}):(0,C.t)("slides.flapp.results.multiple_other_votes",{totalVotes:e}):t?(0,C.t)("slides.flapp.results.multiple_votes_including_user",{totalVotes:e-1}):(0,C.t)("slides.flapp.results.multiple_other_votes",{totalVotes:e}),(0,a.jsx)("p",{children:s})}function eO({preferredTheme:e,transparencyMode:t}){let{configData:l,isViewer:i,nodeId:r,setConfigData:o}=p(),c=(0,em.US)(ef.iA,{nodeId:r}),{participantData:u}=d(),m=(0,S.iZ)(),h=eT(l),g="true"===l.resultsShown,[x,b]=s.useState(!1),N=s.useMemo(()=>[],[]);(0,s.useEffect)(()=>{if(x&&N.length>0){let e=N.slice(-1)[0];e&&e.current&&e.current.focus()}},[h.length,N,x]);let y=(0,s.useRef)(null);(0,s.useEffect)(()=>{if(i)return;let e=y.current,t=new ResizeObserver(e=>{let t=(0,n.UN)().get(r);if(t)for(let l of e)_.l7.system("slides-poll-auto-resize",()=>{let e=getComputedStyle(l.target),a=parseFloat(e.paddingTop),s=a+parseFloat(e.paddingBottom)+parseFloat(e.borderTopWidth)+parseFloat(e.borderBottomWidth),n=l.contentRect.height+s;t&&n>t.size.y&&(t.size={x:t.size.x,y:n})})});return e&&t.observe(e),()=>{e&&t.unobserve(e)}},[r,i]);let w=e=>`option${e}`,C=_.nc.user("slides-update-poll-results-visibility",e=>{o("resultsShown",e?"true":"false")}),{groupedVotes:I,totalVotes:P,votePercentages:k,winningVoteIndices:U,userVoteIndex:F,firstVoteByTimestamp:E}=function(e,t,l){let a;let s=eT(t),n=-1,i=Object.values(l).reduce((t,l)=>{try{let s=JSON.parse(l);s.userId===e&&(n=s.selectedOption),a=a&&a.timestamp>s.timestamp||!a?s:a,t.push(s)}catch(e){}return t},[]).sort((e,t)=>e.timestamp-t.timestamp),r=0,o=s.map((e,t)=>{let l=i.filter(e=>e.selectedOption===t);return r=l.length>r?l.length:r,l}),p=i.length,c=s.map((e,t)=>Math.round(100*(o[t].length/p||0))),d=o.reduce((e,t,l)=>t.length===r&&0!==t.length?[...e,l]:e,[]);return{groupedVotes:o,votePercentages:c,totalVotes:p,winningVoteIndices:d,userVoteIndex:n,firstVoteByTimestamp:a}}(m?.id,l,u);return(0,a.jsx)(v.J,{mode:e,children:(0,a.jsxs)("div",{className:j()("poll--pollThemeWrapper--z0UVm","poll--container--UKRlY"),"data-transparency-mode":t,ref:y,children:[(0,a.jsx)(eV,{ref:c}),h.map((e,t)=>{let l=s.createRef();N.push(l);let n=-1!==U.indexOf(t);return i?(0,a.jsx)(eF,{option:e,votes:I[t]??[],isWinningVote:n,isUserVote:t===F,percentage:k[t]??0,resultsShown:g,recordingKey:f(r,`option${t}`),optionIndex:t},t):(0,a.jsx)(eE,{inputRef:l,isUserVote:t===F,isWinningVote:n,option:e,optionIndex:t,percentage:k[t]??0,recordingKey:f(r,`optionInput${t}`),resultsShown:g,setPollUpdated:b,votes:I[t]??[]},t)}),(0,a.jsx)(eD,{onClick:h.length>=6?void 0:_.nc.user(ej,()=>{o(w(h.length),""),b(!0)}),recordingKey:f(r)}),(0,a.jsxs)("div",{className:"poll--resultContainer--cQQVk text--fontPos20--Bcz97 text--_fontBase--QdLsd",children:[(0,a.jsx)(eB,{totalVotes:P,hasUserVote:F>=0,firstVoteByTimestamp:E}),(0,a.jsx)(eL,{resultsShown:g,setResultsShown:e=>C(e)})]})]})})}let eV=(0,s.forwardRef)((e,t)=>{let{configData:l,isViewer:s,setConfigData:n,nodeId:i}=p(),r=l.question||"",o=_.nc.user(e_,e=>{n("question",e)}),c=_.nc.user(e_,e=>{n("question",e.clipboardData.getData("text"))});return s?(0,a.jsx)("h1",{className:eN,children:r}):(0,a.jsx)(X.Y,{ref:t,id:f(i,"questionInput"),className:j()(eN,I.Qx,I.Uu),value:r,placeholder:(0,C.t)("slides.flapp.poll.question_placeholder"),onChange:o,htmlAttributes:{onPaste:e=>c(e)},recordingKey:f(i,"questionInput")})});function eA(){let{configData:e}=p(),t=(0,F.aF)(e);return(0,a.jsx)(eO,{preferredTheme:t.preferredTokenTheme,transparencyMode:t.transparentMode})}let eM={EditorFlapp:u(eA),ViewerFlapp:m(eA)};var e$=l(638004),eQ=l(419278),ez=l(246144),eK=l(679359),eW=l(106170),eR=l(260495),eq=l(52886);async function eH(e){if(!e)return;let t=(0,eQ.KJ)(e.trim());if(t)try{let l=(await eq.E.getLinkMetadata({text:t.isFromIFrame?e:t.url,useEmbedsAllowList:"true",useLinkPreviewsV2:"true"})).data.meta;if(!l||"embed"!==l.type)return;return{srcUrl:l.srcUrl.replace("&autoplay=1","").replace("&auto_play=1","")+"&enablejsapi=1",url:decodeURIComponent(l.url||""),height:800*(l.height||450)/(l.width||800),width:800,title:decodeURIComponent(l.title||"YouTube"),thumbnailImage:l.thumbnailImage,thumbnailUrl:l.thumbnailUrl}}catch(e){(0,ez.x1)(e$.e.SLIDES,"Failed to get youtube embed",e)}}function eY({disablePointerEvents:e,onIframeLoad:t}){let{configData:l}=p();return(0,a.jsxs)("div",{className:w.s.wFull.hFull.$,children:[l.srcUrl&&l.title?(0,a.jsx)("iframe",{src:l.srcUrl,className:w.s.wFull.hFull.$,onLoad:e=>t?.(e.target),title:l.title,allowFullScreen:!1,allow:"autoplay"}):null,e?(0,a.jsx)("div",{className:w.s.wFull.hFull.absolute.top0.left0.$}):null]})}function eJ(){let{configData:e}=p();return e.url&&e.title?(0,a.jsx)("a",{className:w.s.wFull.hFull.cursorPointer.relative.$,style:{pointerEvents:"auto"},href:e.url,target:"_blank",rel:"noopener noreferrer",title:e.title,children:e.thumbnailUrl?(0,a.jsx)("img",{src:e.thumbnailUrl,alt:e.title,className:w.s.wFull.hFull.$,style:{objectFit:"cover"}}):null}):null}let eX={EditorFlapp:u(function(){let{configData:e,nodeId:t,setConfigData:l,isReadOnly:i}=p();return((0,s.useEffect)(()=>{i||e.srcUrl||eH(e.url).then(async e=>{if(!e)return;let a=(0,n.UN)().get(t);if(a&&(_.l7.system("initializing-youtube",()=>{(0,eW.r)(()=>{a.resizeWithConstraints(e.width,e.height),a.proportionsConstrained=!0;let t=a.relativeTransform;t.m02=a.relativeTransform.m02-e.width/2,t.m12=a.relativeTransform.m12-e.height/2,a.relativeTransform=t,l("srcUrl",e.srcUrl),l("title",e.title),e.url&&l("url",e.url),e.thumbnailUrl&&l("thumbnailUrl",e.thumbnailUrl)})}),e.thumbnailImage))try{let t=new Uint8Array(e.thumbnailImage.data),l=await (0,eR.UD)(t,"image/png",e.title);_.l7.system("initializing-youtube-thumbnail",()=>{(0,eW.r)(()=>{a.insertImageInFillPaint(l)})})}catch(e){}})},[e.url,e.srcUrl,t,l,i]),e.url&&!e.srcUrl)?(0,a.jsx)("div",{className:w.s.absolute.w48.h48.$,children:(0,a.jsx)(eK.kt,{size:"custom",className:w.s.w48.h48.$})}):(0,a.jsx)(eY,{disablePointerEvents:!0})}),ViewerFlapp:m(function(){let{nodeId:e,viewer:t}=p(),l=(0,s.useCallback)(l=>{t&&t.associateYoutubeWithNode(e,l)},[t,e]);return(0,s.useEffect)(()=>()=>{t&&t.disassociateYoutubeWithNode(e)},[t,e]),(0,a.jsx)(eY,{onIframeLoad:l})})},eZ={EditorFlapp:u(eJ),ViewerFlapp:m(eJ)},eG={EMBED:Y,POLL:eM,FACEPILE:ep,ALIGNMENT:z,YOUTUBE:eX},e0={EMBED:J,POLL:eM,FACEPILE:ep,ALIGNMENT:z,YOUTUBE:eZ},e1={EditorFlapp:()=>null,ViewerFlapp:()=>null};function e2(e){return null===e?e1:eG[e]||e1}function e5(e){return null===e?e1:e0[e]||e1}},719625:(e,t,l)=>{l.d(t,{_:()=>c,s:()=>o});var a=l(716976),s=l(266808),n=l(795033),i=l(74620);let r=(0,l(140948).bt)(e=>e.mirror.appModel.activeUserAction);function o(e){let t=(0,i.KH)(),l=t&&1===Object.keys(t).length&&t[e],a=(0,n.md)(r);return l&&a===s.QOV.DEFAULT}let p=(0,n.eU)(null);function c(e){let[t,l]=(0,n.fp)(p);return{isEmbedActive:t===e,setActiveEmbed:a.useCallback(()=>{l(e)},[e,l])}}},707779:(e,t,l)=>{l.d(t,{i:()=>n});var a=l(716976),s=l(104076);let n=(0,a.memo)(function(e){return(0,s.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,children:(0,s.jsx)("path",{fill:"var(--fpl-icon-color, var(--color-icon))",fillRule:"evenodd",d:"M12.774 19.963c.32-.03.63.142.747.441.084.215-.028.476-.257.508a9 9 0 1 1 7.648-7.648c-.032.229-.292.34-.507.256a.72.72 0 0 1-.442-.747Q20 12.39 20 12a8 8 0 1 0-7.226 7.963M18 11.883c.007.342-.343.558-.662.433a.55.55 0 0 1-.34-.5 5 5 0 1 0-5.18 5.18c.218.01.418.138.498.342.125.319-.09.669-.433.662A6 6 0 1 1 18 11.882m-7.17 2.88c.224.095.423-.132.334-.359a3 3 0 0 1-.06-.167 2 2 0 0 0-.51-.814 2 2 0 1 1 2.828-2.829c.227.23.507.414.815.51q.084.026.168.06c.226.088.453-.11.358-.335a3 3 0 1 0-3.933 3.934m5.075 6.226a1.5 1.5 0 0 0 1.376-1.058l.624-2.027 2.027-.623a1.5 1.5 0 0 0 .107-2.83l-6-2.357a1.5 1.5 0 0 0-1.945 1.945l2.358 6a1.5 1.5 0 0 0 1.453.95m4.085-5.123a.5.5 0 0 1-.352.46l-2.533.778-.78 2.533a.5.5 0 0 1-.943.036l-2.357-6a.5.5 0 0 1 .648-.648l6 2.357a.5.5 0 0 1 .317.484",clipRule:"evenodd"})})})}}]);

//# debugId=d3ceaa90-116f-5c29-a9eb-010a8af53c6e

//# sourceMappingURL=https://admin.figma.com/admin/webpack-artifacts/c34789c6e7830e2675e9885b3cd0f5be87e5c55c/3076-5c719dc8a5c7b74b.min.js.map