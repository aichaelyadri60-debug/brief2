"use strict";
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="996f5a10-185a-52c6-a5bf-f3f1c9f97370")}catch(e){}}();
(globalThis.webpackChunk_figma_web_bundler=globalThis.webpackChunk_figma_web_bundler||[]).push([[3481],{326973:(e,n,t)=>{t.d(n,{b:()=>aB});var a=t(104076),o=t(716976),i=t(266808),r=t(812714),l=t(795033),s=t(140490),d=t(74620),c=t(331497),u=t(766812),p=t(973542),g=t(903927),f=t(170627),h=t(681958),x=t(980852),m=t(166887),y=t(80341),v=t(742549),b=t(373547),w=t(354114),_=t(120074),k=t(835307);function j(e){let n=(0,g.d4)(e=>e.mirror.appModel.currentPage),t=(0,v.hA)();return(0,k.wA)((e,n,t,a)=>n.flatMap(n=>{let o=e.get(n);if(!o)return null;if(o.containingCanvas===t){if(!a)return n;{let t=[];return(0,h.hD)(e,n,e=>{e.guid===a&&t.push(n)}),t}}}).filter(y.t),e,n,t)}function C(){let e=(0,m.IL)(),n=(0,l.Xr)(p.m),t=!!(0,v.hA)();return o.useCallback((a,o)=>{f.l7.user("clear-annotations",()=>{let i=(0,x.UN)().get(a);if(!i)return;i.removeAnnotation(o);let r=(0,h.kh)((0,x.UN)(),a);e("delete_annotation",{nodeId:a,nodeType:i.type,tlfId:r?.guid,isDevModeFocusView:t}),n(null),w.Y5.triggerAction("commit")})},[n,e,t])}var A=t(132672),I=t(754245),N=t(382629),S=t(12866),E=t(824570),L=t(511570),T=t.n(L),M=t(983500),O=t(755444),D=t(192075),P=t(692042),V=t(315361),R=t(228227),F=t(814082),W=t(278491),B=t(55029),z=t(819851),G=t(938716),H=t(701071),U=t(122010),$=t(841242),q=t(180244),K=t(437540),X=t(619070),Q=t(687849),Y=t(211862),Z=t(248043),J=t(303106),ee=t(278052),en=t(564941),et=t(547127);let ea="ANNOTATIONS_CONTEXT_MENU";function eo(e){let{nodeId:n,annotationIndex:t,parentRect:r}=e,s=(0,Y.q5)(),d=(0,g.wA)(),u=C(),f=function(){let e=(0,l.Xr)(p.m);return o.useCallback(n=>{e(n)},[e])}(),h=(0,o.useMemo)(()=>i.w3z.isReadOnly(i.SES.ANNOTATIONS),[]),x=(0,K.R)(e=>e.mirror.appModel.keyboardShortcuts),y=(0,$.XR)(),v=(0,m.am)(),b=(0,c.J2)(i.Ez5.uiState().filterAnnotationCategoryId),w={displayText:(0,D.t)("dev_handoff.annotations.hide_annotations"),shortcut:(0,en.c1)(x,"toggle-show-annotations"),callback:()=>{Q.VU.get("toggle-show-annotations","context-menu")()},recordingKey:"hideAnnotations"},_=[{displayText:(0,D.t)("dev_handoff.annotations.copy_link"),callback:()=>{if(null===s)return;let e=(0,Z.jN)({file:s,nodeId:n,isDevHandoff:!0});d(X.S({fileKey:s.key,url:e,source:J.d.ANNOTATION_CONTEXT_MENU,visualBellMessageOverride:(0,D.t)("dev_handoff.annotations.copied_link_to_clipboard")}))},recordingKey:"copy"},...h?[]:[{displayText:(0,D.t)("dev_handoff.layers.edit_annotation"),callback:()=>{f(t)},recordingKey:"edit"},{displayText:(0,D.t)("dev_handoff.annotations.delete"),callback:()=>{u(n,t)},recordingKey:"delete"}],...y.length>0?[ee.w,{displayText:(0,D.t)("dev_handoff.annotations.filter_by"),recordingKey:"filterBy",children:[{displayText:(0,D.t)("fullscreen_actions.show-all-annotation-categories"),callback:()=>{v("filter_annotation_category",{categoryLabel:"all",source:"context_menu"}),i.Ez5?.uiState().filterAnnotationCategoryId.set(null)},icon:(0,a.jsx)(q.y,{className:"annotation_context_menu--annotationsCategoryAllIcon--GjsT2"}),isChecked:!b,recordingKey:"showAllAnnotationCategories"},ee.w,...y.map(e=>{let n=(0,$.uA)(e);return{displayText:n,displayTextClassName:"annotation_context_menu--annotationCategoryLabel--mWwoF",icon:(0,a.jsx)("div",{className:"annotation_context_menu--annotationsCategoryIcon--hD0eJ",style:{backgroundColor:(0,$.FQ)(e)}}),isChecked:e.id===b,callback:()=>{v("filter_annotation_category",{categoryLabel:n,source:"context_menu"}),i.Ez5?.uiState().filterAnnotationCategoryId.set(e.id)},recordingKey:`showAnnotationCategory-${n}`}})]}]:[],...y.length>0?[w]:[ee.w,w]];return(0,a.jsx)(et.j,{items:_,showPoint:!1,parentRect:r,onSelectItem:e=>e.callback?.(),dispatch:d,lean:"right",leanPadding:0,recordingKey:"viewAnnotationContextMenu"})}var ei=t(307829),er=t(550256),el=t(454851),es=t(475477),ed=t(684742),ec=t(129011),eu=t(420680),ep=t(853943),eg=t(225654),ef=t(471798),eh=t(674524),ex=t(136192),em=t(330489),ey=t(846680),ev=t(321259),eb=t(371868),ew=t(735212),e_=t(801519);function ek({onEnterPressed:e}){let[n]=(0,eb.DF)();return o.useEffect(()=>(0,ew.Sd)(n.registerCommand(e_.if,t=>{if(t&&t.shiftKey)return t.preventDefault(),n.dispatchCommand(e_.XK,void 0);let a=(0,e_.vJ)();if((0,e_.I2)(a)){let e=a.anchor.getNode().getParent();if(e&&(0,ev.Mz)(e)||e&&(0,ev.HY)(e))return!1}return e(t??void 0),!0},e_.Jj)),[n,e]),null}var ej=t(641518),eC=t(225125),eA=t(652539),eI=t(999473),eN=t(366535),eS=t(443192),eE=t(235711),eL=t(894210),eT=t(25870),eM=t(983764),eO=t(929302),eD=t(700700),eP=t(268389),eV=t(293422),eR=t(17933),eF=t(216940),eW=t(536358),eB=t(140458),ez=t(559954),eG=t(365120),eH=t(5780),eU=t(959834);let e$="annotation_categories_edit_window--colorCircle--eQOTM",eq="annotation_categories_edit_window--dragging--N-NqM",eK="annotation_categories_edit_window--selected---8KFm";var eX=t(154709),eQ=t(713301);let eY=Symbol("ANNOTATION_CATEGORY_ITEM");var eZ=(e=>(e[e.INVALID_LABEL=0]="INVALID_LABEL",e[e.INVALID_COLOR=1]="INVALID_COLOR",e[e.DUPLICATE_CATEGORIES=2]="DUPLICATE_CATEGORIES",e))(eZ||{});let eJ=[i.RN1.YELLOW,i.RN1.ORANGE,i.RN1.RED,i.RN1.PINK,i.RN1.VIOLET,i.RN1.BLUE,i.RN1.TEAL,i.RN1.GREEN];function e0(e){return e.preset!==i.Bll.NONE||null!=e.custom&&null!=e.custom.label&&e.custom.label.trim().length>0&&null!=e.custom.color}function e1({recordingKey:e,index:n,isSelected:t,isLastItem:i,categoryId:r,label:l,color:s,dragging:d,shouldFocusLabelInput:c,onDrop:u,onSelect:p,onDragStart:g,onDragEnd:f,onRemove:h,onColorChange:x,onLabelChange:m}){let y=(0,o.useRef)(null),v=(0,o.useRef)(null),{position:b,dragItem:w}=(0,ez.h4)({type:eY,element:y,item:{categoryId:r},accept:[eY],onStart:g,onEnd:f,onDrop:e=>u(n,e)}),_=!!w&&w.categoryId===r;(0,o.useEffect)(()=>{c&&v.current?.focus()},[c]);let k=ej.rf(e,"mousedown",()=>{p(n)}),j=ej.iQ(e,"focus",()=>{t||p(n)}),C=(0,o.useCallback)(e=>{m(r,e)},[r,m]),{manager:A,getContextMenuTriggerProps:I,getTriggerProps:N}=er.b({offset:{mainAxis:4}}),S=(0,o.useCallback)(e=>{x(r,e)},[r,x]),E=(0,o.useMemo)(()=>d?b===ez.Nz.BEFORE?0===n?"annotation_categories_edit_window--withInsertBeforeTop--ie9yH":"annotation_categories_edit_window--withInsertBefore--ztJQH":b===ez.Nz.AFTER?i?"annotation_categories_edit_window--withInsertAfterBottom--BPiPN":"annotation_categories_edit_window--withInsertAfter--Jg20i":null:null,[d,b,n,i]),[L,M]=(0,o.useState)(!1),{getTriggerProps:O,getContainerProps:P,getArrowProps:V}=eR.fP({type:"dialog",isOpen:L,onOpenChange:M});return(0,a.jsxs)(eG.S.recordableDiv,{forwardedRef:y,onMouseDown:k,onFocus:j,className:T()("annotation_categories_edit_window--draggableRowContainer--Apval",E,{[eq]:_,[eK]:t}),recordingKey:e,dataTestId:e,children:[(0,a.jsx)(eA.B,{className:"annotation_categories_edit_window--grabber--mQN70",svg:eQ.A}),(0,a.jsxs)(er.bL,{manager:A,children:[(0,a.jsx)(ed.E,{className:T()("annotation_categories_edit_window--colorSelectTrigger--AJgOU",{"annotation_categories_edit_window--active---7kjY":A.isOpen}),recordingKey:ej.Pt(e,"colorSelectTrigger"),...N({}),"aria-label":s?(0,D.t)("dev_handoff.annotations.categories_edit_window.category_color_selector.aria_label",{color:s.label()}):(0,D.t)("dev_handoff.annotations.categories_edit_window.category_color_tooltip"),htmlAttributes:{...I(),"data-tooltip-type":"text","data-tooltip-show-above":!0,"data-tooltip":(0,D.t)("dev_handoff.annotations.categories_edit_window.category_color_tooltip")},children:(0,a.jsxs)("div",{className:"annotation_categories_edit_window--triggerContainer--ksQQB",children:[(0,a.jsx)("div",{className:T()(e$,{"annotation_categories_edit_window--noCategoryColor--TOAMH":!s}),style:{backgroundColor:s?.color}}),(0,a.jsx)(eA.B,{className:"annotation_categories_edit_window--caret--7QFy-",svg:eX.A})]})}),(0,a.jsx)(er.mc,{className:"annotation_categories_edit_window--colorOptions--n--Hk",children:eJ.map(e=>{let n=$.yu[e];return(0,a.jsx)(er.q7,{"aria-label":n.label(),onClick:()=>S(e),className:T()("annotation_categories_edit_window--colorOption--24Kum",{[eK]:s?.color===n.color}),children:(0,a.jsx)("div",{className:e$,style:{backgroundColor:n.color}})},e)})})]}),(0,a.jsx)("div",{className:"annotation_categories_edit_window--labelInputContainer--dR-Yp",children:(0,a.jsx)(eF.p,{"aria-label":(0,D.t)("dev_handoff.annotations.categories_edit_window.category_label_aria_label"),ref:v,value:l??"",className:"annotation_categories_edit_window--labelInput--vtlaI",onChange:C,recordingKey:ej.Pt(e,"labelInput"),placeholder:(0,D.t)("dev_handoff.annotations.categories_edit_window.category_label_placeholder")})}),(0,a.jsxs)("div",{className:"annotation_categories_edit_window--removeButtonContainer--PPynD",children:[(0,a.jsx)(eu.K,{"aria-label":(0,D.t)("dev_handoff.annotations.categories_edit_window.remove_category_button_label",{category:l??""}),htmlAttributes:{"data-tooltip":(0,D.t)("dev_handoff.annotations.categories_edit_window.remove_category_button"),"data-tooltip-type":"text"},recordingKey:ej.Pt(e,"removeButton"),...O({}),children:(0,a.jsx)(eB.r,{})}),(0,a.jsxs)(eR.mc,{...P({style:{width:"calc(320rem / 16)"}}),children:[(0,a.jsx)(eR.i3,{...V()}),(0,a.jsxs)(eP.vo,{children:[(0,a.jsx)(eP.Y9,{children:(0,a.jsx)(eP.hE,{children:(0,D.t)("dev_handoff.annotations.categories_edit_window.remove_category_dialog_title")})}),(0,a.jsx)(eP.nB,{children:(0,D.t)("dev_handoff.annotations.categories_edit_window.remove_category_dialog_body")}),(0,a.jsx)(eP.wi,{children:(0,a.jsxs)(eP.jk,{children:[(0,a.jsx)(eV.$n,{variant:"secondary",recordingKey:ej.Pt(e,"removeCategoryCancel"),onClick:()=>M(!1),children:(0,D.t)("general.cancel")}),(0,a.jsx)(eV.$n,{autoFocus:!0,variant:"destructive",recordingKey:ej.Pt(e,"removeCategoryConfirm"),onClick:()=>{h(r),M(!1)},children:(0,D.t)("general.delete")})]})})]})]})]})]})}let e2=(0,eU.Ju)(function(e){let n=(0,m.IL)(),{open:t,onClose:r,recordingKey:l}=e,s=eO.hS({open:t,onClose:r}),d=(0,$.XR)(),c=(0,$.mi)(),[u,p]=(0,o.useState)([]),[g,f]=(0,o.useState)({}),[h,y]=(0,o.useState)([]),[v,b]=(0,o.useState)([]);(0,o.useEffect)(()=>{d&&(p(d.map(e=>e.id)),f(d.reduce((e,n)=>(e[n.id]=n,e),{})))},[d]);let w=(0,o.useMemo)(()=>{let e=new Set(Object.values(g).map(e=>e.preset===i.Bll.NONE?e.custom?.color:(0,$.AP)(e.preset)).filter(N.Vq));return eJ.find(n=>!e.has(n))??i.RN1.GREEN},[g]),[_,k]=(0,o.useState)(null);(0,o.useEffect)(()=>{k(function(e){let n=new Set;for(let t of e)if(n.add(`${t.preset}-${t.custom?.label}-${t.custom?.color}`),t.preset===i.Bll.NONE&&null!=t.custom){if(null==t.custom.label||0===t.custom.label.trim().length)return{type:0,message:(0,D.t)("dev_handoff.annotations.category_custom.invalid_label")};if(null==t.custom.color)return{type:1,message:(0,D.t)("dev_handoff.annotations.category_custom.invalid_color")}}return n.size!==e.length?{type:2,message:(0,D.t)("dev_handoff.annotations.categories_edit_window.duplicate_categories_message")}:null}(u.map(e=>g[e]).filter(N.Vq)))},[g,u]);let[j,C]=(0,o.useState)(null),A=(0,o.useCallback)(e=>{-1===e?C(null):C(u[e]??null)},[u]),I=(0,o.useRef)(null),[S,E]=(0,o.useState)(!1),[L,M]=(0,o.useState)(null),O=(0,o.useCallback)(()=>{M(null),E(!0)},[]),P=(0,o.useCallback)(()=>{E(!1)},[]),V=(0,o.useCallback)((e,t)=>{let{dragItem:a,position:o}=t,r=u.indexOf(a.categoryId);o===ez.Nz.BEFORE?p(n=>[...n.slice(0,e),a.categoryId,...n.slice(e)].filter((n,t)=>n!==a.categoryId||t===e)):p(n=>[...n.slice(0,e+1),a.categoryId,...n.slice(e+1)].filter((n,t)=>n!==a.categoryId||t===e+1));let l=g[a.categoryId];l&&n("reorder_annotation_category",{category:l.preset===i.Bll.NONE?l.custom?.label??null:(0,$.h9)(l.preset),oldRank:r,newRank:e}),M(a.categoryId),E(!1)},[g,u,n]),R=ej.rf("editCategoriesModal","mousedown",e=>{e.target===I.current&&A(-1)},{includeTarget:!0}),F=(0,o.useCallback)(()=>{let e={id:(0,eH.fO)((0,x.UN)()),preset:i.Bll.NONE,custom:{label:"",color:w}};y(n=>[...n,e.id]),p(n=>[...n,e.id]),f(n=>({...n,[e.id]:e})),C(e.id),M(e.id)},[w]),W=(0,o.useCallback)(e=>{if(h.includes(e))y(n=>n.filter(n=>n!==e));else{let n=g[e];n&&b(e=>[...e,n.preset===i.Bll.NONE?n.custom?.label??"":(0,$.h9)(n.preset)])}p(n=>n.filter(n=>n!==e)),f(n=>{let{[e]:t,...a}=n;return a})},[h,g]),B=(0,o.useCallback)((e,t)=>{let a=g[e];a&&(f(n=>({...n,[e]:{...a,preset:i.Bll.NONE,custom:{...a.preset===i.Bll.NONE?a.custom:{label:(0,$.h9)(a.preset),color:(0,$.AP)(a.preset)},color:t}}})),n("edit_annotation_category_color",{category:a.preset===i.Bll.NONE?a.custom?.label??null:(0,$.h9)(a.preset),newColor:t,oldColor:a.preset===i.Bll.NONE?a.custom?.color:(0,$.AP)(a.preset)}))},[g,n]),z=(0,o.useCallback)((e,t)=>{let a=g[e];a&&(f(n=>({...n,[e]:{...a,preset:i.Bll.NONE,custom:{...a.preset===i.Bll.NONE?a.custom:{label:(0,$.h9)(a.preset),color:(0,$.AP)(a.preset)},label:t}}})),n("edit_annotation_category_name",{newCategory:t,oldCategory:a.preset===i.Bll.NONE?a.custom?.label:(0,$.h9)(a.preset)}))},[g,n]),G=(0,o.useCallback)(()=>{r()},[r]),H=(0,o.useCallback)(()=>{if(_)return;let e=u.map(e=>g[e]).filter(e0).map(e=>e.preset===i.Bll.NONE?{...e,custom:e.custom?{...e.custom,label:e.custom.label.trim()}:null}:e);if(e.length===d.length&&e.every((e,n)=>{let t=d[n];return!!t&&e.id===t.id&&e.preset===t.preset&&e.custom?.label===t.custom?.label&&e.custom?.color===t.custom?.color})){r();return}h.forEach(e=>{let t=g[e];t&&n("add_annotation_category",{categoryLabel:t.custom?.label??null})}),v.forEach(e=>{n("delete_annotation_category",{categoryLabel:e})}),c(e),r()},[_,u,d,c,r,g,h,v,n]);return(0,a.jsx)(eD.bL,{width:"md",manager:s,htmlAttributes:{"data-testid":"annotation-categories-edit-window-root"},children:(0,a.jsxs)(eP.vo,{children:[(0,a.jsxs)(eP.Y9,{children:[(0,a.jsx)(eP.hE,{children:(0,D.tx)("dev_handoff.annotations.categories_edit_window.title")}),(0,a.jsx)(eP.jk,{children:(0,a.jsx)(eu.K,{recordingKey:ej.Pt(l,"addCategory"),"aria-label":(0,D.t)("dev_handoff.annotations.categories_edit_window.add_category_button"),onClick:F,children:(0,a.jsx)(eW.e,{})})})]}),(0,a.jsx)(eP.nB,{padding:0===u.length?void 0:0,children:u.length>0?(0,a.jsx)(ez.hh,{children:(0,a.jsx)("div",{onMouseDown:R,ref:I,className:T()({[eq]:S}),children:u.map((e,n)=>{let t=g[e];return t?(0,a.jsx)(e1,{categoryId:e,color:t.preset===i.Bll.NONE?t.custom?.color!==void 0?$.yu[t.custom.color]:void 0:(0,$.Lw)(t.preset),dragging:S,index:n,isLastItem:n===u.length-1,isSelected:j===e,label:t.preset===i.Bll.NONE?t.custom?.label:(0,$.h9)(t.preset),onColorChange:B,onDragEnd:P,onDragStart:O,onDrop:V,onLabelChange:z,onRemove:W,onSelect:A,recordingKey:ej.Pt(l,"annotationCategoryItem",n),shouldFocusLabelInput:L===e},e):null})})}):(0,a.jsx)("div",{className:"annotation_categories_edit_window--noCategoriesMessage--haAE-",children:(0,D.tx)("dev_handoff.annotations.categories_edit_window.no_categories_message")})}),(0,a.jsx)(eP.wi,{children:(0,a.jsxs)(eP.jk,{children:[(0,a.jsx)(eV.$n,{variant:"secondary",onClick:G,recordingKey:ej.Pt(l,"cancel"),children:(0,D.tx)("general.cancel")}),(0,a.jsx)(eV.$n,{onClick:H,disabled:!!_,recordingKey:ej.Pt(l,"done"),htmlAttributes:_?{"data-tooltip-type":"text","data-tooltip":_.message}:{},children:(0,D.tx)("general.done")})]})})]})})}),e3=(0,o.memo)(function(e){return(0,a.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,children:(0,a.jsx)("path",{fill:"var(--fpl-icon-color, var(--color-icon))",fillRule:"evenodd",d:"M9.5 6A1.5 1.5 0 0 1 11 7.5v9A1.5 1.5 0 0 1 9.5 18h-2l-.153-.008A1.5 1.5 0 0 1 6 16.5v-9a1.5 1.5 0 0 1 1.347-1.492L7.5 6zm-2 1a.5.5 0 0 0-.5.5v9a.5.5 0 0 0 .5.5h2a.5.5 0 0 0 .5-.5v-9a.5.5 0 0 0-.5-.5zm9-1A1.5 1.5 0 0 1 18 7.5v9a1.5 1.5 0 0 1-1.5 1.5h-2l-.153-.008A1.5 1.5 0 0 1 13 16.5v-9a1.5 1.5 0 0 1 1.347-1.492L14.5 6zm-2 1a.5.5 0 0 0-.5.5v9a.5.5 0 0 0 .5.5h2a.5.5 0 0 0 .5-.5v-9a.5.5 0 0 0-.5-.5z",clipRule:"evenodd"})})}),e5=(0,o.memo)(function(e){return(0,a.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,children:(0,a.jsx)("path",{fill:"var(--fpl-icon-color, var(--color-icon))",d:"M16.5 13a1.5 1.5 0 0 1 1.5 1.5v2l-.008.153A1.5 1.5 0 0 1 16.5 18h-9a1.5 1.5 0 0 1-1.492-1.347L6 16.5v-2A1.5 1.5 0 0 1 7.5 13zm-9 1a.5.5 0 0 0-.5.5v2a.5.5 0 0 0 .5.5h9a.5.5 0 0 0 .5-.5v-2a.5.5 0 0 0-.5-.5zm9-8A1.5 1.5 0 0 1 18 7.5v2l-.008.153A1.5 1.5 0 0 1 16.5 11h-9a1.5 1.5 0 0 1-1.492-1.347L6 9.5v-2A1.5 1.5 0 0 1 7.5 6zm-9 1a.5.5 0 0 0-.5.5v2a.5.5 0 0 0 .5.5h9a.5.5 0 0 0 .5-.5v-2a.5.5 0 0 0-.5-.5z"})})});var e6=t(671170),e9=t(815346),e4=t(416381),e8=t(599441),e7=t(371952),ne=t(728233),nn=t(487375);let nt="annotation--viewAnnotation--cA-c1 annotation--_annotationBase--MPByC",na="annotation--wrapperEditing--C2Zlx",no="annotation--annotationLine--jr4Mc",ni="annotation--annotationLineEndDot--Lsq0a",nr="annotation--withCategory--lj1wU",nl="annotation--contentContainer--vSuqs",ns="annotation--innerWrapper--T0cql",nd="annotation--viewAnnotationFadedOut--7LQPE",nc="annotation--darkText--xCvQV",nu="annotation--properties--1p6UF",np="annotation--noValue--HHQOU",ng="annotation--propertyOptionIconSvg--LypST",nf="annotation--icon--w1enR",nh="annotation--chit--3je6E",nx="annotation--solidPaint--ClR6h",nm="annotation--solidPaintValue--9PQMf annotation--_ellipsis--8F1VE",ny="annotation--variablePill--VNxoI",nv="annotation--viewAnnotationSelected--UApdn",nb="annotation--categoryOptionLabel--Iz9RB",nw="annotation--buttonReset--Emcnw";function n_({valueProps:e,isHovered:n,variableContainerClassName:t}){let o=(0,e7.u)(e?.variableId);if("mixed"===e.format){let o=e.value.some(e=>!!e.variableId);return(0,a.jsx)("div",{className:T()("annotation--multipleVariableWrapper--OW3M1",o&&"annotation--vertical--zmpVv"),children:e.value.map((i,r)=>(0,a.jsxs)("div",{className:"annotation--multipleVariableValue--5-5xk",children:[(0,a.jsx)(n_,{valueProps:i,isHovered:n,variableContainerClassName:t}),r<e.value.length-1&&!o&&(0,a.jsx)("span",{children:", "})]},r))})}let i=`${(0,ne.m3)(e)}`;return o?(0,a.jsx)(nn.wG,{dataTestId:"styledValueVariable",containerClassName:T()(ny,t),text:o.name,disableHover:!0,isHovered:n,tooltip:i}):(0,a.jsx)(a.Fragment,{children:i})}var nk=t(166612),nj=t(554730),nC=t(324438),nA=t(425045);function nI({svg:e}){return(0,a.jsx)(eA.B,{svg:e,className:T()(nf,ng)})}var nN=t(299062);let nS=e=>(0,ne.nd)(e,"");function nE({nodeFields:e,variable:n,isPreview:t=!1}){let o=(0,e4.v4)(),i=(0,e8.qM)(o,e?.stackSpacing,nS);return n?t?(0,a.jsx)(a.Fragment,{children:n.name}):(0,a.jsx)(nn.wG,{containerClassName:ny,text:n.name,disableHover:!0}):(0,nA.rO)(e?.stackPrimaryAlignItems)?(0,D.tx)("dev_handoff.annotations.auto"):(0,a.jsx)(a.Fragment,{children:i})}function nL({nodeFields:e,isPreview:n=!1}){let t=(0,e7.u)(e?.itemSpacingVariableId);return n?(0,a.jsx)(nE,{nodeFields:e,variable:t,isPreview:!0}):(0,a.jsx)("div",{className:t?void 0:"annotation--spacingProperty--RCjSM annotation--coloredProperty--OTQ6l",children:(0,a.jsx)("span",{children:(0,a.jsx)(nE,{nodeFields:e,variable:t})})})}function nT({rawValues:e,variables:n,isPreview:t=!1,isTextProperty:o=!1}){let i=(0,e4.v4)(),r=(0,e8.Fm)(i,e,nS,{isTextProperty:o});if(e.length!==n.length)throw Error("<ManySidedProperty /> must have the same number of rawValues and variables");let l=n.map((e,n)=>({value:r[n],format:"pixels",variableId:e?.node_id})),s=l[0]?.variableId;for(let e of l)if(e.variableId!==s){if(t)return(0,D.tx)("fullscreen.mixed");return(0,a.jsx)(n_,{variableContainerClassName:ny,valueProps:{format:"mixed",value:l}})}return s?t?(0,a.jsx)(a.Fragment,{children:s}):(0,a.jsx)(n_,{variableContainerClassName:ny,valueProps:l[0]}):e.some(n=>n!==e[0])?t?(0,D.tx)("fullscreen.mixed"):(0,a.jsx)(n_,{variableContainerClassName:ny,valueProps:{format:"pixels",value:r.join(", ")}}):(0,a.jsx)(n_,{variableContainerClassName:ny,valueProps:{format:"pixels",value:r[0]}})}function nM({nodeFields:e,isPreview:n=!1}){let t=(0,e7.u)(e.paddingTopVariableId),o=(0,e7.u)(e.paddingRightVariableId),i=(0,e7.u)(e.paddingBottomVariableId),r=(0,e7.u)(e.paddingLeftVariableId),{stackTopPadding:l,stackRightPadding:s,stackBottomPadding:d,stackLeftPadding:c}=e,u=[t,o,i,r].some(e=>!!e);return n?(0,a.jsx)(nT,{rawValues:[l,s,d,c],variables:[t,o,i,r],isPreview:!0}):(0,a.jsx)("div",{className:T()(u?void 0:"annotation--paddingProperty--ckvG6 annotation--coloredProperty--OTQ6l"),children:(0,a.jsx)("span",{children:(0,a.jsx)(nT,{rawValues:[l,s,d,c],variables:[t,o,i,r]})})})}function nO({nodeId:e}){let n=(0,k.wA)(n=>{let t=n.get(e);return t?{stackWrap:t.stackWrap,stackMode:t.stackMode}:null},e);if(n?.stackWrap==="WRAP")return(0,a.jsx)(nI,{svg:nN.A});switch(n?.stackMode){case"HORIZONTAL":return(0,a.jsx)(nk.Z,{"data-testid":"Icon24AlLayoutGridHorizontalSmall",className:T()(nf,ng)});case"VERTICAL":return(0,a.jsx)(nj.z,{"data-testid":"Icon24AlLayoutGridVerticalSmall",className:T()(nf,ng)});case"GRID":return(0,a.jsx)(nC.t,{"data-testid":"Icon24GridView",className:T()(nf,ng)});default:return null}}function nD({nodeFields:e}){if("WRAP"===e.stackWrap)return(0,D.tx)("fullscreen.properties_panel.stack_panel.wrap");switch(e.stackMode){case"HORIZONTAL":return(0,D.tx)("dev_handoff.annotations.autolayout_horizontal");case"VERTICAL":return(0,D.tx)("dev_handoff.annotations.autolayout_vertical");case"GRID":return(0,D.tx)("inspect_panel.properties.flow.grid");default:return null}}function nP({nodeFields:e}){if(!e||!e.isStack)return null;if("HORIZONTAL"===e.stackMode)switch(e.stackPrimaryAlignItems){case"MIN":switch(e.stackCounterAlignItems){case"MIN":return(0,D.tx)("dev_handoff.annotations.alignment.top_left");case"CENTER":return(0,D.tx)("dev_handoff.annotations.alignment.left");case"MAX":return(0,D.tx)("dev_handoff.annotations.alignment.bottom_left");case"BASELINE":return(0,D.tx)("dev_handoff.annotations.alignment.baseline_left")}case"CENTER":case"SPACE_BETWEEN":case"SPACE_EVENLY":switch(e.stackCounterAlignItems){case"MIN":return(0,D.tx)("dev_handoff.annotations.alignment.top_center");case"CENTER":return(0,D.tx)("dev_handoff.annotations.alignment.center");case"MAX":return(0,D.tx)("dev_handoff.annotations.alignment.bottom_center");case"BASELINE":return(0,D.tx)("dev_handoff.annotations.alignment.baseline_center")}case"MAX":switch(e.stackCounterAlignItems){case"MIN":return(0,D.tx)("dev_handoff.annotations.alignment.top_right");case"CENTER":return(0,D.tx)("dev_handoff.annotations.alignment.right");case"MAX":return(0,D.tx)("dev_handoff.annotations.alignment.bottom_right");case"BASELINE":return(0,D.tx)("dev_handoff.annotations.alignment.baseline_right")}}switch(e.stackPrimaryAlignItems){case"MIN":switch(e.stackCounterAlignItems){case"MIN":return(0,D.tx)("dev_handoff.annotations.alignment.top_left");case"CENTER":return(0,D.tx)("dev_handoff.annotations.alignment.top_center");case"MAX":return(0,D.tx)("dev_handoff.annotations.alignment.top_right");case"BASELINE":return null}case"CENTER":case"SPACE_BETWEEN":case"SPACE_EVENLY":switch(e.stackCounterAlignItems){case"MIN":return(0,D.tx)("dev_handoff.annotations.alignment.left");case"CENTER":return(0,D.tx)("dev_handoff.annotations.alignment.center");case"MAX":return(0,D.tx)("dev_handoff.annotations.alignment.right");case"BASELINE":return null}case"MAX":switch(e.stackCounterAlignItems){case"MIN":return(0,D.tx)("dev_handoff.annotations.alignment.bottom_left");case"CENTER":return(0,D.tx)("dev_handoff.annotations.alignment.bottom_center");case"MAX":return(0,D.tx)("dev_handoff.annotations.alignment.bottom_right");case"BASELINE":return null}}}function nV({value:e,variableAlias:n,isPreview:t}){let o=(0,e7.u)(n?.id);return o&&t?(0,a.jsx)(a.Fragment,{children:o.name}):(0,a.jsx)(n_,{variableContainerClassName:ny,valueProps:{value:e}})}var nR=t(624155),nF=t(391145),nW=t(77417),nB=t(645249),nz=t(559185);function nG(e,n){let t=(0,g.d4)(e=>e.library),a=(0,nz.f$)(e),o=(0,V.mJ)(a);if(!e||!a||!o)return null;let i=(0,nR.Gp)(e.key,[a],t);if(!i)return null;let r=i.value;return"SUBSCRIBED_WITHOUT_LIBRARY"===i.kind&&(r.style_type=n),r.description=o.description,r.name=o.name,r.isLocal="LOCAL"===i.kind,r}function nH(e,n){if(1===n)return e;let t=(100*n).toLocaleString("en",{maximumFractionDigits:2})+"%";return`${e} \xb7 ${t}`}function nU(e,n,t){let{opacity:a=1}=e;switch(e.type){case"SOLID":{if(!e.color)return null;let{color:o}=e,{a:i=1}=o,r=t({...o,a:i*a},{alphaInPercent:!0});return n?n.name:r}case"GRADIENT_LINEAR":return nH((0,D.t)("dev_handoff.selection_colors.gradient_linear"),a);case"GRADIENT_ANGULAR":return nH((0,D.t)("dev_handoff.selection_colors.gradient_angular"),a);case"GRADIENT_DIAMOND":return nH((0,D.t)("dev_handoff.selection_colors.gradient_diamond"),a);case"GRADIENT_RADIAL":return nH((0,D.t)("dev_handoff.selection_colors.gradient_radial"),a);case"IMAGE":return nH((0,D.t)("dev_handoff.annotations.image"),a);case"VIDEO":return nH((0,D.t)("dev_handoff.annotations.video"),a);default:return null}}function n$({paints:e,styleRef:n,variables:t}){let o=t?.[0],i=(0,nW.Ig)(),r=(0,e7.u)(o?.id),l=nG(n,"FILL");return 0===e.length?null:l?(0,a.jsx)(a.Fragment,{children:l.name}):e.length>1?(0,D.tx)("dev_handoff.annotations.multiple"):(0,a.jsx)(a.Fragment,{children:nU(e[0],r,i)})}function nq({paints:e}){let n=e[0];return(0,a.jsx)(nF.J,{className:nh,tabIndex:-1,paint:n,allowMouseDownPropagation:!0})}function nK({paint:e,variableAlias:n}){let t=(0,nW.Ig)(),o=(0,e7.u)(n?.id),i=nU(e,o,t);return i?(0,a.jsxs)("div",{className:nx,children:[(0,a.jsx)(nF.J,{className:nh,paint:e,tabIndex:-1,allowMouseDownPropagation:!0}),(0,a.jsx)("span",{className:nm,title:i,children:o?(0,a.jsx)(nn.wG,{containerClassName:ny,text:i,disableHover:!0}):i})]}):null}function nX({styleRef:e,styleType:n,hideIcon:t=!1}){let o=nG(e,n);return(!function(e){let n=(0,g.d4)(e=>e.library),t=(0,nz.f$)(e),a=t?(0,nR.Gp)(e.key,[t],n):void 0;(0,nR.w$)(a)}(e),o)?(0,a.jsxs)("div",{className:nx,children:[!t&&(0,a.jsx)("div",{className:T()("annotation--styleChit--yCQ3O annotation--chit--3je6E",nf),children:(0,a.jsx)(nB.zi,{dsStyle:o})}),(0,a.jsx)("span",{className:nm,title:o.name,children:o.name})]}):null}function nQ({paints:e,styleRef:n,variables:t}){return n?(0,a.jsx)(nX,{styleRef:n,styleType:"FILL"}):0===e.length?null:(0,a.jsx)("div",{className:"annotation--mixedValues--Z0qIk",children:e.map((e,n)=>(0,a.jsx)(nK,{paint:e,variableAlias:t?.[n]},n))})}var nY=t(271899),nZ=t(491488),nJ=t(241421),n0=t(731650);function n1({effects:e,styleRef:n}){let t=nG(n,"EFFECT");if(t)return(0,a.jsx)(a.Fragment,{children:t.name});if(e.length>1)return(0,D.tx)("dev_handoff.annotations.multiple");let o=e[0];return o?(0,a.jsx)(n2,{effect:o}):null}function n2({effect:e}){switch(e.type){case"DROP_SHADOW":return(0,D.tx)("dev_handoff.annotations.shadow");case"BACKGROUND_BLUR":return(0,D.tx)("fullscreen.properties_panel.effects.background_blur");case"FOREGROUND_BLUR":return(0,D.tx)("fullscreen.properties_panel.effects.layer_blur");case"INNER_SHADOW":return(0,D.tx)("fullscreen.properties_panel.effects.inner_shadow");case"GRAIN":return(0,D.tx)("fullscreen.properties_panel.effects.texture");case"NOISE":return(0,D.tx)("fullscreen.properties_panel.effects.noise");case"GLASS":return(0,D.tx)("fullscreen.properties_panel.effects.glass");case"REPEAT":case"SYMMETRY":case void 0:return null}}function n3({effects:e,styleRef:n}){return(0,a.jsx)(a.Fragment,{children:e.map((e,t)=>(0,a.jsx)(n4,{effect:e,styleRefHeader:0===t?n:null},t))})}function n5({effect:e,variables:n}){let t=[e.offset?.x,e.offset?.y,e.radius,e.spread];return t.some((e,t)=>n[t]?.name)?(0,a.jsx)("div",{children:t.map((e,t)=>{if(void 0===e)return null;let o=n[t];return o?.name?(0,a.jsx)(nn.wG,{text:o.name,disableHover:!0},t):(0,a.jsx)("div",{children:e},t)}).filter(e=>null!==e)}):(0,a.jsx)("span",{children:t.filter(e=>void 0!==e).join(", ")})}function n6({effect:e,radiusVariable:n}){return n?.name?(0,a.jsx)("span",{className:"annotation--effectBlurVariable--mbYFb",children:(0,a.jsx)(nn.wG,{text:n.name,disableHover:!0})}):void 0===e.radius?null:(0,a.jsx)("span",{children:` ${(0,ne.nd)(e.radius,"px")}`})}let n9=new nJ.SU;function n4({effect:e,styleRefHeader:n}){let t=(0,nW.Ig)(),o=n&&(0,a.jsx)(n8,{styleRef:n}),i=[e.xVar,e.yVar,e.radiusVar,e.spreadVar,e.colorVar].map(e=>{if(e?.value?.alias){let n=nZ.sD.fromKiwi(e.value.alias);if(n)return nZ.sD.toString(n)}return null}),r=(0,e7.hg)(i);switch(e.type){case"DROP_SHADOW":case"INNER_SHADOW":{let{color:n}=e,i=r[4],l=n?t(n,{alphaInPercent:!0}):null;return(0,a.jsxs)("div",{children:[o,(0,a.jsx)("span",{children:(0,a.jsx)(n2,{effect:e})}),n&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{}),(0,a.jsxs)("div",{className:nx,children:[(0,a.jsx)(nF.J,{className:T()(nh,"annotation--chitInline--vG6cM"),color:n,allowMouseDownPropagation:!0}),i?(0,a.jsx)(nn.wG,{text:i.name,disableHover:!0}):(0,a.jsx)("span",{className:nm,title:l||void 0,children:l})]})]}),(0,a.jsx)("span",{}),(0,a.jsx)(n5,{effect:e,variables:r}),e.blendMode&&"NORMAL"!==e.blendMode&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{}),(0,a.jsx)("span",{children:n9.format(e.blendMode)})]})]})}case"BACKGROUND_BLUR":case"FOREGROUND_BLUR":return(0,a.jsxs)("div",{children:[o,(0,a.jsx)("span",{children:(0,a.jsx)(n2,{effect:e})}),(0,a.jsx)(n6,{effect:e,radiusVariable:r[2]})]});case"REPEAT":case"SYMMETRY":case"GLASS":case"NOISE":case"GRAIN":case void 0:return null}}function n8({styleRef:e}){let n=(0,nz.f$)(e),t=(0,V.mJ)(n);return n&&t?(0,a.jsx)("div",{children:t.name}):null}var n7=t(160761);let te=e=>{switch(e){case"RIGHT":return(0,D.t)("inspect_panel.typography.align_right");case"CENTER":return(0,D.t)("inspect_panel.typography.align_center");case"JUSTIFIED":return(0,D.t)("inspect_panel.typography.align_justified");case"LEFT":return(0,D.t)("dev_handoff.annotations.align_left")}};function tn(){return(0,a.jsx)(eA.B,{svg:n7.A,className:T()(nf,ng)})}function tt({textAlignHorizontal:e}){return(0,a.jsx)(a.Fragment,{children:te(e)})}let ta=e=>e.toLocaleString("en",{maximumFractionDigits:2,useGrouping:!1});function to({lineHeightOrMixed:e,variableAlias:n,isPreview:t}){let o=(0,e7.u)(n?.id),i=(0,e4.v4)(),r="mixed"!==e&&"PIXELS"===e.units?e.value:void 0,l=(0,e8.qM)(i,r,ta,{isTextProperty:!0});return"mixed"===e?(0,D.tx)("fullscreen.mixed"):o&&t?(0,a.jsx)(a.Fragment,{children:o.name}):"PERCENT"===e.units&&100===e.value?(0,D.tx)("dev_handoff.annotations.auto"):"RAW"===e.units?(0,a.jsx)(n_,{variableContainerClassName:ny,valueProps:{format:"fig_number",value:{value:100*e.value,units:"PERCENT"},variableId:o?.node_id}}):(0,a.jsx)(n_,{variableContainerClassName:ny,valueProps:{value:l,variableId:o?.node_id}})}function ti({fontNameOrMixed:e,variableAlias:n,isPreview:t}){let o=(0,e7.u)(n?.id);return"mixed"===e?(0,D.tx)("fullscreen.mixed"):o&&t?(0,a.jsx)(a.Fragment,{children:o.name}):(0,a.jsx)(n_,{variableContainerClassName:ny,valueProps:{value:e.family,variableId:o?.node_id}})}function tr({fontWeightOrMixed:e,variableAlias:n,isPreview:t}){let o=(0,e7.u)(n?.id);return"mixed"===e?(0,D.tx)("fullscreen.mixed"):(o&&o.resolvedType!==i.rXF.FLOAT&&(o=null),o&&t)?(0,a.jsx)(a.Fragment,{children:o.name}):(0,a.jsx)(n_,{variableContainerClassName:ny,valueProps:{value:e,variableId:o?.node_id}})}var tl=t(372209),ts=t(374356),td=t(668810),tc=t(962815),tu=t(33649),tp=t(198130),tg=t(541014),tf=t(77351),th=t(275646);let tx=new Map([[i.L5V.HEIGHT,{label:()=>(0,D.t)("fullscreen.properties_panel.transform_panel.height"),category:"dimension",Icon:()=>(0,a.jsx)(nI,{svg:tu.A}),extractNodeFields:e=>e?{height:e.size.y,heightVar:e.boundVariables.height}:null,PreviewValue:({nodeFields:e})=>e?(0,a.jsx)(tj,{value:e.height,variableAlias:e.heightVar,isPreview:!0}):null,DisplayValue:({nodeFields:e})=>e?(0,a.jsx)(tj,{value:e.height,variableAlias:e.heightVar}):null,index:0}],[i.L5V.MIN_HEIGHT,{label:()=>(0,D.t)("fullscreen.properties_panel.stack_panel.minmax.min_height_tt"),category:"dimension",Icon:()=>(0,a.jsx)(nI,{svg:tu.A}),extractNodeFields:e=>e?{minHeight:e.minHeight,minHeightVar:e.boundVariables.minHeight}:null,PreviewValue:({nodeFields:e})=>e?(0,a.jsx)(tj,{value:e.minHeight,variableAlias:e.minHeightVar,isPreview:!0}):null,DisplayValue:({nodeFields:e})=>e?(0,a.jsx)(tj,{value:e.minHeight,variableAlias:e.minHeightVar}):null,index:0}],[i.L5V.MAX_HEIGHT,{label:()=>(0,D.t)("fullscreen.properties_panel.stack_panel.minmax.max_height_tt"),category:"dimension",Icon:()=>(0,a.jsx)(nI,{svg:tu.A}),extractNodeFields:e=>e?{maxHeight:e.maxHeight,maxHeightVar:e.boundVariables.maxHeight}:null,PreviewValue:({nodeFields:e})=>e?(0,a.jsx)(tj,{value:e.maxHeight,variableAlias:e.maxHeightVar,isPreview:!0}):null,DisplayValue:({nodeFields:e})=>e?(0,a.jsx)(tj,{value:e.maxHeight,variableAlias:e.maxHeightVar}):null,index:0}],[i.L5V.WIDTH,{label:()=>(0,D.t)("fullscreen.properties_panel.transform_panel.width"),category:"dimension",Icon:()=>(0,a.jsx)(nI,{svg:tg.A}),extractNodeFields:e=>e?{width:e.size.x,widthVar:e.boundVariables.width}:null,PreviewValue:({nodeFields:e})=>e?(0,a.jsx)(tj,{value:e.width,variableAlias:e.widthVar,isPreview:!0}):null,DisplayValue:({nodeFields:e})=>e?(0,a.jsx)(tj,{value:e.width,variableAlias:e.widthVar}):null,index:0}],[i.L5V.MIN_WIDTH,{label:()=>(0,D.t)("fullscreen.properties_panel.stack_panel.minmax.min_width_tt"),category:"dimension",Icon:()=>(0,a.jsx)(nI,{svg:tg.A}),extractNodeFields:e=>e?{minWidth:e.minWidth,minWidthVar:e.boundVariables.minWidth}:null,PreviewValue:({nodeFields:e})=>e?(0,a.jsx)(tj,{value:e.minWidth,variableAlias:e.minWidthVar,isPreview:!0}):null,DisplayValue:({nodeFields:e})=>e?(0,a.jsx)(tj,{value:e.minWidth,variableAlias:e.minWidthVar}):null,index:0}],[i.L5V.MAX_WIDTH,{label:()=>(0,D.t)("fullscreen.properties_panel.stack_panel.minmax.max_width_tt"),category:"dimension",Icon:()=>(0,a.jsx)(nI,{svg:tg.A}),extractNodeFields:e=>e?{maxWidth:e.maxWidth,maxWidthVar:e.boundVariables.maxWidth}:null,PreviewValue:({nodeFields:e})=>e?(0,a.jsx)(tj,{value:e.maxWidth,variableAlias:e.maxWidthVar,isPreview:!0}):null,DisplayValue:({nodeFields:e})=>e?(0,a.jsx)(tj,{value:e.maxWidth,variableAlias:e.maxWidthVar}):null,index:0}],[i.L5V.CORNER_RADIUS,{label:()=>(0,D.t)("fullscreen.properties_panel.transform_panel.corner_radius"),category:"dimension",Icon:()=>(0,a.jsx)(nI,{svg:ts.A}),extractNodeFields:e=>e?{rectangleTopLeftCornerRadius:e.rectangleTopLeftCornerRadius,rectangleTopRightCornerRadius:e.rectangleTopRightCornerRadius,rectangleBottomRightCornerRadius:e.rectangleBottomRightCornerRadius,rectangleBottomLeftCornerRadius:e.rectangleBottomLeftCornerRadius,topLeftRadiusVariable:e.boundVariables.topLeftRadius?.id,topRightRadiusVariable:e.boundVariables.topRightRadius?.id,bottomRightRadiusVariable:e.boundVariables.bottomRightRadius?.id,bottomLeftRadiusVariable:e.boundVariables.bottomLeftRadius?.id}:null,PreviewValue:({nodeFields:e})=>e?(0,a.jsx)(tv,{nodeFields:e,isPreview:!0}):null,DisplayValue:({nodeFields:e})=>e?(0,a.jsx)(tv,{nodeFields:e}):null,index:0}],[i.L5V.STACK_MODE,{label:()=>(0,D.t)("dev_handoff.annotations.autolayout_mode"),category:"stack",Icon:({nodeId:e})=>(0,a.jsx)(nO,{nodeId:e}),extractNodeFields:e=>e?{stackMode:e.stackMode,stackWrap:e.stackWrap}:null,PreviewValue:({nodeFields:e})=>e?(0,a.jsx)(nD,{nodeFields:e}):null,DisplayValue:({nodeFields:e})=>e?(0,a.jsx)(nD,{nodeFields:e}):null,index:0}],[i.L5V.STACK_ALIGNMENT,{label:()=>(0,D.t)("dev_handoff.annotations.alignment"),category:"stack",Icon:({nodeId:e})=>{let n=(0,k.wA)(n=>{let t=n.get(e);return!t||t.isGrid?null:{stackMode:t.stackMode,stackPrimaryAlignItems:t.stackPrimaryAlignItems,stackCounterAlignItems:t.stackCounterAlignItems,stackWrap:t.stackWrap}},e);return n?(0,a.jsx)(nI,{svg:(0,nY.GN)(n)}):null},extractNodeFields:e=>e?{isStack:e.isStack,stackMode:e.stackMode,stackPrimaryAlignItems:e.stackPrimaryAlignItems,stackCounterAlignItems:e.stackCounterAlignItems}:null,PreviewValue:({nodeFields:e})=>e?(0,a.jsx)(nP,{nodeFields:e}):null,DisplayValue:({nodeFields:e})=>e?(0,a.jsx)(nP,{nodeFields:e}):null,index:0}],[i.L5V.STACK_SPACING,{label:()=>(0,D.t)("inspect_panel.properties.gap"),category:"stack",Icon:({nodeId:e})=>{let n=(0,k.Fk)(n=>n.get(e)?.stackMode,e);return n&&"GRID"!==n?(0,a.jsx)(nI,{svg:"HORIZONTAL"===n?td.A:tc.A}):null},extractNodeFields:e=>e?{itemSpacingVariableId:e?.boundVariables?.itemSpacing?.id,stackSpacing:e.stackSpacing,stackPrimaryAlignItems:e.stackPrimaryAlignItems}:null,PreviewValue:({nodeFields:e})=>(0,a.jsx)(nL,{nodeFields:e,isPreview:!0}),DisplayValue:({nodeFields:e})=>(0,a.jsx)(nL,{nodeFields:e}),index:0}],[i.L5V.GRID_COLUMN_COUNT,{label:()=>(0,D.t)("inspect_panel.properties.grid.columns"),category:"stack",Icon:()=>(0,a.jsx)(e3,{"data-testid":"Icon24AlColumnsSmall",className:T()(nf,ng)}),extractNodeFields:e=>e?{columnCount:e.gridColumnCount}:null,PreviewValue:({nodeFields:e})=>(0,a.jsx)(nV,{value:e?e.columnCount:0,isPreview:!0}),DisplayValue:({nodeFields:e})=>(0,a.jsx)(nV,{value:e?e.columnCount:0}),index:0}],[i.L5V.GRID_ROW_COUNT,{label:()=>(0,D.t)("inspect_panel.properties.grid.rows"),category:"stack",Icon:()=>(0,a.jsx)(e5,{"data-testid":"Icon24AlRowsSmall",className:T()(nf,ng)}),extractNodeFields:e=>e?{rowCount:e.gridRowCount}:null,PreviewValue:({nodeFields:e})=>(0,a.jsx)(nV,{value:e?e.rowCount:0,isPreview:!0}),DisplayValue:({nodeFields:e})=>(0,a.jsx)(nV,{value:e?e.rowCount:0}),index:0}],[i.L5V.GRID_COLUMN_GAP,{label:()=>(0,D.t)("inspect_panel.properties.grid.column_gap"),category:"stack",Icon:({nodeId:e})=>{let n=(0,k.Fk)(n=>n.get(e)?.stackMode,e);return n&&"GRID"===n?(0,a.jsx)(nI,{svg:tc.A}):null},extractNodeFields:e=>e?{itemSpacingVariableId:e?.boundVariables?.itemSpacing?.id,stackSpacing:e.gridColumnGap,stackPrimaryAlignItems:e.stackPrimaryAlignItems}:null,PreviewValue:({nodeFields:e})=>(0,a.jsx)(nL,{nodeFields:e,isPreview:!0}),DisplayValue:({nodeFields:e})=>(0,a.jsx)(nL,{nodeFields:e}),index:0}],[i.L5V.GRID_ROW_GAP,{label:()=>(0,D.t)("inspect_panel.properties.grid.row_gap"),category:"stack",Icon:({nodeId:e})=>{let n=(0,k.Fk)(n=>n.get(e)?.stackMode,e);return n&&"GRID"===n?(0,a.jsx)(nI,{svg:td.A}):null},extractNodeFields:e=>e?{itemSpacingVariableId:e?.boundVariables?.itemSpacing?.id,stackSpacing:e.gridRowGap,stackPrimaryAlignItems:e.stackPrimaryAlignItems}:null,PreviewValue:({nodeFields:e})=>(0,a.jsx)(nL,{nodeFields:e,isPreview:!0}),DisplayValue:({nodeFields:e})=>(0,a.jsx)(nL,{nodeFields:e}),index:0}],[i.L5V.GRID_COLUMN_ANCHOR_INDEX,{label:()=>(0,D.t)("inspect_panel.properties.grid.column_start"),category:"stack",Icon:()=>(0,a.jsx)(e3,{"data-testid":"Icon24AlColumnsSmall",className:T()(nf,ng)}),extractNodeFields:e=>e?{columnIndex:e.gridColumnAnchorIndex}:null,PreviewValue:({nodeFields:e})=>(0,a.jsx)(nV,{value:e?e.columnIndex+1:0,isPreview:!0}),DisplayValue:({nodeFields:e})=>(0,a.jsx)(nV,{value:e?e.columnIndex+1:0}),index:0}],[i.L5V.GRID_ROW_ANCHOR_INDEX,{label:()=>(0,D.t)("inspect_panel.properties.grid.row_start"),category:"stack",Icon:()=>(0,a.jsx)(e5,{"data-testid":"Icon24AlRowsSmall",className:T()(nf,ng)}),extractNodeFields:e=>e?{rowIndex:e.gridRowAnchorIndex}:null,PreviewValue:({nodeFields:e})=>(0,a.jsx)(nV,{value:e?e.rowIndex+1:0,isPreview:!0}),DisplayValue:({nodeFields:e})=>(0,a.jsx)(nV,{value:e?e.rowIndex+1:0}),index:0}],[i.L5V.GRID_COLUMN_SPAN,{label:()=>(0,D.t)("inspect_panel.properties.grid.horizontal_span"),category:"stack",Icon:()=>(0,a.jsx)(e6.H,{"data-testid":"Icon24ArrowRightSmall",className:T()(nf,ng)}),extractNodeFields:e=>e?{columnSpan:e.gridColumnSpan}:null,PreviewValue:({nodeFields:e})=>(0,a.jsx)(nV,{value:e?e.columnSpan:0,isPreview:!0}),DisplayValue:({nodeFields:e})=>(0,a.jsx)(nV,{value:e?e.columnSpan:0}),index:0}],[i.L5V.GRID_ROW_SPAN,{label:()=>(0,D.t)("inspect_panel.properties.grid.vertical_span"),category:"stack",Icon:()=>(0,a.jsx)(e9.t,{"data-testid":"Icon24ArrowDownSmall",className:T()(nf,ng)}),extractNodeFields:e=>e?{rowSpan:e.gridRowSpan}:null,PreviewValue:({nodeFields:e})=>(0,a.jsx)(nV,{value:e?e.rowSpan:0,isPreview:!0}),DisplayValue:({nodeFields:e})=>(0,a.jsx)(nV,{value:e?e.rowSpan:0}),index:0}],[i.L5V.STACK_PADDING,{label:()=>(0,D.t)("inspect_panel.properties.padding"),category:"stack",Icon:()=>(0,a.jsx)(nI,{svg:tp.A}),extractNodeFields:e=>e?{stackTopPadding:e.stackTopPadding,stackRightPadding:e.stackRightPadding,stackBottomPadding:e.stackBottomPadding,stackLeftPadding:e.stackLeftPadding,paddingTopVariableId:e.boundVariables?.paddingTop?.id,paddingRightVariableId:e.boundVariables?.paddingRight?.id,paddingBottomVariableId:e.boundVariables?.paddingBottom?.id,paddingLeftVariableId:e.boundVariables?.paddingLeft?.id}:null,PreviewValue:({nodeFields:e})=>e?(0,a.jsx)(nM,{nodeFields:e,isPreview:!0}):null,DisplayValue:({nodeFields:e})=>e?(0,a.jsx)(nM,{nodeFields:e}):null,index:0}],[i.L5V.TEXT_STYLE,{label:()=>(0,D.t)("dev_handoff.annotations.text_style"),category:"text",Icon:tn,extractNodeFields:e=>({inheritedTextStyle:e?.inheritedTextStyle}),PreviewValue:({nodeFields:e})=>e?.inheritedTextStyle?(0,a.jsx)(tA,{styleRef:e.inheritedTextStyle}):null,DisplayValue:({nodeFields:e})=>e?.inheritedTextStyle?(0,a.jsx)(nX,{styleRef:e.inheritedTextStyle,styleType:"TEXT",hideIcon:!0}):null,index:0}],[i.L5V.FONT_FAMILY,{label:()=>(0,D.t)("inspect_panel.typography.font"),category:"text",Icon:tn,extractNodeFields:e=>e?{fontNameOrMixed:e.fontNameOrMixed,fontFamilyVariable:e.boundVariables.fontFamily?.[0]}:null,PreviewValue:({nodeFields:e})=>e?(0,a.jsx)(ti,{fontNameOrMixed:e.fontNameOrMixed,variableAlias:e.fontFamilyVariable,isPreview:!0}):null,DisplayValue:({nodeFields:e})=>e?(0,a.jsx)(ti,{fontNameOrMixed:e.fontNameOrMixed,variableAlias:e.fontFamilyVariable}):null,index:0}],[i.L5V.FONT_STYLE,{label:()=>(0,D.t)("inspect_panel.code.font_style"),category:"text",Icon:tn,extractNodeFields:e=>({fontStyle:e?.fontName.style}),PreviewValue:({nodeFields:e})=>(0,a.jsx)(a.Fragment,{children:e?.fontStyle}),DisplayValue:({nodeFields:e})=>(0,a.jsx)(a.Fragment,{children:e?.fontStyle}),index:0}],[i.L5V.FONT_SIZE,{label:()=>(0,D.t)("dev_handoff.annotations.font_size"),category:"text",Icon:tn,extractNodeFields:e=>e?{fontSizeOrMixed:e.fontSizeOrMixed,fontSizeVariable:e.boundVariables.fontSize?.[0]}:null,PreviewValue:({nodeFields:e})=>e?(0,a.jsx)(tj,{value:e.fontSizeOrMixed,variableAlias:e.fontSizeVariable,isPreview:!0,isTextProperty:!0}):null,DisplayValue:({nodeFields:e})=>e?(0,a.jsx)(tj,{value:e.fontSizeOrMixed,variableAlias:e.fontSizeVariable,isTextProperty:!0}):null,index:0}],[i.L5V.LINE_HEIGHT,{label:()=>(0,D.t)("fullscreen.type_panel.line_height"),category:"text",Icon:tn,extractNodeFields:e=>e?{lineHeightOrMixed:e.lineHeightOrMixed,lineHeightVariable:e.boundVariables.lineHeight?.[0]}:null,PreviewValue:({nodeFields:e})=>e?(0,a.jsx)(to,{lineHeightOrMixed:e.lineHeightOrMixed,variableAlias:e.lineHeightVariable,isPreview:!0}):null,DisplayValue:({nodeFields:e})=>e?(0,a.jsx)(to,{lineHeightOrMixed:e.lineHeightOrMixed,variableAlias:e.lineHeightVariable}):null,index:0}],[i.L5V.LETTER_SPACING,{label:()=>(0,D.t)("fullscreen.type_panel.letter_spacing"),category:"text",Icon:tn,extractNodeFields:e=>e?{letterSpacingOrMixed:e.letterSpacingOrMixed,letterSpacingVariable:e.boundVariables.letterSpacing?.[0]}:null,PreviewValue:({nodeFields:e})=>e?(0,a.jsx)(tC,{value:e.letterSpacingOrMixed,variableAlias:e.letterSpacingVariable,isPreview:!0,isTextProperty:!0}):null,DisplayValue:({nodeFields:e})=>e?(0,a.jsx)(tC,{value:e.letterSpacingOrMixed,variableAlias:e.letterSpacingVariable,isTextProperty:!0}):null,index:0}],[i.L5V.TEXT_ALIGN_HORIZONTAL,{label:()=>(0,D.t)("dev_handoff.annotations.text_align"),category:"text",Icon:tn,extractNodeFields:e=>({textAlign:e?.textAlignHorizontal}),PreviewValue:({nodeFields:e})=>e?.textAlign?(0,a.jsx)(tt,{textAlignHorizontal:e.textAlign}):null,DisplayValue:({nodeFields:e})=>e?.textAlign?(0,a.jsx)(tt,{textAlignHorizontal:e.textAlign}):null,index:0}],[i.L5V.FONT_WEIGHT,{label:()=>(0,D.t)("inspect_panel.typography.weight"),category:"text",Icon:tn,extractNodeFields:e=>e?{fontWeightOrMixed:e.fontWeightOrMixed,fontStyleVariable:e.boundVariables.fontStyle?.[0]}:null,PreviewValue:({nodeFields:e})=>e?(0,a.jsx)(tr,{fontWeightOrMixed:e.fontWeightOrMixed,variableAlias:e.fontStyleVariable,isPreview:!0}):null,DisplayValue:({nodeFields:e})=>e?(0,a.jsx)(tr,{fontWeightOrMixed:e.fontWeightOrMixed,variableAlias:e.fontStyleVariable}):null,index:0}],[i.L5V.FILL,{label:()=>(0,D.t)("fullscreen.properties_panel.fill.fill"),category:"paint",Icon:({nodeId:e})=>{let n=(0,k.Fk)(n=>n.get(e)?.fills,e);return n?(0,a.jsx)(nq,{paints:n}):null},extractNodeFields:e=>e?{fills:e.fills,fillVariables:e.boundVariables.fills,inheritedFillStyle:e.inheritedFillStyle}:null,PreviewValue:({nodeFields:e})=>e?(0,a.jsx)(n$,{paints:e.fills,variables:e.fillVariables,styleRef:e.inheritedFillStyle}):null,DisplayValue:({nodeFields:e})=>e?(0,a.jsx)(nQ,{paints:e.fills,styleRef:e.inheritedFillStyle,variables:e.fillVariables}):null,index:0}],[i.L5V.STROKE,{label:()=>(0,D.t)("fullscreen.properties_panel.fill.stroke"),category:"paint",Icon:({nodeId:e})=>{let n=(0,k.Fk)(n=>n.get(e)?.strokePaints.data,e);return n?(0,a.jsx)(nq,{paints:n}):null},extractNodeFields:e=>e?{strokePaints:e.strokePaints,strokeVariables:e.boundVariables.strokes,inheritedFillStyle:e.inheritedFillStyle,inheritedFillStyleForStroke:e.inheritedFillStyleForStroke}:null,PreviewValue:({nodeFields:e})=>e?(0,a.jsx)(n$,{paints:e.strokePaints.data,variables:e.strokeVariables,styleRef:e.inheritedFillStyle}):null,DisplayValue:({nodeFields:e})=>e?(0,a.jsx)(nQ,{paints:e.strokePaints.data,styleRef:e.inheritedFillStyleForStroke,variables:e.strokeVariables}):null,index:0}],[i.L5V.STROKE_WIDTH,{label:()=>(0,D.t)("fullscreen.properties_panel.borders.stroke_width"),category:"paint",Icon:()=>(0,a.jsx)(nI,{svg:tf.A}),extractNodeFields:e=>e?{borderStrokeWeightsIndependent:e.borderStrokeWeightsIndependent,strokeWeight:e.strokeWeight,strokeWeightVariable:e.boundVariables.strokeWeight?.id,borderTopWeight:e.borderTopWeight,borderRightWeight:e.borderRightWeight,borderBottomWeight:e.borderBottomWeight,borderLeftWeight:e.borderLeftWeight,strokeTopWeightVariable:e.boundVariables.strokeTopWeight?.id,strokeRightWeightVariable:e.boundVariables.strokeRightWeight?.id,strokeBottomWeightVariable:e.boundVariables.strokeBottomWeight?.id,strokeLeftWeightVariable:e.boundVariables.strokeLeftWeight?.id}:null,PreviewValue:({nodeFields:e})=>e?(0,a.jsx)(tb,{nodeFields:e,isPreview:!0}):null,DisplayValue:({nodeFields:e})=>e?(0,a.jsx)(tb,{nodeFields:e}):null,index:0}],[i.L5V.EFFECT,{label:()=>(0,D.t)("inspect_panel.code.effect"),category:"paint",Icon:function(){return(0,a.jsx)(nI,{svg:n0.A})},extractNodeFields:e=>e?{effects:e.effects.filter(e=>e.visible),inheritedEffectStyle:e.inheritedEffectStyle}:null,PreviewValue:({nodeFields:e})=>e?(0,a.jsx)(n1,{effects:e.effects,styleRef:e.inheritedEffectStyle}):null,DisplayValue:({nodeFields:e})=>e?(0,a.jsx)(n3,{effects:e.effects,styleRef:e.inheritedEffectStyle}):null,index:0}],[i.L5V.OPACITY,{label:()=>(0,D.t)("fullscreen.scrubbable.opacity"),category:"paint",Icon:()=>(0,a.jsx)(nI,{svg:th.A}),extractNodeFields:e=>e?{opacity:e.opacity,opacityVariable:e.boundVariables.opacity?.id}:null,PreviewValue:({nodeFields:e})=>e?(0,a.jsx)(ty,{nodeFields:e,isPreview:!0}):null,DisplayValue:({nodeFields:e})=>e?(0,a.jsx)(ty,{nodeFields:e}):null,index:0}],[i.L5V.COMPONENT,{label:()=>(0,D.t)("dev_handoff.annotations.component"),category:"component",Icon:()=>(0,a.jsx)(nI,{svg:tl.A}),extractNodeFields:(e,n)=>{let t;let a=e?.symbolId;if(a){let e=n.get(a);e&&(e.isState&&e.parentNode?.name&&(t=`${e.parentNode.name} (${e.name})`),t=e.name)}return{symbolName:t}},PreviewValue:({nodeFields:e})=>(0,a.jsx)(a.Fragment,{children:e?.symbolName}),DisplayValue:({nodeFields:e})=>(0,a.jsx)(a.Fragment,{children:e?.symbolName}),index:0}]]),tm=0;function ty({nodeFields:e,isPreview:n=!1}){let t=(0,e7.u)(e.opacityVariable);return t&&n?(0,a.jsx)(a.Fragment,{children:t.name}):(0,a.jsx)(n_,{variableContainerClassName:ny,valueProps:{format:"percent",value:e.opacity,variableId:t?.node_id}})}function tv({nodeFields:e,isPreview:n=!1}){let t=(0,e7.u)(e.topLeftRadiusVariable),o=(0,e7.u)(e.topRightRadiusVariable),i=(0,e7.u)(e.bottomRightRadiusVariable),r=(0,e7.u)(e.bottomLeftRadiusVariable);return(0,a.jsx)(nT,{rawValues:[e.rectangleTopLeftCornerRadius,e.rectangleTopRightCornerRadius,e.rectangleBottomRightCornerRadius,e.rectangleBottomLeftCornerRadius],variables:[t,o,i,r],isPreview:n})}function tb({nodeFields:e,isPreview:n=!1}){return e.borderStrokeWeightsIndependent?(0,a.jsx)(t_,{nodeFields:e,isPreview:n}):(0,a.jsx)(tw,{nodeFields:e,isPreview:n})}function tw({nodeFields:e,isPreview:n}){let t=(0,e7.u)(e.strokeWeightVariable);return t&&n?(0,a.jsx)(a.Fragment,{children:t.name}):(0,a.jsx)(n_,{variableContainerClassName:ny,valueProps:{value:e.strokeWeight,variableId:t?.node_id,format:"pixels"}})}function t_({nodeFields:e,isPreview:n}){let t=(0,e7.u)(e.strokeTopWeightVariable),o=(0,e7.u)(e.strokeRightWeightVariable),i=(0,e7.u)(e.strokeBottomWeightVariable),r=(0,e7.u)(e.strokeLeftWeightVariable);return e?(0,a.jsx)(nT,{rawValues:[e.borderTopWeight,e.borderRightWeight,e.borderBottomWeight,e.borderLeftWeight],variables:[t,o,i,r],isPreview:n}):null}tx.forEach(e=>{e.index=tm++});let tk=e=>e.toLocaleString("en",{maximumFractionDigits:5,useGrouping:!1});function tj({value:e,variableAlias:n,isPreview:t,isTextProperty:o=!1}){let i=(0,e7.u)(n?.id),r=(0,e4.v4)(),l=(0,e8.qM)(r,"number"==typeof e?e:void 0,tk,{isTextProperty:o});return null===e?null:"mixed"===e?(0,D.tx)("fullscreen.mixed"):i&&t?(0,a.jsx)(a.Fragment,{children:i.name}):(0,a.jsx)(n_,{variableContainerClassName:ny,valueProps:{value:l,variableId:i?.node_id}})}function tC({value:e,variableAlias:n,isPreview:t,isTextProperty:o=!1}){let i=(0,e7.u)(n?.id),r=(0,e4.v4)(),l=(0,e8.qM)(r,"mixed"===e?void 0:e.value,tk,{isTextProperty:o});return"mixed"===e?(0,D.tx)("fullscreen.mixed"):i&&t?(0,a.jsx)(a.Fragment,{children:i.name}):"PIXELS"===e.units?(0,a.jsx)(n_,{variableContainerClassName:ny,valueProps:{format:"pixels",value:l,variableId:i?.node_id}}):(0,a.jsx)(n_,{variableContainerClassName:ny,valueProps:{format:"fig_number",value:e,variableId:i?.node_id}})}function tA({styleRef:e}){let n=(0,nz.f$)(e),t=(0,V.mJ)(n);return t?(0,a.jsx)(a.Fragment,{children:t.name}):null}var tI=t(555642),tN=(e=>(e[e.MANUAL=0]="MANUAL",e[e.CODEBASE_SUGGESTIONS=1]="CODEBASE_SUGGESTIONS",e[e.MANAGED_STRING=2]="MANAGED_STRING",e[e.CMS_BINDING=3]="CMS_BINDING",e))(tN||{}),tS=(e=>(e[e.ALIGNED=0]="ALIGNED",e[e.ABOVE=1]="ABOVE",e[e.BELOW=2]="BELOW",e))(tS||{}),tE=t(666875),tL=t(378820),tT=t(772523),tM=t(506192),tO=t(153730),tD=t(582351),tP=t(953013),tV=t(182380),tR=t(694819),tF=t(833737),tW=t(876315),tB=t(693035),tz=t(428436),tG=t(734561),tH=t(275033),tU=t(40903),t$=t(587277),tq=t(76365);let tK={type:tN.CMS_BINDING,useSharedHooksContext(){let e=(0,g.d4)(e=>e.mirror.appModel.currentPage),n=(0,tB.e)();return(0,k.wA)((e,n,t)=>t?(e.get(n)?(0,h.Uj)(e,n):[]).reduce((e,n)=>{let t=function(e){let n=[],t=i.Ez5?.dakotaBindings().nodeIdToAliasMap;if(!t)return n;let a=t.getCopy();return(0,h.hV)(e,e=>{let t=a.get(e.guid);if(t)for(let a of t)n.push({annotationType:tN.CMS_BINDING,nodeId:e.guid,uniqueId:`${e.guid}-cms-binding-${a.fieldSchemaId}`,meta:{textContent:e.characters.trim(),collectionId:a.collectionId,fieldSchemaId:a.fieldSchemaId,alwaysShow:!e.isInDakotaRepeater||e.isInFirstDakotaRepeaterChild()}})}),n}(n);return t.length>0?{...e,[n.guid]:t}:e},{}):{},e,n)},useRelevantTLFs:e=>Object.keys(e),useNewAnnotationsByTlf(e,n){let t=(0,g.d4)(e=>e.mirror.appModel.hoveredNode),a=(0,g.d4)(tq.Sh);return(0,o.useMemo)(()=>e.reduce((e,o)=>({...e,[o]:n[o]?.filter(e=>e.meta.alwaysShow||a.includes(e.nodeId)||t===e.nodeId)||[]}),{}),[e,n,t,a])},annotationWrapperClassName:"annotation--annotationWrapperCmsBinding--DSfDQ",AnnotationDisplayOverride({nodeInfo:e,isFadedOut:n}){let t=(0,g.d4)(tq.Sh).includes(e.nodeId),o=(0,x.UN)().get(e.nodeId);return o?(0,a.jsx)(tX,{isFadedOut:n,isSelected:t,collectionId:e.meta.collectionId,fieldSchemaId:e.meta.fieldSchemaId,node:o}):null}};function tX({isFadedOut:e,isSelected:n,collectionId:t,fieldSchemaId:r,node:l}){let s=(0,tG.X)({fieldSchemaStableId:r,collectionStableId:t}),{result:d,status:c}=(0,tz.iL)(t),u=(0,o.useMemo)(()=>"loaded"===c&&(0,tU.Dp)(d,r),[d,r,c]),p=(0,o.useCallback)(()=>{if("loaded"!==s.status)return;u&&f.l7.user("cms-clear-dangling-binding",()=>{l&&l.getNodesForCmsBinding().forEach(e=>{e.clearCmsBindingByFieldSchemaId(r)})});let e=s.fieldSchema?.fieldType;e&&i.Egt&&(i.Egt.clearSelection(),i.Egt.addToSelection([l.guid]),w.Y5.triggerActionEnumInUserEditScope(i.rcl.UNBIND_SELECTION,{fieldSchemaId:r,fieldType:e,removeBoundData:!1}))},[l,s.status,r,s.fieldSchema?.fieldType,u]);if("loaded"!==s.status||"loaded"!==c)return null;let g=u?(0,D.t)("cms_binding.missing_binding"):s.fieldSchema.name,h=u?(0,a.jsx)(tF.R,{}):function(e){if(!(0,tH.K5)(e))return null;switch(e){case tH._j.PLAIN_TEXT:return(0,a.jsx)(tO.I,{});case tH._j.RICH_TEXT:return(0,a.jsx)(tD.G,{});case tH._j.LINK:case tH._j.SLUG:return(0,a.jsx)(tP.N,{});case tH._j.IMAGE:return(0,a.jsx)(tV._,{});case tH._j.DATE:return(0,a.jsx)(tR.p,{})}}(s.fieldSchema.fieldType);return(0,a.jsxs)(ed.E,{className:T()(nt,nl,{[nv]:n,[nd]:e,"annotation--viewAnnotationDangling--FQwP-":u}),onClick:()=>{tT.wr(),(0,t$.S)("annotations"),tT.Dh(l.getNodesForCmsBinding(t).map(e=>e.guid))},children:[h,(0,a.jsx)("div",{className:"annotation--cmsBindingLabel--bcQef",children:g}),(0,a.jsx)(ed.E,{className:"annotation--unbind--neSDK",onClick:p,children:(0,a.jsx)(tW.k,{})})]})}let tQ=(0,l.eU)(new Map),tY=((0,l.eU)(null,(e,n,{nodeId:t,suggestions:a})=>{let o=new Map(e(tQ));0===a.length?o.delete(t):o.set(t,a),n(tQ,o)}),{nodeSuggestionsByTlf:new Map,nodeSuggestionsByGuid:new Map});var tZ=t(469243),tJ=t(366815);function t0({nodeId:e,nodeFields:n,isFadedOut:t,suggestions:o}){let i=(0,V.uQ)()===e,r=e=>{e&&(tT.wr(),(0,t$.S)("annotations"),tT.Dh([e]))},l=o.slice(0,3).map(e=>e.name).join(", ");return(0,a.jsxs)(tJ.D8,{className:T()(nt,nl,{[nv]:i,[nd]:t}),role:"button",tabIndex:0,onMouseDown:()=>{i||(n.firstChildGuid?r(n.firstChildGuid):r(e))},"data-testid":"annotationDisplay",recordingKey:`viewAnnotationContainer-${n.name}`,children:[(0,a.jsx)("div",{className:"annotation--codeConnectIcon--nFdfw",children:(0,a.jsx)(tZ.s,{})}),(0,a.jsx)("div",{className:"annotation--codeConnectLabel--Pd3TS",children:(0,a.jsx)("span",{className:"annotation--codeConnectLabelName--d-Hdu",children:l})})]})}let t1={type:tN.CODEBASE_SUGGESTIONS,useSharedHooksContext:()=>(function(){let e=(0,l.md)(tQ),n=(0,d.eY)();if(!(0,r.kc)().dt_ccv2_on_canvas)return tY;let t=new Map,a=new Map;for(let[o,i]of e.entries()){let e=n.get(o);if(!e)continue;let r=e.findContainingTopLevelFrameOrSelf(),l={nodeId:o,node:e,tlfGuid:r,possibleSuggestions:i};t.set(o,l),r&&(a.has(r)||a.set(r,[]),a.get(r)?.push(l))}return{nodeSuggestionsByTlf:a,nodeSuggestionsByGuid:t}})(),useRelevantTLFs:({nodeSuggestionsByTlf:e})=>Array.from(e.keys()),useNewAnnotationsByTlf(e,{nodeSuggestionsByTlf:n}){let t={};for(let[e,a]of n.entries())t[e]=a.map(e=>({nodeId:e.nodeId,uniqueId:`${e.nodeId}-codebase-suggestions`,annotationType:tN.CODEBASE_SUGGESTIONS,meta:{nodeSuggestions:e.possibleSuggestions}}));return t},annotationWrapperClassName:"annotation--annotationWrapperCodebaseSuggestions--1G1LW",AnnotationDisplayOverride({nodeInfo:e,isFadedOut:n}){var t;let o=(t=e.nodeId,(0,k.wA)((e,n)=>{let t=e.get(n);return t?{firstChildGuid:t.childrenNodes[0]?.guid,tlfNodeId:t.findContainingTopLevelFrameOrSelf(),type:t.type,name:t.name}:null},t));return o?(0,a.jsx)(t0,{nodeId:e.nodeId,nodeFields:o,isFadedOut:n,suggestions:e.meta.nodeSuggestions}):null}};var t2=t(141692),t3=t(58212),t5=t(832832),t6=t(984374),t9=t(31786);let t4=(0,l.Iz)(e=>(0,l.mg)((0,l.eU)(n=>{if(!e)return null;let t=n(t6.Mk[t9.PW.MANAGED_STRING].local),a=n(t6.Mk[t9.PW.MANAGED_STRING].subscribed);return t[e]??a[e]??null}),e=>e)),t8={type:tN.MANAGED_STRING,useSharedHooksContext(){let e=(0,g.d4)(e=>e.mirror.appModel.currentPage),n=(0,z.m0)();return(0,k.wA)((e,n,t)=>(0,r.kc)().cheddar&&(0,r.kc)().cheddar_annotations&&t?(e.get(n)?(0,h.qT)(e,n):[]).reduce((e,n)=>{let t=function e(n){return n.childrenNodes.flatMap(n=>{if(n.visible){if((0,t5.go)(n)){let e=function(e){let n=(0,t5.gk)(e);return n?{managedStringId:n.value.managedStringId}:null}(n);if(!e)return;return{annotationType:tN.MANAGED_STRING,nodeId:n.guid,uniqueId:`${n.guid}-${nZ.oW.toString(e.managedStringId)}`,meta:{...e}}}return e(n)}}).filter(N.Vq)}(n);return t.length>0?{...e,[n.guid]:t}:e},{}):{},e,n)},useRelevantTLFs:e=>Object.keys(e),useNewAnnotationsByTlf:(e,n)=>e.reduce((e,t)=>({...e,[t]:n[t]||[]}),{}),annotationWrapperClassName:"annotation--annotationWrapperManagedString--RTskR",AnnotationDisplayOverride({nodeInfo:e,isFadedOut:n}){let t=(0,V.uQ)()===e.nodeId,o=function(e){let n=(0,l.md)(t4(e));return n?.managedStringData.key}(e.meta.managedStringId);return o?(0,a.jsx)(t7,{isFadedOut:n,isSelected:t,nodeId:e.nodeId,stringKey:o}):null}};function t7({isFadedOut:e,isSelected:n,nodeId:t,stringKey:o}){let r=(0,g.wA)(),l=(0,m.hC)(),s=e=>{e&&(tT.wr(),(0,t$.S)("annotations"),tT.Dh([e]),tT.tw()?.getCopy()!==i._gJ.STRING_MANAGEMENT&&(0,tT.ax)(i._gJ.STRING_MANAGEMENT))};return(0,a.jsxs)("div",{className:T()(nt,nl,{[nv]:n,[nd]:e}),children:[(0,a.jsx)(ed.E,{onClick:()=>s(t),className:T()(nw,"annotation--managedStringLabel--fWb5O"),children:o}),(0,a.jsx)(ae,{"aria-label":(0,D.t)("inspect_panel.copy"),onClick:()=>{l("string_management.annotations.copy_key",{stringKey:o,nodeId:t}),navigator.clipboard.writeText(o).then(()=>{r(t3.F.enqueue({message:(0,D.t)("string_translation_management.copied_to_clipboard",{stringKey:o})}))})},htmlAttributes:{"data-tooltip-type":eL.Ib.TEXT,"data-tooltip":(0,D.t)("general.back")},children:(0,a.jsx)(t2.O,{})})]})}let ae=(0,o.forwardRef)(({children:e,variant:n,...t},o)=>(0,a.jsx)(ed.E,{ref:o,...t,className:T()(nw,"annotation--iconButton--w7kfn","annotation--ghost--thK4p"),children:(0,a.jsx)("span",{"aria-hidden":!0,className:nf,children:e})}));ae.displayName="IconButton";let an=[t1,t8,tK],at=an.reduce((e,n)=>("type"in n&&(e[n.type]=n),e),{}),aa=(0,M.jz)("15px"),ao=o.memo(function({lineWidth:e,lineHeight:n,lineAlignment:t,isLeftAligned:o,isMinimized:i}){let r="",l=Math.min(20,e),s=Math.min(20,n);return t===tS.ALIGNED?r=`M 0 ${n/2} h ${e}`:t===tS.ABOVE?r=o?`
        M 0 0
        h ${e-l}
        q ${l} 0 ${l} ${s}
        v ${n-s}
      `:`
        M ${e} 0
        h -${e-l}
        q -${l} 0 -${l} ${s}
        v ${n-s}`:t===tS.BELOW&&(r=o?`
        M 0 ${n}
        h ${e-l}
        q ${l} 0 ${l} -${s}
        v -${n-s}
      `:`
        M ${e} ${n}
        h -${e-l}
        q -${l} 0 -${l} -${s}
        v -${n-s}
      `),(0,a.jsx)("svg",{width:e+2*aa,height:n+2*aa,className:T()(no,{"annotation--annotationLineLeftAligned--W-1DZ":o,"annotation--annotationLineBelowNode--JeafT":t===tS.BELOW}),children:(0,a.jsxs)("g",{transform:`translate(${aa}, ${aa})`,children:[i&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("circle",{className:"annotation--annotationLineStartDot--x6RNc",cx:o?-6:e+6,cy:t===tS.ABOVE?0:n,r:4,strokeWidth:"4"}),(0,a.jsx)("circle",{className:"annotation--annotationLineStartInnerDot--aw58q",cx:o?-6:e+6,cy:t===tS.ABOVE?0:n,r:1,strokeWidth:"0"})]}),(0,a.jsx)("path",{d:r,strokeWidth:"var(--line-width-scale)",fill:"none",strokeDasharray:"calc(var(--line-width-scale) * 3) calc(var(--line-width-scale) * 2)"}),(0,a.jsx)("circle",{className:ni,cx:o?e:0,cy:t===tS.ABOVE?n:0,strokeWidth:"0"})]})})});function ai(e){return(0,a.jsx)(s.u,{label:"AnnotationWrapper",children:(0,a.jsx)(ar,{...e})})}function ar({nodeId:e,annotationId:n,setDimensions:t,isAnnotationFocused:s,annotationType:c,lineColor:u,children:g,offsetX:f,offsetY:h,lineWidth:x,lineHeight:y,lineAlignment:v,isLeftAligned:b,shouldMinimize:w,shouldDelayHover:_,shouldHide:j,isEditingAnnotation:C,isInCentralTLF:I}){let N=(0,m.IL)(),S=(0,o.useRef)(null),[E,L]=(0,o.useState)(!1),M=(0,A.LZ)(),O=(0,d.dH)(),D=(0,V.Tv)(),P=D.includes(e),{data:R}=(0,tM.BK)(ea),F=R?.annotationId===n,[W]=(0,tE.A)(E,60),B=P||F||(_?E&&(W||w):E),z=(0,l.md)(p.m),G=(0,k.wA)((e,n)=>{let t=e.get(n);return t?{annotationsLength:t.annotations.length,nodeType:t.type,absoluteBoundingBox:t.absoluteBoundingBox}:null},e);(0,tL.wY)(w?void 0:S,e=>{e&&t(n,e)});let{annotationsLength:H,nodeType:U}=G??{},$=O===i.NLJ.ANNOTATE&&!E&&D.length>0&&!P,q=w&&!C&&!s&&!E,K=(0,o.useCallback)(()=>{null===z&&(tT.Uc(e),q&&!E&&N("hover_minimized_annotation",{nodeId:e,nodeType:U}),L(!0))},[z,e,U,q,E,N]),X=(0,o.useCallback)(()=>{L(!1)},[]),Q=!j;c===tN.MANUAL&&(Q=C||Q&&(P||!!H));let Y=(0,o.useMemo)(()=>{let e={transform:`translate(${f}px, calc(${h}px - 50%))`,zIndex:I&&!B?10:void 0};return(!P||C)&&u?{...e,"--annotation-line-color":u,"--annotation-dot-border-color":u}:e},[f,h,P,C,u,I,B]);return(0,a.jsx)("div",{className:T()("annotation--annotationWrapper--pKMw2",at[c]?.annotationWrapperClassName,{"annotation--wrapperMinimized--UOExu":q&&!E,[na]:C,"annotation--annotationWrapperSelected--ffb0X":P,annotationWrapperForcedHover:B||s&&!C,"annotation--transitionScaling--eD821":E!==W&&!s&&!C,"annotation--shouldHideEmptyAnnotations--WXr4h":(0,r.kc)().dt_component_annotations}),style:Y,"data-testid":"annotationWrapper",children:Q&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(ao,{lineWidth:x,lineHeight:y,lineAlignment:v,isLeftAligned:b,isMinimized:q}),(0,a.jsxs)("div",{ref:S,onMouseOut:X,onMouseOver:K,className:T()({"annotation--annotationLeftAligned--FHQRp":b,"annotation--annotationRightAligned--VrH8e":!b}),"data-testid":`annotation-${n}`,children:[(0,a.jsx)("div",{className:T()("annotation--annotationHoverTarget--4y3Xc",{"annotation--annotationHoverTargetLeftAligned--G1twU":b})}),M&&(!q||E)&&g($)]})]})})}var al=t(954184);let as=(0,eE.Fu)("has_opened_annotation_visibility_learn_more_link");function ad({nodeId:e,annotationId:n,viewportInfo:t,setDimensions:r,annotationIndex:s,offsetX:d,offsetY:c,lineWidth:u,lineHeight:g,lineAlignment:y,isLeftAligned:b}){let _=function(){let e=(0,m.IL)(),{Sprig:n}=(0,eC.A)(),t=!!(0,v.hA)(),a=(0,z.m0)(),i=(0,z.Em)(),r=(0,$.XR)();return o.useCallback((o,l,s,d)=>{f.l7.user(s?"edit-annotation":"create-annotation",()=>{s?o.updateAnnotation(d,l):o.addAnnotation(l);let c=(0,h.kh)((0,x.UN)(),o.guid),u=l.categoryId?r.find(e=>e.id===l.categoryId):null,p={nodeType:o.type,nodeId:o.guid,tlfId:c?.guid??o.guid,hasText:!!l.label,numProperties:l.properties.length,isDevModeFocusView:t,isDevMode:a,isDesignMode:i,category:u?(0,$.uA)(u):void 0,annotationId:d};s?e("edit_annotation",p):(e("create_annotation",p),n("track","create_annotation",{isDevMode:a,isDevModeFocusView:t,isDesignMode:i})),w.Y5.triggerAction("commit")})},[n,e,t,a,i,r])}(),j=C(),A=(0,l.Xr)(p.m),I=(0,k.wA)((e,n)=>e.get(n)?.annotations,e),N=(0,$.XR)({initializeIfNull:!0}),S=I?.[s],[E,L]=o.useState(S?.label??""),[T,M]=o.useState(S?.properties??[]),[O,D]=o.useState(()=>S?N.find(e=>e.id===S.categoryId)?.id??null:null),P=(0,o.useMemo)(()=>{if(!O)return;let e=N.find(e=>e.id===O);return e&&(0,$.FQ)(e)},[O,N]);(0,o.useEffect)(()=>{O&&D(N.find(e=>e.id===O)?.id??null)},[N,O]);let V=o.useCallback(()=>{let t=!!S&&(""!==S.label||S.properties.length>0||null!==O),a=0===("lexical"===(0,em.j_)(E)?(0,em.El)(E):(0,ex.At)(E)).length;if(a&&0===T.length&&null===O)S&&j(e,s);else{let o=(0,x.UN)().get(e);o&&(_(o,{label:a?"":E,properties:T,categoryId:O},t,s),i.Ez5?.editorState().focusedAnnotationId.set(n))}A(null)},[S,E,T,A,j,e,s,_,O,n]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(ag,{viewportInfo:t,onPointerDown:V}),(0,a.jsx)(ai,{annotationId:n,annotationType:tN.MANUAL,isAnnotationFocused:!0,isEditingAnnotation:!0,isLeftAligned:b,lineAlignment:y,lineColor:P,lineHeight:g,lineWidth:u,nodeId:e,offsetX:d,offsetY:c,setDimensions:r,shouldDelayHover:!1,shouldHide:!1,shouldMinimize:!1,children:()=>(0,a.jsx)(ac,{nodeId:e,saveAnnotation:V,inputText:E,setInputText:L,inputProperties:T,setInputProperties:M,categoryId:O,setInputCategoryId:D,annotationIndex:s})},n)]})}function ac({nodeId:e,saveAnnotation:n,inputText:t,setInputText:r,inputProperties:s,setInputProperties:d,categoryId:c,setInputCategoryId:u,annotationIndex:p}){let f=(0,g.wA)(),{Sprig:y}=(0,eC.A)(),b=(0,m.IL)(),w=(0,z.Em)(),_=!!(0,v.hA)(),j=(0,z.m0)(),{getTriggerProps:A,manager:I}=ei.b(),{Dropdown:N,isDropdownShown:S,dropdownTargetRef:E,toggleDropdown:L}=(0,eM.B)("annotation-property-selector-dropdown"),M=C(),O=o.useRef(null),P=o.useId(),V=(0,$.XR)(),R=(0,k.Fk)((e,n)=>e.get(n)?.type||null,e),F=(0,k.wA)((e,n,t)=>{let a={},o=e.get(n);if(o)for(let e of t)(0,tI.J)(o,e.type,!0)&&(a[e.type]=!0);return a},e,au),{availableProperties:B,selectedProperties:G}=o.useMemo(()=>{let e=[],n=[];for(let t of au)s.some(e=>e.type===t.type)?n.push(t):F[t.type]&&e.push(t);return{availableProperties:e,selectedProperties:n}},[s,F]),H=(0,k.wA)((e,n,t)=>{let a=e.get(n);return t.map(n=>n.config.extractNodeFields(a,e))},e,B);o.useEffect(()=>{b("show_annotation_dialog",{nodeId:e,nodeType:R})},[b,R,e]);let U=o.useCallback(()=>{O.current?.focus()},[]),q=o.useCallback(e=>{d([...s,{type:e}])},[d,s]);function K(e){d(s.filter(n=>n.type!==e)),U()}let Q=(0,o.useCallback)(n=>{let a=(0,x.UN)().get(e),o=c?V.find(e=>e.id===c):null,r=o?(0,$.uA)(o):null,l=n?V.find(e=>e.id===n):null,d=l?(0,$.uA)(l):null;if(a){let e=(0,h.kh)((0,x.UN)(),a.guid);b("select_annotation_category",{nodeId:a.guid,nodeType:a.type,tlfId:e?.guid??a.guid,hasText:!!t,numProperties:s.length,isDevModeFocusView:_,isDevMode:j,isDesignMode:w,newCategoryLabel:d,oldCategoryLabel:r,isPreset:l?l.preset!==i.Bll.NONE:null,annotationId:p}),y("track","select_annotation_category",{isDevMode:j,isDevModeFocusView:_,isDesignMode:w})}u(n)},[u,b,e,t,s,_,j,w,V,c,y,p]),[ee,en]=o.useState(!1),et=(0,eh.v_)("createAnnotation","keydown",(0,o.useCallback)(e=>{if(!I.isOpen&&!S){if("Escape"===e.key)n();else if("ArrowDown"===e.key){let n=e.ctrlKey||e.metaKey,t=e.shiftKey;n&&!t&&(en(!0),L())}}},[I.isOpen,S,n,L]));o.useEffect(()=>(document.addEventListener("keydown",et),()=>{document.removeEventListener("keydown",et)}),[et]);let ea=ej.qP("annotationLabelInput","submit",r),eo=ej.v_("annotationLabelInput","keydown",e=>{e?.stopPropagation(),n()}),ef=(0,o.useCallback)(({html:e})=>{ea(e)},[ea]),ex=(0,o.useCallback)(n=>{if(n.stopPropagation(),n.preventDefault(),!I.isOpen){let n=(0,x.UN)().get(e);if(n){let e=(0,h.kh)((0,x.UN)(),n.guid);b("click_annotation_category_picker",{nodeId:n.guid,nodeType:n.type,tlfId:e?.guid??n.guid,hasText:!!t,numProperties:s.length,isDevModeFocusView:_,annotationId:p}),y("track","click_annotation_category_picker",{isDevMode:j,isDevModeFocusView:_,isDesignMode:w})}}I.setOpen(!0)},[I,t,s,_,j,w,e,b,p,y]),ev=(0,o.useMemo)(()=>V.map(e=>({id:e.id,label:(0,$.uA)(e),color:(0,$.FQ)(e)}))??[],[V]),eb=(0,o.useMemo)(()=>V.find(e=>e.id===c),[V,c]),ew=o.useRef(null),e_=ew.current&&ew.current.scrollHeight>ew.current.clientHeight,eI={"--annotation-category-color":eb?(0,$.FQ)(eb)??"var(--color-bg)":"var(--color-bg)"},eE=(0,o.useCallback)(()=>{b("click_edit_annotation_categories",{nodeId:e,nodeType:R,isDevModeFocusView:_}),f(eN.to({type:e2,data:{recordingKey:"annotationCategoriesEditWindow"}})),I.setOpen(!1)},[f,b,e,R,_,I]),eO=(0,Y.q5)(),eD=(0,o.useCallback)(()=>{if(null===eO)return;let n=(0,Z.jN)({file:eO,nodeId:e,isDevHandoff:j});f(X.S({fileKey:eO.key,url:n,source:J.d.ANNOTATION_CONTEXT_MENU,visualBellMessageOverride:(0,D.t)("dev_handoff.annotations.copied_link_to_clipboard")}))},[f,eO,e,j]),eP=(0,o.useMemo)(()=>[...0===B.length?[{name:"no-properties",displayText:(0,D.t)("dev_handoff.annotations.all_properties_added"),displayTextClassName:nb,disabled:!0}]:[],...B.reduce((n,t,o,i)=>(n.push({name:`property-${o}`,displayText:t.config.label(),icon:(0,a.jsx)(t.config.Icon,{nodeId:e}),className:"annotation--propertyMenuOption--9-5ow",sideText:(0,a.jsx)(t.config.PreviewValue,{nodeFields:H[o]}),rightJustifySideText:!0,callback:()=>q(t.type),recordingKey:`createAnnotationOptionButton-${t.type}`}),o<i.length-1&&t.config.category!==i[o+1]?.config.category&&n.push({separator:!0,displayText:""}),n),[])],[B,H,e,q]),eV=(0,o.useCallback)(()=>{n()},[n]),{manager:eR,getTriggerProps:eF}=er.b({offset:{mainAxis:4}}),eW=(0,l.md)(as),[eB,ez]=(0,o.useState)(!1),eG=w&&!eB;(0,o.useEffect)(()=>{"loaded"===eW.status&&ez(void 0!==eW.data)},[eW]);let eH=(0,o.useCallback)(()=>{f(eS.b({has_opened_annotation_visibility_learn_more_link:!0}))},[f]),eU=(0,a.jsxs)(ei.bL,{manager:eR,children:[(0,a.jsx)(el.d,{"aria-label":(0,D.t)("dev_handoff.annotations.more_actions"),recordingKey:"createAnnotationMoreActions",htmlAttributes:{"data-tooltip":(0,D.t)("dev_handoff.annotations.more_actions"),"data-tooltip-type":eL.Ib.TEXT},...eF({}),children:(0,a.jsx)(ep.J,{})}),(0,a.jsxs)(ei.mc,{children:[(0,a.jsxs)(ei.YJ,{children:[(0,a.jsx)(ei.q7,{onClick:eD,children:(0,D.t)("dev_handoff.annotations.copy_link")}),(0,a.jsx)(ei.q7,{onClick:()=>{M(e,p)},children:(0,D.t)("dev_handoff.annotations.delete")})]}),eG&&(0,a.jsxs)("div",{className:"annotation--visibilityDisclaimer--oQFzZ text--fontNeg11--StdFq text--_fontBase--QdLsd text--_negText--j9g-L",children:[(0,a.jsx)("p",{children:(0,D.t)("dev_handoff.annotations.visibility_disclaimer")}),(0,a.jsx)(es.N,{href:"https://help.figma.com/hc/articles/20774752502935-Add-measurements-and-annotate-designs-in-Dev-Mode",newTab:!0,onClick:eH,children:(0,D.t)("dev_handoff.annotations.visibility_learn_more")})]})]})]});return(0,a.jsx)(eT.vL,{name:"create-annotation",focusOnMount:!0,handleKeyDown:e=>{let{event:t}=e;"Escape"===t.key&&(e.accept(),n())},children:(0,a.jsxs)("div",{ref:E,"data-testid":"annotationDialog",children:[(0,a.jsxs)("div",{className:T()("annotation--createAnnotation--tWKSM annotation--_annotationBase--MPByC",eb?nr:void 0,W.Qx,W.Uu),style:eI,children:[(0,a.jsxs)("div",{className:"annotation--createAnnotationHeader--thXfu",children:[(0,a.jsx)("div",{className:"annotation--headerRowLeft--iIqjN",children:(0,a.jsxs)(ei.bL,{manager:I,children:[(0,a.jsxs)(ed.E,{className:T()("annotation--categorySelectorButton--q2A6p",{[nc]:eb&&(0,$.cD)(eb),[nr]:!!eb}),"data-tooltip-type":eL.Ib.TEXT,"data-tooltip":(0,D.t)("dev_handoff.annotations.category_selector_tooltip"),"aria-label":(0,D.t)("dev_handoff.annotations.category_selector_tooltip"),recordingKey:"createAnnotationCategorySelectorButton",...A({onClick:ex,role:"combobox"}),children:[(0,a.jsx)("span",{className:"annotation--categorySelectorButtonLabel--xGX7w annotation--_ellipsis--8F1VE",children:eb?(0,$.uA)(eb):(0,D.t)("dev_handoff.annotations.no_category_option_label")}),(0,a.jsx)(eA.B,{className:"annotation--caret--noLOu",svg:eX.A})]}),(0,a.jsxs)(ei.mc,{"data-testid":"createAnnotationCategorySelector",children:[(0,a.jsx)(ei.YJ,{children:(0,a.jsx)(ec.H_,{checked:null===c,onChange:()=>Q(null),recordingKey:ej.Pt("createAnnotationCategorySelector","category-option","no-category"),children:(0,a.jsx)("span",{className:nb,children:(0,D.tx)("dev_handoff.annotations.no_category_option_label")})})}),ev.length>0&&(0,a.jsx)(ei.YJ,{children:ev.map(e=>(0,a.jsxs)(ec.H_,{checked:c===e.id,onChange:()=>Q(e.id),recordingKey:ej.Pt("createAnnotationCategorySelector","category-option",e.label),children:[(0,a.jsx)(ei.Q$,{children:(0,a.jsx)("div",{className:"annotation--categoryOptionIcon--jg6bS",children:(0,a.jsx)("div",{className:"annotation--colorCircle--i6hsL",style:{backgroundColor:e.color??void 0}})})}),e.label]},e.id))}),(0,a.jsx)(ei.YJ,{children:(0,a.jsx)(ei.q7,{onClick:eE,recordingKey:ej.Pt("createAnnotationCategorySelector","category-option","edit-categories"),children:(0,D.t)("dev_handoff.annotations.edit_categories_option_label")})})]})]})}),(0,a.jsxs)("div",{className:"annotation--headerRowRight--5h3Tr",children:[eU,(0,a.jsx)(eu.K,{"aria-label":(0,D.t)("general.close"),recordingKey:"closeAnnotationDialog",onClick:eV,children:(0,a.jsx)(eg.X,{})})]})]}),(0,a.jsxs)("div",{className:ns,children:[(0,a.jsxs)("div",{className:T()(nl,{"annotation--contentContainerNoProperties--pc2WE":0===G.length}),children:[(0,a.jsxs)("div",{ref:ew,className:T()("annotation--labelEditor--xNx12",{[W.ZR]:e_}),dir:"auto",children:[(0,a.jsx)("label",{id:P,style:{display:"none"},children:(0,D.t)("dev_handoff.annotations.add_annotation")}),(0,a.jsx)(ey.A,{anchorElemOverride:ew.current,ariaLabelledBy:P,innerRef:O,lexicalContentClassName:"annotation_lexical_editor--contentEditable--EVm11",namespace:"annotation-dialog-lexical-editor",onSave:ef,placeholder:(0,a.jsx)("div",{className:T()("annotation_lexical_editor--placeholder--pPwLm",{"annotation_lexical_editor--withCategory--bUCqy":!!eb}),children:(0,D.t)("dev_handoff.annotations.add_annotation")}),plugins:[(0,a.jsx)(ek,{onEnterPressed:eo},0)],value:t,valueFormat:(0,em.j_)(t)})]}),G.length>0&&(0,a.jsx)("div",{className:nu,children:G.map(n=>(0,a.jsx)(ap,{onRemoveProp:K,nodeId:e,property:n},`selected-${n.type}`))})]}),(0,a.jsx)("div",{className:"annotation--createAnnotationFooter--wx9JM",children:(0,a.jsxs)(ed.E,{className:T()("annotation--pinPropertyButton--OTLW3",{"annotation--pinPropertyButtonActive---nkvq":S}),actionOnPointerDown:!0,onClick:()=>{en(!1),L()},"aria-label":(0,D.t)("dev_handoff.annotations.pin_properties_tooltip"),"data-tooltip-type":eL.Ib.TEXT,"data-tooltip":(0,D.t)("dev_handoff.annotations.pin_properties_tooltip"),recordingKey:"createAnnotationPinPropertyButton",children:[(0,a.jsx)(eA.B,{className:"annotation--pinPropertyButtonIcon--dgnI0",svg:al.A}),(0,D.tx)("dev_handoff.annotations.pin_properties_label")]})})]})]}),(0,a.jsx)(N,{activatePathOnMount:[ee&&eP.length>0?eP[0].displayText??"":""],autofocusPrevOnDismount:!0,dataTestId:"createAnnotationPropertySelector",focusOnMount:ee,items:eP,minWidth:220,onDismissMenu:U,onDropdownHidden:U,preventEventCapture:!0,recordingKey:"createAnnotationPropertySelector",rootAndSubmenuMaxWidth:220,shouldUsePortal:!0,showPoint:!1})]})})}let au=Array.from(tx.entries()).map(([e,n])=>({type:e,config:n}));function ap({nodeId:e,onRemoveProp:n,property:t}){let o=t.config.DisplayValue,{canHaveValue:i,nodeFields:r}=(0,k.wA)((e,n)=>{let a=e.get(n);if(!a)return{canHaveValue:!1,nodeFields:null};let o=(0,tI.J)(a,t.type,!1);return o?{canHaveValue:o,nodeFields:t.config.extractNodeFields(a,e)}:{canHaveValue:o,nodeFields:null}},e);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{className:"annotation--selectedPropertyDisplayLabel--AtFEJ",children:t.config.label()}),(0,a.jsxs)("div",{className:"annotation--selectedPropertyValueWrapper--OyM0X",children:[(0,a.jsx)("span",{className:T()("annotation--selectedPropertyValue--wwu2U",{[np]:!i}),children:i?(0,a.jsx)(o,{nodeFields:r}):(0,D.tx)("dev_handoff.annotations.no_value")}),(0,a.jsx)("span",{className:"annotation--selectedPropertyDelete--DMdrA",children:(0,a.jsx)(eu.K,{recordingKey:`removeAnnotation${t.type}`,htmlAttributes:{"data-tooltip-type":eL.Ib.TEXT,"data-tooltip":(0,D.t)("dev_handoff.annotations.remove_property")},"aria-label":(0,D.t)("dev_handoff.annotations.remove_property"),onClick:f.nc.user("remove-annotation",()=>{n(t.type)}),children:(0,a.jsx)(ef.w,{})})})]})]})}function ag({viewportInfo:e,onPointerDown:n}){return(0,a.jsx)(eI.n.recordableDiv,{className:`${na} ${W.Dm} ${W.Uu}`,recordingKey:"annotationDialogBackground",style:{position:"absolute",left:e.x,top:e.y,width:e.width,height:e.height},onPointerDown:n})}var af=t(264993),ah=t(827259),ax=t(147046),am=t(469191),ay=t(893178);let av=o.memo(function({nodeId:e,annotationId:n,annotationType:t,annotationMeta:r,setDimensions:l,shouldHide:s,isEditingAnnotation:d,offsetX:c,offsetY:u,lineWidth:p,lineHeight:g,lineAlignment:f,lineColor:h,isLeftAligned:x,shouldMinimize:m,shouldDelayHover:y,isInCentralTLF:v}){let b=(0,E.k9)(()=>({nodeId:e,annotationType:t,meta:r,uniqueId:n}),[e,t,r,n]),w=(0,G.NW)(),_=w===n,k=o.useCallback(e=>{e?i.Ez5.editorState().focusedAnnotationId.set(n):e||w!==n||i.Ez5.editorState().focusedAnnotationId.set(null)},[n,w]),j=o.useCallback(e=>{let t=at[b.annotationType];if(t&&"AnnotationDisplayOverride"in t){let n=t.AnnotationDisplayOverride;if(n)return(0,a.jsx)(n,{nodeInfo:b,isFadedOut:e,isFocused:_,onFocusChange:k})}return b.annotationType===tN.MANUAL?(0,a.jsx)(ab,{annotationId:n,nodeInfo:b,isFadedOut:e,isFocused:_,onFocusChange:k}):null},[b,_,k,n]);return(0,a.jsx)(ai,{annotationId:n,annotationType:t,isAnnotationFocused:_,isEditingAnnotation:d,isInCentralTLF:v,isLeftAligned:x,lineAlignment:f,lineColor:h,lineHeight:g,lineWidth:p,nodeId:e,offsetX:c,offsetY:u,setDimensions:l,shouldDelayHover:y,shouldHide:s,shouldMinimize:m,children:j},n)}),ab=o.memo(function({annotationId:e,nodeInfo:n,isFadedOut:t,isFocused:r,onFocusChange:s}){let{nodeId:c,meta:{annotationIndex:u}}=n,f=(0,m.IL)(),h=(0,V.uQ)(),x=(0,d.dH)(),y=h===c,[b,w]=(0,l.fp)(p.m),_=(0,o.useRef)(null),j=(0,G.NW)(),I=C(),N=(0,o.useMemo)(()=>i.w3z.isReadOnly(i.SES.ANNOTATIONS),[]),S=(0,R.Kv)(),E=(0,A.s9)(),L=(0,G.E_)(),M=!!(0,v.hA)(),O=(0,g.wA)(),D=(e,n)=>{e&&(tT.wr(),(0,t$.S)("annotations"),n?(i.w3z.setEnableZoomToSelection(!1),tT.Dh([e]),i.w3z.setEnableZoomToSelection(!0)):tT.Dh([e]))},P=(0,o.useRef)(r);P.current=r,(0,o.useEffect)(()=>()=>{P.current&&i.Ez5?.editorState().focusedAnnotationId.set(null)},[]),(0,o.useEffect)(()=>{S&&(i.Ez5?.editorState().focusedAnnotationId.set(null),w(null))},[S,w]);let F=ej.v_(`annotationDisplay-${e}`,"keydown",o.useCallback(e=>{!N&&r&&null===b&&L===af.AD&&("Backspace"===e.key||"Delete"===e.key?E&&(I(c,u),_.current?.blur()):"Enter"===e.key?E&&(e.preventDefault(),w(u)):"Escape"===e.key?_.current?.blur():"Tab"!==e.key&&(0,ay.f7)(e))},[u,I,b,r,N,c,L,w,E]));o.useEffect(()=>(document.addEventListener("keydown",F),()=>document.removeEventListener("keydown",F)),[F]);let W=o.useCallback(()=>{let e=window.getSelection()?.toString()||"";e&&(0,ah.Dk)(e,{withLineBreaks:!0})},[]);(0,o.useEffect)(()=>{let e=_.current?.getRootNode()?.activeElement??null;r&&e!==_.current&&_.current?.focus(),r||e!==_.current||_.current?.blur()},[r]);let B=o.useCallback(n=>{n.preventDefault(),n.stopPropagation(),O(ax.j7({type:ea,data:{position:{left:n.clientX,bottom:n.clientY},nodeId:c,annotationIndex:u,annotationId:e}}))},[O,c,u,e]),z=(0,$.XR)(),H=(0,k.wA)((e,n)=>{let t=e.get(n);return t?{annotations:t.annotations,nodeType:t.type,nodeName:t.name}:null},c);if(!H||0===H.annotations.length)return null;let{annotations:U,nodeType:q,nodeName:K}=H,X=U[u];if(!X)return null;let{label:Q,properties:Y}=X,Z=z.find(e=>e.id===X.categoryId),J={"--annotation-category-color":Z?(0,$.FQ)(Z)??"var(--color-bg)":"var(--color-bg)"},ee=(0,em.j_)(X.label);return(0,a.jsxs)(tJ.D8,{className:T()(nt,{[nr]:!!Z,"annotation--viewAnnotationNodeSelected--DfJ3t":y&&null===j&&null===b,[nd]:t,"annotation--onlyCategory--X9mU1":!Q&&0===Y.length&&!!Z}),"data-testid":"annotationDisplay",forwardedRef:_,onBlur:()=>s(!1),onContextMenu:B,onCopy:W,onDoubleClick:()=>{E&&(y||D(c,!1),w(u))},onFocus:()=>s(!0),onMouseDown:e=>{r&&y||(D(c,(0,am.i)(e)),w(null),f("click_annotation_content",{nodeId:c,nodeType:q,hasText:!!X.label,numProperties:X.properties.length,currentTool:x,isDevModeFocusView:M}),_.current?.focus())},recordingKey:`viewAnnotationContainer-${K}-${u}`,role:"button",style:J,tabIndex:0,children:[Z&&(0,a.jsx)("div",{className:"annotation--annotationHeader--GXEj5",children:(0,a.jsx)("div",{className:T()("annotation--categoryLabel--7VWuC",{[nc]:(0,$.cD)(Z)}),dir:"auto",children:(0,$.uA)(Z)})}),(0,a.jsxs)("div",{className:T()(ns,nl),children:[Q&&(0,a.jsx)(ey.C,{value:Q,valueFormat:ee,lexicalContentClassName:"annotation_lexical_editor--contentEditableReadOnly--G8hdw",themeOverride:{link:"annotation_lexical_editor--linkReadOnly--HnBAD"},namespace:"annotation-display-lexical-editor",renderHtmlOnly:!0}),(0,a.jsx)(aw,{nodeId:c,properties:Y})]})]})});function aw({nodeId:e,properties:n}){let t=(0,E.k9)(()=>[...n].sort((e,n)=>tx.get(e.type).index-tx.get(n.type).index),[n]),o=(0,k.wA)((e,n,t)=>{let a=e.get(n);return t.map(n=>{if(!a)return{nodeFields:null,canHaveValue:!1};let t=(0,tI.J)(a,n.type,!1);return t?{nodeFields:tx.get(n.type).extractNodeFields(a,e),canHaveValue:t}:{nodeFields:null,canHaveValue:t}})},e,t);return 0===n.length?null:(0,a.jsx)("div",{className:T()(nu,"annotation--propertiesDisplay--wFXaY"),children:t.map((e,n)=>(0,a.jsx)(a_,{property:e,canHaveValue:o[n].canHaveValue,nodeFields:o[n].nodeFields},n))})}let a_=o.memo(function({property:e,canHaveValue:n,nodeFields:t}){let o=tx.get(e.type),i=o.DisplayValue;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{className:"annotation--propertyDisplayLabel--PQ2vF",children:o.label()}),(0,a.jsx)("span",{className:T()("annotation--propertyDisplayValue--bxdp7",{[np]:!n}),"data-testid":`annotationPropertyValue-${e.type.toString()}`,children:n?(0,a.jsx)(i,{nodeFields:t}):(0,D.tx)("dev_handoff.annotations.no_value")})]})});var ak=t(404343);let aj=(0,M.jz)("220px"),aC=(0,M.jz)(ak.RHC);function aA(e,n,t,a,o,r,l,s,d){let c=i.Ez5.isFullscreenYScrollbarNeeded();return o?Math.min(s?l+t*n-8:l-8,Math.max(0,-e/2-r+a+d.left+4)):Math.max(s?-l-t*n+8:-l+8,Math.min(0,e/2-r-a-d.right-(c?aC:4)))}function aI(e,n,t=!0){let{x:a,y:o,width:r,height:l}=e,{offsetX:s,offsetY:d,zoomScale:c,width:u}=n,p=i.Ez5.isFullscreenYScrollbarNeeded(),g=Math.min(20*c,20),f=a+r,h=(a-s)*c+u/2>aj+g+8,x=(s-f)*c+u/2>aj+g+(p?16:4),m=h&&!x;return(t||(m=h||!x),m)?{lineWidth:g,offsetX:(a-s)*c-g,offsetY:(o+l/2-d)*c,isLeftAligned:m}:{lineWidth:g,offsetX:(f-s)*c+g,offsetY:(o+l/2-d)*c,isLeftAligned:m}}function aN(e,n,t){let a=[],o=8*Math.min(1,t);for(let n of e){let e=n.height+o;for(a.push({basis:n.offsetY-e/2,length:1,height:e});a.length>1&&function(e,n){let t=e.basis+e.height-n.basis;return!(t<=0)&&(e.height+=n.height,e.length+=n.length,e.basis-=t*n.height/e.height,!0)}(a[a.length-2],a[a.length-1]);)a.pop()}let i=0;for(let t of a){let{basis:a}=t;for(let r=0;r<t.length;r++){let t=e[i];if(t){let e=t.height+o;n[t.uniqueId]=a+e/2,a+=e,i++}}}}function aS(e,n,t,a,o){return a+(Math.min(Math.max(e,n),t)-n)/(t-n)*(o-a)}var aE=t(311486),aL=t(386358),aT=t(841776),aM=t(664057),aO=t(347497),aD=t(520164);let aP=(0,M.jz)("4px")/2;function aV(e){let{children:n}=e,t=(0,o.useRef)(null),[i,r]=(0,o.useState)(null),l=(0,o.useRef)(null),s=function(){let e=(0,g.d4)(e=>e.selectedView),n=g.d4(e=>e.versionHistory)?.isLoadingPage,t=(0,b.DP)(),{isLoading:a}=(0,_.v9)({selectedView:e,isLoadingVersionHistory:n,theme:t});return a}();return(0,o.useEffect)(()=>{if(t.current){let e=t.current.attachShadow({mode:"open"}),n=document.createElement("style");n.nonce=(0,O.Ay)().csp_nonce,n.textContent=[aE.Nz,aT.Nz,aL.Nz,aD.Nz,"/** @postcss-export-raw */\n\n/**\n * ellipsis.css\n *\n * Add an ellipsis if text is too long.\n *\n * The element that composes this mixin MUST have a defined width or max-width in pixels.\n * - Only works on a single line of text. See below for multi-line ellipses\n */\n\n.ellipsis--ellipsis--Tjyfa {\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n/**\n * Add an ellipsis after n lines of text.\n * https://developer.mozilla.org/en-US/docs/Web/CSS/-webkit-line-clamp\n *\n * The element that composes this mixin MUST:\n * - Have a defined width or max-width in pixels.\n * - Have a defined fallback height or max-height set to `line-height * n`,\n *     in case browsers do not support -webkit-line-clamp or box-orient\n *     at least the container size will be correct (with no ellipses)\n *\n * TODO(golf): start using `line-clamp` instead of -webkit-line-clamp once browsers start supporting it\n */\n\n.ellipsis--_ellipsisAfterNLines--LzI7k {\n  display: -webkit-inline-box;\n  overflow: hidden;\n\n  /* https://github.com/postcss/autoprefixer/issues/776#issuecomment-297734206 */\n  /* autoprefixer: off */\n  -webkit-box-orient: vertical;\n  /* autoprefixer: on */\n}\n\n.ellipsis--ellipsisAfter2Lines--Qo-Xh {\n  -webkit-line-clamp: 2;\n}\n\n.ellipsis--ellipsisAfter3Lines--h405C {\n  -webkit-line-clamp: 3;\n}\n\n.ellipsis--ellipsisAfter6Lines--2UA7M {\n  -webkit-line-clamp: 6;\n}\n\n.ellipsis--ellipsisAfter8Lines--WZFi8 {\n  -webkit-line-clamp: 8;\n}\n","/** @postcss-export-raw */\n/* Keep in line with FGDevHandoffHelpers.h */\n.annotation--annotationContainer--k4xiM {\n  position: relative;\n  /* Make all z indexes in this file relative to the parent.\n     We want all annotations to render underneath comments */\n  /* stylelint-disable-next-line @fpl/no-manual-z-index */\n  z-index: 0;\n}\n.annotation--annotationContainer--k4xiM.annotation--isPageLoading--JGk-P {\n    filter: blur(3px);\n  }\n.annotation--_ellipsis--8F1VE {\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n.annotation--annotationWrapper--pKMw2 {\n  /* TODO: these should be semantic tokens */\n  /* stylelint-disable-next-line @figma/color-no-raw */\n  --annotation-line-color: rgba(131, 131, 131, 0.75);\n  --annotation-dot-border-color: #838383; /* stylelint-disable-line @figma/color-no-raw */\n  --annotation-border-color: var(--color-border-selected);\n  --annotation-border-selected-color: var(--color-border-brand);\n\n  --annotation-scale: 1;\n\n  position: absolute;\n  pointer-events: none;\n  width: max-content;\n}\n/* If no annotation was rendered, then the wrapper shouldn't show either */\n.annotation--shouldHideEmptyAnnotations--WXr4h:not(.annotation--wrapperMinimized--UOExu):not(:has(.annotation--viewAnnotation--cA-c1)):not(:has(.annotation--createAnnotation--tWKSM)) {\n    display: none;\n  }\n.annotation--annotationWrapperSelected--ffb0X {\n  --annotation-line-color: var(--color-border-selected);\n  --annotation-dot-border-color: var(--color-border-selected);\n}\n.annotation--annotationWrapper--pKMw2,\n.annotation--wrapperMinimized--UOExu:hover {\n  /* stylelint-disable-next-line @fpl/no-manual-z-index */\n  z-index: 1;\n}\n/* Handle scaling transition on mouse out */\n.annotation--transitionScaling--eD821 .annotation--annotationLeftAligned--FHQRp,\n  .annotation--transitionScaling--eD821 .annotation--annotationRightAligned--VrH8e {\n    transition: transform 0.05s ease-in-out;\n  }\n/* Handle transition scaling on mouse enter */\n.annotation--transitionScaling--eD821:hover .annotation--annotationLeftAligned--FHQRp,\n  .annotation--transitionScaling--eD821:hover .annotation--annotationRightAligned--VrH8e {\n    transition: transform 0.025s ease-out;\n  }\n.annotation--wrapperEditing--C2Zlx {\n  /* stylelint-disable-next-line @fpl/no-manual-z-index */\n  z-index: 2;\n}\n.annotation--wrapperMinimized--UOExu {\n  /* stylelint-disable-next-line @fpl/no-manual-z-index */\n  z-index: 0;\n}\n.annotation--annotationLine--jr4Mc {\n  --line-width-scale: 1;\n  --y-offset-direction: -1;\n\n  position: absolute;\n  top: 50%;\n  /* Push to left of annotation box */\n  transform: translate(\n    calc(-100% + 15px),\n    calc(var(--y-offset-direction) * 15px)\n  );\n\n  stroke: var(--annotation-line-color);\n  fill: var(--annotation-line-color);\n}\n.annotation--annotationLineLeftAligned--W-1DZ {\n  transform: translate(-15px, calc(var(--y-offset-direction) * 15px));\n}\n.annotation--annotationLineBelowNode--JeafT {\n  --y-offset-direction: 1;\n\n  top: auto;\n  bottom: 50%;\n}\n.annotation--annotationLineStartDot--x6RNc {\n  fill: color-mix(in srgb, var(--annotation-dot-border-color) 45%, transparent);\n  stroke: var(--annotation-dot-border-color);\n}\n.annotation--annotationLineStartInnerDot--aw58q {\n  fill: var(--color-text-onbrand);\n}\n.annotation--annotationLineEndDot--Lsq0a {\n  --dot-radius: 2px;\n  r: var(--dot-radius);\n}\n.annotation--_annotationBase--MPByC {\n  color: var(--color-text);\n\n  pointer-events: auto;\n\n  border-radius: var(--radius-large);\n  box-shadow: var(--elevation-200-canvas);\n  position: relative;\n  display: inline-block;\n  box-sizing: border-box;\n\n  max-width: 220px;\n\n  font-family: Inter;\n  font-size: 11px;\n  font-weight: 400;\n\n  /* This avoids a size shift when adding a border (category & selection). */\n  border: 1px solid transparent;\n}\n.annotation--viewAnnotation--cA-c1 {\n\n  background: var(--color-bg);\n  outline: none;\n\n  -webkit-user-select: text;\n\n          user-select: text;\n\n  /* This is to make sure the annotation proportions look better when there's a category */\n}\n.annotation--viewAnnotation--cA-c1.annotation--withCategory--lj1wU {\n    min-width: 80px;\n  }\n.annotation--viewAnnotation--cA-c1.annotation--onlyCategory--X9mU1 {\n    min-width: auto;\n\n    border-radius: var(--radius-medium);\n    background: var(--annotation-category-color);\n  }\n.annotation--viewAnnotation--cA-c1.annotation--onlyCategory--X9mU1 .annotation--categoryLabel--7VWuC {\n      margin: 0;\n    }\n.annotation--viewAnnotation--cA-c1.annotation--onlyCategory--X9mU1 .annotation--contentContainer--vSuqs.annotation--innerWrapper--T0cql {\n      padding: 0;\n    }\n.annotation--viewAnnotationNodeSelected--DfJ3t {\n  border: 1px solid var(--annotation-border-selected-color);\n}\n.annotation--viewAnnotation--cA-c1:focus {\n  border: 1px solid var(--annotation-border-color);\n}\n.annotation--viewAnnotationFadedOut--7LQPE > * {\n  opacity: 0.5;\n}\n.annotation--viewAnnotationFadedOut--7LQPE .annotation--innerWrapper--T0cql > * {\n  opacity: 0.5;\n}\n.annotation--createAnnotation--tWKSM {\n\n  background: var(--color-bg);\n  /* fixed when authoring */\n  width: 220px;\n}\n.annotation--createAnnotation--tWKSM .text-editor {\n    border: none;\n  }\n.annotation--createAnnotation--tWKSM .ql-editor.ql-blank::after {\n    margin-top: -1.85em;\n  }\n.annotation--createAnnotation--tWKSM .text-editor:focus-within {\n    margin: 0;\n  }\n.annotation--createAnnotation--tWKSM .ql-container {\n    background: none;\n  }\n.annotation--createAnnotation--tWKSM .ql-editor {\n    font-size: 13px;\n    line-height: 24px;\n    min-height: 24px;\n    padding: 2px 6px;\n    margin: 4px 0 6px 0;\n  }\n.annotation--annotationHeader--GXEj5 {\n  display: flex;\n}\n.annotation--createAnnotationHeader--thXfu {\n  display: flex;\n  padding-top: 10px;\n  padding-left: 10px;\n  padding-right: 8px;\n}\n.annotation--headerRowLeft--iIqjN {\n  flex: 1 1 0;\n  min-width: 0;\n  display: flex;\n}\n.annotation--headerRowRight--5h3Tr {\n  flex: 0 1 auto;\n  display: flex;\n  gap: 4px;\n}\n.annotation--categoryLabel--7VWuC {\n  color: var(--color-text-onbrand);\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n\n  font-weight: var(--body-medium-strong-fontWeight, 550);\n\n  border-radius: var(--radius-medium, 0.3125rem);\n  background-color: var(--annotation-category-color);\n\n  margin: 9px 8px 0px 8px;\n  padding: 2px 6px;\n\n  -webkit-user-select: none;\n\n          user-select: none;\n}\n.annotation--categoryLabel--7VWuC.annotation--darkText--xCvQV {\n    color: var(--color-text-onwarning);\n  }\n.annotation--innerWrapper--T0cql {\n  position: relative;\n\n  color: var(--color-text);\n}\n.annotation--createAnnotation--tWKSM .ql-editor ul,\n  .annotation--viewAnnotation--cA-c1 .ql-editor ul,\n  .annotation--createAnnotation--tWKSM .ql-editor ol,\n  .annotation--viewAnnotation--cA-c1 .ql-editor ol {\n    padding-left: 1.5em;\n  }\n.annotation--annotationHoverTarget--4y3Xc {\n  width: 24px;\n  height: 24px;\n  position: absolute;\n  pointer-events: auto;\n  top: calc(50% - 12px);\n  /* This is relative to the left edge of the line end dot,\n     but we want to center it around the dot */\n  left: -10px;\n}\n.annotation--annotationHoverTargetLeftAligned--G1twU {\n  /* This is relative to the right edge of the line end dot,\n     but we want to center it around the dot.\n     Shift by parent width (100%) to account for when the\n     annotation is not hidden. */\n  left: calc(100% - 14px);\n}\n.annotation--annotationLeftAligned--FHQRp {\n  transform: translate(-100%, 0) scale(var(--annotation-scale));\n  transform-origin: 100% 50%;\n  left: 8px;\n}\n.annotation--annotationRightAligned--VrH8e {\n  transform: scale(var(--annotation-scale));\n  transform-origin: 0 50%;\n  left: -8px;\n}\n.annotation--contentContainer--vSuqs {\n  display: flex;\n  flex-direction: column;\n  padding: 0 0 8px 0;\n  box-sizing: border-box;\n}\n.annotation--contentContainer--vSuqs.annotation--innerWrapper--T0cql {\n  gap: 8px;\n  padding: 8px;\n}\n.annotation--contentContainerNoProperties--pc2WE {\n  padding: 0;\n}\n.annotation--labelEditor--xNx12 {\n  padding: 0 8px;\n\n  max-height: 304px;\n  overflow-y: auto;\n}\n.annotation--properties--1p6UF {\n  display: grid;\n  grid-template-columns: min-content auto;\n  align-items: center;\n\n  cursor: default;\n}\n.annotation--properties--1p6UF.annotation--propertiesDisplay--wFXaY {\n    grid-row-gap: 4px;\n  }\n.annotation--createAnnotation--tWKSM .annotation--properties--1p6UF {\n  padding-left: 16px;\n  padding-right: 12px;\n}\n.annotation--selectedPropertyDisplayLabel--AtFEJ,\n.annotation--selectedPropertyValue--wwu2U {\n  /* The delete icon forces a certain row height, so we need to manually pad text to ensure labels are consistently positioned */\n  /* If not, the \"effect\" row that has more lines is vertically positioned different to the other property rows */\n  /* We're using rem here to mimic how --icon-button-size is defined */\n  padding: calc(0.75rem - 8px) 0;\n}\n.annotation--propertyDisplayLabel--PQ2vF,\n.annotation--selectedPropertyDisplayLabel--AtFEJ {\n  align-self: baseline;\n\n  color: var(--color-text-secondary);\n  white-space: nowrap;\n\n  padding-right: 12px !important;\n}\n.annotation--selectedPropertyValueWrapper--OyM0X {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n\n  width: calc(100% + 4px);\n\n  overflow: hidden;\n}\n.annotation--propertyDisplayValue--bxdp7 {\n  overflow: hidden;\n}\n.annotation--noValue--HHQOU {\n  color: var(--color-text-secondary);\n}\n.annotation--selectedPropertyValue--wwu2U {\n  overflow: hidden;\n\n  flex: 1 1 100%;\n}\n.annotation--selectedPropertyDelete--DMdrA {\n  display: flex;\n  align-items: center;\n}\n.annotation--propertyOptionIconSvg--LypST {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n.annotation--icon--w1enR {\n  flex: 0 0 24px;\n\n  width: 24px;\n  height: 24px;\n  margin-right: 4px;\n}\n.annotation--icon--w1enR svg {\n  fill: var(--color-icon);\n}\n.annotation--icon--w1enR[aria-disabled='true'] svg {\n  fill: var(--color-icon-disabled);\n}\n.annotation--chit--3je6E {\n  width: 12px;\n  height: 12px;\n\n  border-radius: 2px;\n  display: flex;\n  overflow: hidden;\n  margin: 1px 2px 1px 0;\n  flex-shrink: 0;\n  border: 1px solid var(--color-border);\n}\n.annotation--chit--3je6E svg {\n    width: 12px;\n    height: 12px;\n  }\n.annotation--propertyMenuOption--9-5ow .annotation--chit--3je6E {\n    margin: 1px 10px 1px 6px;\n  }\n.annotation--propertyMenuOption--9-5ow:hover .annotation--chit--3je6E {\n    border-color: var(--color-icon);\n  }\n.annotation--styleChit--yCQ3O {\n  border: none;\n}\n.annotation--chitInline--vG6cM {\n  margin: 0;\n}\n.annotation--solidPaint--ClR6h {\n  display: flex;\n  align-items: center;\n  gap: 4px;\n}\n.annotation--solidPaintValue--9PQMf {\n}\n.annotation--createAnnotationFooter--wx9JM {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 0 6px 8px 6px;\n}\n.annotation--coloredProperty--OTQ6l {\n  display: flex;\n  align-items: center;\n  justify-content: left;\n}\n.annotation--coloredProperty--OTQ6l > span {\n    padding-left: 2px;\n    padding-right: 2px;\n    border-radius: 2px;\n  }\n.annotation--paddingProperty--ckvG6 > span {\n    background: var(--color-bginspectpadding);\n    color: var(--color-textoninspectpadding);\n  }\n.annotation--spacingProperty--RCjSM > span {\n    background: var(--color-bginspectspacing);\n    color: var(--color-textoninspectspacing);\n  }\n.annotation--mixedValues--Z0qIk {\n  display: flex;\n  flex-direction: column;\n  gap: 4px;\n}\n.annotation--variablePill--VNxoI {\n  height: 16px;\n  padding: 0 4px;\n}\n.annotation--multipleVariableWrapper--OW3M1 {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 4px;\n  flex-direction: row;\n  align-items: center;\n}\n.annotation--multipleVariableWrapper--OW3M1.annotation--vertical--zmpVv {\n  flex-direction: column;\n  flex-wrap: nowrap;\n}\n.annotation--multipleVariableValue--5-5xk {\n  overflow: hidden;\n  align-self: stretch;\n}\n.annotation--annotationWrapperManagedString--RTskR {\n  --annotation-line-color: var(--color-border-component-strong);\n  --annotation-dot-border-color: var(--color-border-component-strong);\n  --annotation-border-color: var(--color-border-component-strong);\n}\n.annotation--annotationWrapperManagedString--RTskR .annotation--viewAnnotation--cA-c1 {\n    background-color: var(--color-bg-component-tertiary);\n    color: var(--color-text);\n    display: flex !important;\n    flex-direction: row !important;\n    align-items: center;\n    cursor: default;\n  }\n.annotation--annotationWrapperManagedString--RTskR .annotation--viewAnnotation--cA-c1:hover,\n  .annotation--annotationWrapperManagedString--RTskR .annotation--viewAnnotationSelected--UApdn {\n    border: 1px solid transparent;\n  }\n.annotation--annotationWrapperManagedString--RTskR .annotation--viewAnnotation--cA-c1:hover {\n    background-color: var(--color-bg-component-tertiary-hover);\n  }\n.annotation--annotationWrapperManagedString--RTskR .annotation--viewAnnotation--cA-c1.annotation--contentContainer--vSuqs {\n    padding: 2px 6px 2px 6px;\n  }\n.annotation--annotationWrapperManagedString--RTskR .annotation--managedStringLabel--fWb5O {\n    background: none;\n    font-size: 10px;\n    font-family: 'Roboto Mono', Monaco, 'Courier New', monospace;\n    overflow: hidden;\n    white-space: nowrap;\n    text-overflow: ellipsis;\n  }\n.annotation--annotationWrapperCmsBinding--DSfDQ {\n  --annotation-line-color: var(--color-border-strong);\n  --annotation-dot-border-color: var(--color-border-brand-strong);\n  --annotation-border-color: var(--color-border-brand-strong);\n}\n.annotation--annotationWrapperCmsBinding--DSfDQ .annotation--viewAnnotation--cA-c1 {\n    display: flex !important;\n    flex-direction: row !important;\n    align-items: center;\n    cursor: default;\n    gap: 3px;\n    border-radius: var(--radius-medium);\n    border: 1px solid transparent;\n\n    background-color: var(--color-bg);\n    color: var(--color-text-brand);\n    --color-icon: var(--color-icon-brand);\n  }\n.annotation--annotationWrapperCmsBinding--DSfDQ .annotation--viewAnnotation--cA-c1.annotation--viewAnnotationDangling--FQwP- {\n      background-color: var(--color-bg);\n      color: var(--color-text-warning);\n      --color-icon: var(--color-icon-warning);\n    }\n.annotation--annotationWrapperCmsBinding--DSfDQ .annotation--viewAnnotation--cA-c1:hover,\n  .annotation--annotationWrapperCmsBinding--DSfDQ .annotation--viewAnnotationSelected--UApdn {\n    border: 1px solid var(--color-border-brand-strong);\n  }\n.annotation--annotationWrapperCmsBinding--DSfDQ .annotation--viewAnnotation--cA-c1.annotation--viewAnnotationDangling--FQwP-:hover, .annotation--annotationWrapperCmsBinding--DSfDQ .annotation--viewAnnotationSelected--UApdn.annotation--viewAnnotationDangling--FQwP- {\n      border: 1px solid var(--color-border-warning-strong);\n    }\n.annotation--annotationWrapperCmsBinding--DSfDQ .annotation--viewAnnotationSelected--UApdn .annotation--unbind--neSDK {\n      display: flex;\n    }\n.annotation--annotationWrapperCmsBinding--DSfDQ .annotation--viewAnnotation--cA-c1.annotation--contentContainer--vSuqs {\n    padding: 4px;\n  }\n.annotation--annotationWrapperCmsBinding--DSfDQ .annotation--cmsBindingLabel--bcQef {\n    /* body/body.medium */\n    font-family: var(--body-medium-fontFamily, Inter);\n    font-size: var(--body-medium-fontSize, 11px);\n    font-style: normal;\n    font-weight: var(--body-medium-fontWeight, 450);\n    line-height: var(--body-medium-lineHeight, 16px); /* 145.455% */\n    letter-spacing: 0.055px;\n    background: none;\n  }\n.annotation--annotationWrapperCmsBinding--DSfDQ .annotation--unbind--neSDK {\n    background: none;\n    display: none;\n    align-items: center;\n    justify-content: center;\n    border: none;\n    padding: 0 0 0 4px;\n  }\n.annotation--annotationWrapperCodebaseSuggestions--1G1LW {\n  --annotation-line-color: var(--color-border-handoff-strong);\n  --annotation-dot-border-color: var(--color-border-handoff-strong);\n  --annotation-border-color: var(--color-border-handoff-strong);\n}\n.annotation--annotationWrapperCodebaseSuggestions--1G1LW .annotation--viewAnnotation--cA-c1 {\n    background-color: var(--color-bg-handoff-tertiary);\n    color: var(--color-text-handoff);\n    display: flex !important;\n    flex-direction: row !important;\n    cursor: default;\n  }\n.annotation--annotationWrapperCodebaseSuggestions--1G1LW .annotation--viewAnnotation--cA-c1:hover,\n  .annotation--annotationWrapperCodebaseSuggestions--1G1LW .annotation--viewAnnotationSelected--UApdn {\n    border: 1px solid transparent;\n  }\n.annotation--annotationWrapperCodebaseSuggestions--1G1LW .annotation--viewAnnotation--cA-c1:hover {\n    background-color: var(--color-bg-handoff-tertiary);\n  }\n.annotation--annotationWrapperCodebaseSuggestions--1G1LW .annotation--viewAnnotation--cA-c1.annotation--contentContainer--vSuqs {\n    padding: 2px 6px 2px 4px;\n  }\n.annotation--annotationWrapperCodebaseSuggestions--1G1LW .annotation--codeConnectIcon--nFdfw {\n    display: inline-block;\n    flex: none;\n  }\n.annotation--annotationWrapperCodebaseSuggestions--1G1LW .annotation--codeConnectIcon--nFdfw svg {\n      display: block;\n    }\n.annotation--annotationWrapperCodebaseSuggestions--1G1LW .annotation--codeConnectIcon--nFdfw svg path {\n        fill: var(--color-icon-handoff);\n      }\n.annotation--annotationWrapperCodebaseSuggestions--1G1LW .annotation--codeConnectLabel--Pd3TS {\n    font-size: 10px;\n\n    overflow: hidden;\n    white-space: nowrap;\n    text-overflow: ellipsis;\n  }\n.annotation--annotationWrapperCodebaseSuggestions--1G1LW .annotation--codeConnectLabelName--d-Hdu {\n    font-family: 'Roboto Mono', Monaco, 'Courier New', monospace;\n  }\n.annotation--effectBlurVariable--mbYFb {\n  padding-left: 4px;\n}\n.annotation--headerRowLeft--iIqjN {\n  padding-top: 2px;\n  padding-bottom: 2px;\n}\n.annotation--categorySelectorButton--q2A6p {\n  position: relative;\n\n  display: flex;\n  align-items: center;\n  justify-content: flex-start;\n  background-color: var(--color-bg-secondary);\n  color: var(--color-text-secondary);\n  font-weight: var(--body-medium-strong-fontWeight, 550);\n\n  border-radius: 4px;\n\n  padding-left: 6px;\n  padding-right: 18px;\n\n  border: 1px solid transparent;\n}\n.annotation--categorySelectorButton--q2A6p.annotation--withCategory--lj1wU {\n    color: var(--color-text-onbrand);\n    background-color: var(--annotation-category-color);\n  }\n.annotation--categorySelectorButton--q2A6p.annotation--withCategory--lj1wU .annotation--caret--noLOu {\n      fill: var(--color-icon-onbrand);\n      color: var(--color-icon-onbrand);\n    }\n.annotation--categorySelectorButton--q2A6p.annotation--withCategory--lj1wU.annotation--darkText--xCvQV {\n    color: var(--color-text-onwarning);\n  }\n.annotation--categorySelectorButton--q2A6p.annotation--withCategory--lj1wU.annotation--darkText--xCvQV .annotation--caret--noLOu {\n      fill: var(--color-icon-onwarning);\n      color: var(--color-icon-onwarning);\n    }\n.annotation--categorySelectorButton--q2A6p:focus-visible {\n    border: 1px solid var(--color-border-selected);\n  }\n.annotation--categorySelectorButton--q2A6p .annotation--caret--noLOu {\n    fill: var(--color-icon);\n    color: var(--color-icon);\n  }\n.annotation--pinPropertyButton--OTLW3 {\n  position: relative;\n\n  display: flex;\n  align-items: center;\n  justify-content: flex-start;\n  padding: 4px 8px 4px 4px;\n\n  font-weight: var(--body-medium-fontWeight, 450);\n  line-height: var(--body-medium-lineHeight, 16px);\n\n  border-radius: var(--radius-medium);\n  border: 1px solid transparent;\n\n  color: var(--color-text-secondary);\n}\n.annotation--pinPropertyButton--OTLW3:hover {\n    color: var(--color-text);\n    background-color: var(--color-bg-secondary);\n  }\n.annotation--pinPropertyButton--OTLW3:hover .annotation--pinPropertyButtonIcon--dgnI0 {\n      fill: var(--color-icon);\n      color: var(--color-icon);\n    }\n.annotation--pinPropertyButton--OTLW3:focus-visible {\n    border: 1px solid var(--color-border-selected);\n  }\n.annotation--pinPropertyButton--OTLW3.annotation--pinPropertyButtonActive---nkvq {\n    color: var(--color-text);\n    background-color: var(--color-bg-secondary);\n  }\n.annotation--pinPropertyButton--OTLW3.annotation--pinPropertyButtonActive---nkvq .annotation--pinPropertyButtonIcon--dgnI0 {\n      fill: var(--color-icon);\n      color: var(--color-icon);\n    }\n.annotation--pinPropertyButton--OTLW3 .annotation--pinPropertyButtonIcon--dgnI0 {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n\n    width: 16px;\n    height: 16px;\n\n    fill: var(--color-icon-secondary);\n    color: var(--color-icon-secondary);\n\n    margin-right: 4px;\n  }\n.annotation--categorySelectorButtonLabel--xGX7w {\n  max-width: 116px;\n}\n.annotation--caret--noLOu {\n  position: absolute;\n  top: calc(50% - 3px);\n  right: 6px;\n\n  --padding-right: var(--menu-padding-right, 4px);\n  margin-right: calc(var(--padding-right) - 4px);\n}\n.annotation--colorCircle--i6hsL {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n\n  width: 16px;\n  height: 16px;\n  border-radius: 50%;\n\n  box-sizing: border-box;\n\n  background-color: rgba(255, 255, 255, 0.1);\n}\n.annotation--colorCircle--i6hsL.annotation--noCategoryColor--fYEUj {\n  background-color: transparent;\n  border: 1px solid var(--color-icon-secondary);\n}\n.annotation--categoryOptionLabel--Iz9RB {\n  text-align: start;\n  padding: 0 6px;\n}\n.annotation--categoryOptionIcon--jg6bS {\n  flex: 0 0 auto;\n  padding: 0 2px;\n}\n.annotation--visibilityDisclaimer--oQFzZ {\n\n  padding: 0 16px;\n  max-width: 136px;\n\n  color: var(--color-text-menu-secondary);\n}\n.annotation--visibilityDisclaimer--oQFzZ p {\n    margin-bottom: 4px;\n  }\n/* Copying some of the icon-button styles since the styles don't apply within\n a shadow root element */\n.annotation--buttonReset--Emcnw {\n  display: inline-flex;\n  place-items: center;\n  margin: 0;\n  padding: 0;\n  box-sizing: border-box;\n  border: none;\n  -webkit-user-select: none;\n          user-select: none;\n}\n.annotation--buttonReset--Emcnw * {\n    /* Things inside of button shouldn't be targeted by clicks, only the button itself */\n    pointer-events: none;\n  }\n.annotation--iconButton--w7kfn {\n  --icon-button-width: initial;\n  --icon-button-height: initial;\n  --icon-button-outline-offset: -0.0625rem;\n  --icon-button-outline-width: 0.0625rem;\n  --icon-button-outline-color: transparent;\n  --icon-button-icon: var(--color-icon);\n  --icon-button-icon-secondary: var(--color-icon-secondary);\n  --icon-button-icon-tertiary: var(--color-icon-tertiary);\n  --icon-button-size: 1.5rem;\n  --icon-button-icon-size: 1.5rem;\n  --icon-button-radius: var(--radius-medium);\n\n  display: grid;\n  width: var(--icon-button-width, var(--icon-button-size));\n  height: var(--icon-button-height, var(--icon-button-size));\n  min-width: var(--icon-button-width, var(--icon-button-size));\n  padding: 0;\n\n  border-radius: var(--fpl-radius-left, var(--icon-button-radius))\n    var(--fpl-radius-right, var(--icon-button-radius))\n    var(--fpl-radius-right, var(--icon-button-radius))\n    var(--fpl-radius-left, var(--icon-button-radius));\n  background: transparent;\n  outline: var(--icon-button-outline-color) solid var(--icon-button-outline-width);\n  outline-offset: var(--icon-button-outline-offset);\n}\n.annotation--iconButton--w7kfn:disabled {\n    --icon-button-icon: var(--color-icon-disabled);\n    --icon-button-icon-secondary: var(--color-icon-disabled);\n    --icon-button-icon-tertiary: var(--color-icon-disabled);\n  }\n/**\n * Hovering over any part of a button group should trigger the hover states of everything\n * inside of the group. Focusing an element inside the group should also trigger the hover states\n * of everything else.\n */\n.annotation--ghost--thK4p:not([aria-disabled='true']):hover,\n  :where([role='group']:hover) .annotation--ghost--thK4p:not([aria-disabled='true']),\n  [role='group']:has([data-show-focus]:focus-visible) .annotation--ghost--thK4p:not([aria-disabled='true']):not(:focus-visible) {\n      background: var(--color-bghovertransparent);\n  }\n.annotation--ghost--thK4p:not([aria-disabled='true']):active {\n      background: var(--color-bgtransparent-secondary-hover);\n    }\n.annotation--ghost--thK4p[data-show-focus]:focus-visible {\n    --icon-button-outline-color: var(--color-border-selected);\n  }\n.annotation--iconButton--w7kfn .annotation--icon--w1enR {\n  --color-icon: var(--icon-button-icon);\n  --color-icon-secondary: var(--icon-button-icon-secondary);\n  --color-icon-tertiary: var(--icon-button-icon-tertiary);\n\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  width: var(--icon-button-icon-size);\n  height: var(--icon-button-icon-size);\n  min-width: var(--icon-button-icon-size);\n\n  /* mixins aren't supported in composes, so the border radius settings have to be copied */\n  border-radius: var(--fpl-radius-left, var(--icon-button-radius))\n    var(--fpl-radius-right, var(--icon-button-radius))\n    var(--fpl-radius-right, var(--icon-button-radius))\n    var(--fpl-radius-left, var(--icon-button-radius));\n  fill: var(--color-icon);\n  pointer-events: none;\n}\n",aO.N,"/** @postcss-export-raw */\n.annotation_lexical_editor--contentEditable--EVm11 {\n  box-sizing: border-box;\n  flex-grow: 1;\n  padding-left: 8px;\n  padding-right: 0px;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  font-size: 13px;\n  line-height: 1.7;\n  outline: none;\n  text-align: left;\n  white-space: pre-wrap;\n  word-wrap: break-word;\n}\n.annotation_lexical_editor--contentEditableReadOnly--G8hdw {\n  box-sizing: border-box;\n  font-size: 11px;\n  line-height: 16px;\n\n  cursor: default;\n}\n.annotation_lexical_editor--placeholder--pPwLm {\n  color: var(--color-text-secondary);\n  overflow: hidden;\n  position: absolute;\n  text-overflow: ellipsis;\n  top: 11px;\n  left: 8px;\n  font-size: 13px;\n  display: inline-block;\n  pointer-events: none;\n}\n.annotation_lexical_editor--withCategory--bUCqy.annotation_lexical_editor--placeholder--pPwLm {\n    top: 11px;\n  }\n.annotation_lexical_editor--linkReadOnly--HnBAD {\n  color: var(--color-text-brand);\n  cursor: pointer;\n  -webkit-text-decoration: underline;\n  text-decoration: underline;\n}\n",aM._content].join("\n"),l.current=document.createElement("style"),e.append(n),e.append(l.current),r(e)}},[]),(0,o.useEffect)(()=>{l.current&&(l.current.textContent=`
        .annotationWrapperForcedHover {
          --annotation-scale: ${e.hoverScale} !important;

          /* stylelint-disable-next-line @fpl/no-manual-z-index */
z-index: 100;
        }

        .${no} {
          --line-width-scale: ${e.hoverScale} !important;
        }

        .${ni} {
          --dot-radius: ${e.hoverScale*aP}px !important;
        }
      `)},[e.hoverScale]),(0,a.jsx)("div",{ref:t,"data-testid":"annotation-renderer-shadow-dom-container",className:T()("annotation--annotationContainer--k4xiM",W.Dm,W.Uu,s&&"annotation--isPageLoading--JGk-P"),children:i&&(0,I.createPortal)(n,i)})}function aR(){let e=(0,g.wA)(),n=(0,V.uQ)(),t=(0,g.d4)(e=>e.isFullscreenDocumentLoaded),s=aF(),u=(0,d.dH)(),f=(0,P._X)({subscribeToUpdates_expensive:!0}),x=(0,g.d4)(e=>e.dropdownShown),y=x?.type===ea,v=(0,l.Xr)(p.f),[b,w]=(0,l.fp)(p.m),_=(0,S.DP)();(0,o.useEffect)(()=>{n||w(null)},[n,w]),(0,o.useEffect)(()=>{u!==i.NLJ.ANNOTATE&&w(null)},[u,w]),(0,o.useEffect)(()=>{null!==b&&e((0,F.UU)())},[e,b]);let[C,A]=(0,o.useState)({}),{nodesWithAnnotationInfo:I,annotationsBeingViewed:L,newAnnotationNodeInfo:T}=function(e,n){let t=(0,V.uQ)(),a=(0,B.LO)(),s=(0,l.md)(p.m),u=(0,G.NW)(),g=aF(),f=(0,c.J2)(i.Ez5.uiState().filterAnnotationCategoryId),x=(0,k.Fk)((e,n)=>h.kh(e,n||"")?.guid||n||void 0,t),{allAnnotations:m,newAnnotationNode:y}=function({topLevelOrSelfNodeId:e}){let n=(0,d.dH)(),t=(0,c.J2)(i.Ez5.annotationObserver().annotationInfoByTlf),a=j([...t.keys()]),o=(0,l.md)(p.m),r=(0,V.uQ)(),s=(0,$.XR)(),u=(0,d.eY)(),g=null!==o?r:null,f=null!==o?e:void 0,{tlfsWithNodes:h,newAnnotationNode:x}=(0,E.k9)(()=>{let e=[...a],r=null;return g&&f&&!t.has(f)&&(n===i.NLJ.ANNOTATE||null!==o)&&e.push(f),{tlfsWithNodes:e.reduce((e,n)=>{let t=u.get(n),{nodes:a,newAnnotationNodeId:i}=function e(n,t,a=[],o,i){let r;if(n){if("SECTION"===n.type)return{nodes:[],newAnnotationNodeId:r};n.childrenNodes.forEach(n=>{let{newAnnotationNodeId:l}=e(n,t,a,o,i);r=r||l}),n.annotations.forEach((e,t)=>{let o=e.categoryId&&i.find(n=>n.id===e.categoryId)||null;a.push({nodeId:n.guid,uniqueId:`${n.guid}-manual-${t}`,annotationType:tN.MANUAL,meta:{annotationIndex:t,isUnAuthored:!1,category:o,categoryColor:o&&(0,$.FQ)(o)||void 0}})}),o===n.annotations.length&&n.guid===t&&(0===n.annotations.length?r=n.guid:a.push({nodeId:n.guid,uniqueId:`${n.guid}-manual-${n.annotations.length}`,annotationType:tN.MANUAL,meta:{annotationIndex:n.annotations.length,isUnAuthored:!0,category:null,categoryColor:void 0}}))}return{nodes:a,newAnnotationNodeId:r}}(t,g,[],o,s);return i&&t&&(r={nodeId:i,tlfGuid:n}),e[n]=a,e},{}),newAnnotationNode:r}},[a,u,g,f,n,o,s,t]),m={...h};for(let e of an){let n=e.useSharedHooksContext&&e.useSharedHooksContext(),t=j(e.useRelevantTLFs(n)),a=e.useNewAnnotationsByTlf(t,n,{topLevelOrSelfNodeId:f});Object.keys(a).forEach(e=>{let n=a[e];m[e]?m[e]=[...m[e],...n]:m[e]=n})}return{allAnnotations:(0,E.zN)(m),newAnnotationNode:x}}({topLevelOrSelfNodeId:x}),v=(0,k.wA)((e,n)=>Object.entries(n).map(([n,t])=>{let a=[];t.forEach(n=>{let t=e.get(n.nodeId);if(t&&(!(0,r.kc)().dt_annotations_filter_out_clipped_nodes||!function(e){if(!e.isAlive)return!0;let n=e.parentNode,t=e.absoluteBoundingBox;for(;n;){let e=n.absoluteBoundingBox;if("FRAME"===n.type&&!n.frameMaskDisabled&&(t.x<e.x||t.x+t.w>e.x+e.w||t.y<e.y||t.y+t.h>e.y+e.h))return!0;n=n.parentNode}return!1}(t))){let e=t.absoluteRenderBounds;a.push({...n,nodeBounds:{x:e?.x??0,y:e?.y??0,width:e?.w??0,height:e?.h??0}})}});let o=e.get(n);return{topLevelFrameNodeId:n,topLevelFrameBounds:{x:o?.absoluteBoundingBox.x??0,y:o?.absoluteBoundingBox.y??0,width:o?.absoluteBoundingBox.w??0,height:o?.absoluteBoundingBox.h??0},nodes:a}}),m),b=(0,o.useMemo)(()=>{if(x){let e=v.find(({topLevelFrameNodeId:e})=>e===x);if(e){let n=e.topLevelFrameBounds;return{x:n.x+n.width/2,y:n.y+n.height/2}}}},[v,x]),w=(0,E.k9)(()=>{let n=0,t=null,a=v.map(a=>{let{topLevelFrameBounds:o}=a;if(!function(e,n){let t=e.x,a=e.x+e.width,o=e.y,i=e.y+e.height,r=n.x,l=n.x+n.width,s=n.y,d=n.y+n.height;return t<l&&a>r&&o<d&&i>s}({x:o.x-aj,y:o.y,width:o.width+2*aj,height:o.height},(0,P.qc)(e)))return null;let i=function(e,n){let t={x:n.x+n.width/2,y:n.y+n.height/2};return Math.hypot(t.x-e.x,t.y-e.y)}(b||{x:e.offsetX,y:e.offsetY},o);(!t||i<t.distanceFromFocusPoint)&&(t={tlfIndex:n,distanceFromFocusPoint:i}),n++;let r=function(e,n){let t=(0,P.qc)(n);return Math.min(e.width*n.zoomScale,t.width)*Math.min(e.height*n.zoomScale,t.height)/(t.width*t.height)}(o,e);return{...a,isMostCentralTLF:!1,viewportClampingWeight:aS(r,.8,.85,0,1)*aS(e.zoomScale,.98,1,0,1),viewportOffsetXForClamping:r>.8&&e.zoomScale>.98||null!==s?e.offsetX*e.zoomScale:0}}).filter(N.Vq),o=t?t.tlfIndex:void 0;return void 0!==o&&(a[o].isMostCentralTLF=!0),a},[v,e,b,s]),_=Math.max(g,e.zoomScale),C=t?1/Math.min(1,e.zoomScale):1,{annotationsBeingViewed:A,nodesWithAnnotationInfo:I,annotationBeingEditedIndex:S}=(0,o.useMemo)(()=>{let o=[],i=0,r=null,l=w.flatMap(({nodes:l,topLevelFrameNodeId:d,topLevelFrameBounds:c,isMostCentralTLF:p,viewportClampingWeight:g,viewportOffsetXForClamping:h})=>{l.length>0&&o.push({tlf:d,numNodes:l.length});let x=l.map(o=>{let{nodeId:i,nodeBounds:r,annotationType:l,uniqueId:x}=o,m="meta"in o?o.meta:void 0,y=m&&("category"in m?m.category:null),v=m&&("categoryColor"in m?m.categoryColor:void 0),b=i===t,w=null!==f&&y?.id!==f,k=u===x&&null!==s,j=!!m&&"isUnAuthored"in m&&m.isUnAuthored,A=k||j?1:w?0:g,I=function(e,n,t){let{x:a,y:o,width:i,height:r}=e,{x:l,width:s}=n,d=Math.abs(a-l)<Math.abs(l+s-(a+i)),c=Math.min(a,l),u=Math.max(a+i,l+s),p=Math.min(Math.max(20*t,5*t),20);return d?{lineWidth:(a-c)*t+p,offsetX:c*t-p,offsetY:(o+r/2)*t,isLeftAligned:d}:{lineWidth:(u-(a+i))*t+p,offsetX:u*t+p,offsetY:(o+r/2)*t,isLeftAligned:d}}(r,c,_);if(!k&&!j){let t=A*aA(e.width,_,r.width,n[x]?.width||0,I.isLeftAligned,I.offsetX-h,I.lineWidth,k,a);I.offsetX+=t,I.lineWidth+=t*(I.isLeftAligned?-1:1)}return{...I,meta:m,width:n[x]?.width||0,height:w?6:(n[x]?.height||0)*(b?C:1)+(b?10*(C-1):0),nodeId:i,uniqueId:x,nodeBounds:r,tlfGuid:d,shouldMinimize:w,lineColor:v,annotationType:l,topLevelFrameBounds:c,isInCentralTLF:p,currentlyBeingEdited:k||j}}).sort((e,n)=>e.offsetY-n.offsetY),m=x.findIndex(e=>e.currentlyBeingEdited);-1!==m&&(r=m+i);let y=function(e,n){let t=[],a=[],o={};for(let e of n)e.isLeftAligned?t.push(e):a.push(e);return aN(t,o,e),aN(a,o,e),n.map(n=>{let{y:t,height:a,width:i}=n.nodeBounds,r=o[n.uniqueId],l=t*e,s=n.lineWidth,d=tS.ALIGNED,c=0,u=n.lineWidth;return r<l?(d=tS.ABOVE,c=l-r,u+=i/2*e):r>(t+a)*e&&(d=tS.BELOW,c=r-(t+a)*e,u+=i/2*e),{...n,offsetY:r,lineAlignment:d,lineHeight:c,lineWidth:u,originalLineWidth:s}})}(_,x);return i+=l.length,y});return{annotationsBeingViewed:o,nodesWithAnnotationInfo:l,annotationBeingEditedIndex:r}},[e.width,_,w,n,f,a,s,u,C,t]);return{nodesWithAnnotationInfo:(0,E.k9)(()=>{if(null===S)return I;let n=[...I],t={...n[S]},o=Math.min(1,e.zoomScale*(1/g)),i=aA(e.width,e.zoomScale,t.nodeBounds.width,t.width,t.isLeftAligned,t.offsetX*o-e.offsetX*e.zoomScale,t.lineWidth*o,!0,a)/o;if(t.offsetX=t.offsetX+i,t.lineWidth=t.lineWidth+i*(t.isLeftAligned?-1:1),"isUnAuthored"in t.meta&&t.meta.isUnAuthored){let n=aI(t.nodeBounds,e,!t.isLeftAligned);n.isLeftAligned!==t.isLeftAligned&&(t.lineWidth=n.lineWidth/o,t.isLeftAligned=n.isLeftAligned,t.lineAlignment=tS.ALIGNED,t.lineHeight=0,t.offsetX=(n.offsetX+e.offsetX*e.zoomScale)/o,t.offsetY=(n.offsetY+e.offsetY*e.zoomScale)/o)}return n[S]=t,n},[I,e,S,a,g]),annotationsBeingViewed:A,newAnnotationNodeInfo:(0,k.wA)((e,n,t,a)=>{if(!t)return null;let o=e.get(t.nodeId);if(!o)return null;let i=o.absoluteRenderBounds,r={x:i?.x??0,y:i?.y??0,width:i?.w??0,height:i?.h??0},l=aI(r,a);return{...l,nodeId:t.nodeId,uniqueId:`${t.nodeId}-manual-${o.annotations.length}`,width:n[t.nodeId]?.width||0,height:n[t.nodeId]?.height||0,newAnnotationNode:t,tlfGuid:t.tlf,shouldMinimize:!1,lineAlignment:tS.ALIGNED,lineHeight:0,lineColor:void 0,originalLineWidth:l.lineWidth,annotationType:tN.MANUAL,isInCentralTLF:!1,nodeBounds:r,meta:{annotationIndex:o.annotations.length,category:null,categoryColor:void 0,isUnAuthored:!0}}},n,y,e)}}(f,C),M=(0,m.IL)(),O=L.length,W=L.reduce((e,n)=>e+n.numNodes,0);(0,o.useEffect)(()=>{O&&u===i.NLJ.SELECT&&M("showing_annotations_for_tlfs",{topLevelFrameCount:O,nodesWithAnnotationsCount:W})},[O,W,u,M]),o.useEffect(()=>(H.NB?.setIsShowingAnnotations(0!==I.length),v(I.length),()=>{H.NB?.setIsShowingAnnotations(!1),v(0)}),[I.length,v]);let z=(0,o.useCallback)((e,n)=>{A(t=>t[e]?.height!==n.height||t[e]?.width!==n.width?{...t,[e]:n}:t)},[]),q=(0,R.EG)();if(!t)return null;let K=f.zoomScale<.05,X=f.x+f.width/2,Q=f.y+f.height/2,Y=Math.min(1,f.zoomScale*(1/s)),Z=null,J=[],ee=[];I.forEach(e=>{null!==b&&e.nodeId===n&&e.annotationType===tN.MANUAL&&e.meta.annotationIndex===b&&(Z=(0,a.jsx)(ad,{annotationId:e.uniqueId,annotationIndex:b,isLeftAligned:e.isLeftAligned,lineAlignment:e.lineAlignment,lineHeight:e.lineHeight*Y,lineWidth:e.lineWidth*Y,nodeId:e.nodeId,offsetX:e.offsetX*Y+X-f.offsetX*f.zoomScale,offsetY:e.offsetY*Y+Q-f.offsetY*f.zoomScale,setDimensions:z,viewportInfo:f}));let t=(0,a.jsx)(av,{annotationId:e.uniqueId,annotationMeta:"meta"in e?e.meta:void 0,annotationType:e.annotationType,isEditingAnnotation:!1,isInCentralTLF:e.isInCentralTLF,isLeftAligned:e.isLeftAligned,lineAlignment:e.lineAlignment,lineColor:e.lineColor,lineHeight:e.lineHeight,lineWidth:e.lineWidth,nodeId:e.nodeId,offsetX:e.offsetX,offsetY:e.offsetY,setDimensions:z,shouldDelayHover:f.zoomScale<.25,shouldHide:K,shouldMinimize:e.shouldMinimize},e.uniqueId);e.nodeId===n?ee.push(t):J.push(t)});let en=null!==b&&T&&(0,a.jsx)(ad,{annotationId:T.uniqueId,annotationIndex:b,isLeftAligned:T.isLeftAligned,lineAlignment:T.lineAlignment,lineHeight:T.lineHeight,lineWidth:T.lineWidth,nodeId:T.nodeId,offsetX:T.offsetX+X,offsetY:T.offsetY+Q,setDimensions:z,viewportInfo:f}),et=y&&x&&(0,a.jsx)(eo,{nodeId:x.data.nodeId,annotationIndex:x.data.annotationIndex,parentRect:x.data.position});return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(aV,{hoverScale:1/Y,children:(0,a.jsxs)("div",{"data-fpl-version":_.version,style:{visibility:q?"hidden":"visible",position:"absolute",transform:`translate(${-f.offsetX*f.zoomScale+f.x+f.width/2}px, ${-f.offsetY*f.zoomScale+f.y+f.height/2}px) scale(${Math.min(f.zoomScale*(1/s),1)})`},children:[(0,a.jsx)(U.v,{isAccessible:ee.length>0,role:"region","aria-label":(0,D.t)("dev_handoff.annotations.accessible_area_label"),children:ee}),J]})}),Z,en,et]})}function aF(){let e=(0,z.cJ)();return(0,r.kc)().dt_annotations_sizing&&e?.3:(0,r.kc)().dt_annotations_sizing?.5:1}function aW(){return!function(){let e=(0,d.dH)(),n=(0,c.J2)(i.Ez5.annotationObserver().annotationInfoByTlf);return j((0,o.useMemo)(()=>Array.from(n.keys()),[n])).length>0||!!(0,r.kc)().dt_component_annotations||!!(0,r.kc)().dt_ccv2_on_canvas||!!(0,r.kc)().cheddar_annotations||e===i.NLJ.ANNOTATE}()?null:(0,a.jsx)(u.p,{forceNoScroll:!0,children:(0,a.jsx)(aR,{})})}function aB(){return(0,a.jsx)(s.u,{label:"AnnotationsOverlay",children:(0,a.jsx)(az,{})})}function az(){let e=(0,A.iW)();return((0,o.useEffect)(()=>{!e&&(l.zl.set(p.m,null),i.Ez5&&i.Ez5.editorState().focusedAnnotationId.set(null))},[e]),e)?(0,a.jsx)(aW,{}):null}},990609:(e,n,t)=>{t.d(n,{S:()=>ew});var a=t(104076),o=t(716976),i=t(903927),r=t(500275),l=t(307829),s=t(454851),d=t(853943),c=t(980852),u=t(812714),p=t(795033),g=t(120440),f=t(883765),h=t(192075),x=t(58212),m=t(178623),y=t(20267),v=t(211862),b=t(835307),w=t(572427),_=t(810149),k=t(700126),j=t(107799),C=t(660471),A=t(833737),I=t(266808),N=t(170627),S=t(894210),E=t(963433),L=t(848358),T=t(542653),M=t(638004),O=t(9378),D=t.n(O),P=t(550209),V=t(354114),R=t(754651),F=t(951002);let W=(0,o.createContext)(null);function B({children:e,value:n}){return(0,a.jsx)(W.Provider,{value:n,children:e})}function z(){let e=(0,o.useContext)(W);return(0,F.KF)(!!e,"useFileTreeContext must be used within a FileTreeProvider"),e}var G=t(312071);let H=[".ts",".tsx",".js",".jsx",".css",".scss",".html",".json",".md",".txt"];function U({path:e}){let{onNewFileCreated:n}=z();return(0,a.jsx)(l.q7,{onClick:()=>{f.az.trackDefinedEvent("figmake.filesystem_action",{fileKey:p.zl.get(v.ze)??void 0,action:"create_file",targetType:e?"folder":"root",entryPoint:"context_menu",codeFileGuid:void 0}),N.l7.user("create-new-code-file",()=>{try{let t=Y("new-file.tsx",e),a=e?`${e.replace(/\/$/,"")}/${t}`:t,o=c.UN()?.createNewCodeFile({path:a,sourceCode:"",entryPoint:"file_context_menu",isEntrypointCodeFile:!1,onError:e=>{P.$D(M.e.MAKE,e)},enableDuplicateCheck:u.kc().bake_dup_code_files});if(V.Y5.commit(),o){let e=(0,c.UN)().get(o);e&&(0,G.nU)(e),n(o)}}catch(e){(0,P.$D)(M.e.MAKE,e)}})},children:(0,h.t)("figmake.filesystem.context_menu.create_new_file")})}function $({path:e}){return(0,a.jsx)(l.q7,{onClick:()=>{f.az.trackDefinedEvent("figmake.filesystem_action",{fileKey:p.zl.get(v.ze)??void 0,action:"copy_path",targetType:e.includes(".")?"file":"folder",entryPoint:"context_menu",codeFileGuid:void 0}),navigator.clipboard.writeText(e)},children:(0,h.t)("figmake.filesystem.context_menu.copy_path")})}function q({node:e,disabled:n}){return(0,a.jsx)(l.q7,{onClick:()=>{f.az.trackDefinedEvent("figmake.filesystem_action",{fileKey:p.zl.get(v.ze)??void 0,action:"delete_file",targetType:"file",entryPoint:"context_menu",codeFileGuid:e.guid}),N.l7.user("delete-code-file",()=>{I.glU?.deleteCodeFile(e.guid),I.glU?.commit()})},disabled:n,children:(0,h.t)("figmake.filesystem.context_menu.delete")})}function K(e){let n=(0,c.UN)();if(!n)return;let t=n.get(e.guid);if(t)return t.sourceCode}function X({fileOrFolder:e}){return(0,a.jsx)(l.q7,{onClick:()=>{f.az.trackDefinedEvent("figmake.filesystem_action",{fileKey:p.zl.get(v.ze)??void 0,action:"download",targetType:e.type,entryPoint:"context_menu",codeFileGuid:"file"===e.type?e.guid:void 0});let{name:n,blob:t}=function(e){if("file"===e.type){let n=K(e);return{name:e.name,blob:new Blob([n||""],{type:"text/plain"})}}{let n=new(D());!function e(n,t,a){if("file"===t.type){let e=K(t);if(!e)return;let{name:o}=t,i=t.codeFilePath?t.codeFilePath.slice(a.length)+"/":"";n.file(i+o,new TextEncoder().encode(e))}else for(let o of t.children)e(n,o,a)}(n,e,e.path);let t=n.generate({type:"blob"});return{name:e.path.length>0?e.path.split("/").pop()+".zip":"project.zip",blob:t}}}(e),a=URL.createObjectURL(t),o=document.createElement("a");o.href=a,o.download=n,o.click(),URL.revokeObjectURL(a)},children:(0,h.t)("figmake.filesystem.context_menu.download")})}function Q({handleRename:e,disabled:n}){return(0,a.jsx)(l.q7,{onClick:()=>{f.az.trackDefinedEvent("figmake.filesystem_action",{fileKey:p.zl.get(v.ze)??void 0,action:"rename",targetType:"file",entryPoint:"context_menu",codeFileGuid:void 0}),e()},htmlAttributes:{onPointerUp:e=>e.preventDefault()},disabled:n,children:(0,h.t)("figmake.filesystem.context_menu.rename")})}function Y(e,n,t){let a,o=0,i=e,r=t||(0,T.$d)(n);for(;o<1e4;)if(a=n?n+"/"+i:i,`/${a}`in r){let n=(0,R.dv)(e),t=n?e.replace(/\.[^/.]+$/,""):e;o++,i=n?`${t}-${o}${n}`:`${t}-${o}`}else break;if(o>=1e4)throw Error(`Unable to generate unique filename for "${e}" - too many existing files with similar names`);return i}function Z(e){return e.isFile&&"file"in e}function J(e){return e.isDirectory&&"createReader"in e}async function ee(e,n,t){if(e.length>100){let n=(0,h.t)("figmake.filesystem.file_upload.error_too_many_files",{count:e.length,max:100});t?.(x.F.enqueue({message:n,error:!0,timeoutOverride:3e3}));return}let a=[];for(let n of e)try{let e=await new Promise(e=>{n.file(e)});if(e){let t="fullPath"in n?n.fullPath.replace(/^\//,""):e.name;a.push({file:e,relativePath:t})}}catch(e){console.error("Failed to process file entry:",e)}for(let{file:e,relativePath:o}of a)await et(e,o,n,t)}function en(e){let n=e.lastIndexOf("/");return n>=0?e.substring(0,n):void 0}async function et(e,n,t,a){let o=t?`${t}/${n}`:n;try{!function(e){let n=(0,R.dv)(e.name);if(!H.includes(n))throw Error((0,h.t)("figmake.filesystem.file_upload.error_invalid_type"));if(e.size>0xa00000)throw Error((0,h.t)("figmake.filesystem.file_upload.error_too_large"))}(e);let n=await new Promise((n,t)=>{let a=new FileReader;a.onload=e=>{let a=new TextDecoder("utf-8",{fatal:!0});try{if(e.target?.result&&"object"==typeof e.target.result&&e.target.result instanceof ArrayBuffer){let t=a.decode(e.target.result);"string"==typeof t&&n(t)}}finally{t(Error("Failed to read file as text"))}},a.onerror=()=>t(Error("Failed to read file")),a.readAsArrayBuffer(e)}),t=Y(e.name,en(o)),a=en(o)?`${en(o)}/${t}`:t;N.l7.user("create-file-from-drop",()=>{let e=c.UN()?.createNewCodeFile({path:a,sourceCode:n,entryPoint:"file_drop",isEntrypointCodeFile:!1,onError:e=>{P.$D(M.e.MAKE,e)},enableDuplicateCheck:u.kc().bake_dup_code_files});if(V.Y5.commit(),f.az.trackDefinedEvent("figmake.file_upload_result",{fileKey:p.zl.get(v.ze)??void 0,success:!0,errorMessage:void 0,codeFileGuid:e??void 0}),e){let n=(0,c.UN)().get(e);n&&(0,G.nU)(n)}})}catch(t){f.az.trackDefinedEvent("figmake.file_upload_result",{fileKey:p.zl.get(v.ze)??void 0,success:!1,errorMessage:t instanceof Error?t.message:void 0,codeFileGuid:void 0});let n=t instanceof Error?t.message:(0,h.t)("figmake.filesystem.file_upload.error_failed",{name:e.name});a?.(x.F.enqueue({message:n,error:!0,timeoutOverride:3e3}))}}async function ea(e,n,t){if(e&&0!==e.length){if(e[0]&&"webkitGetAsEntry"in e[0]){await eo(e,n,t);return}await ei(e,n,t)}}async function eo(e,n,t){let a=[],o=[],i=!1;for(let n of e)if(n.webkitGetAsEntry){let e=n.webkitGetAsEntry();e&&(Z(e)?a.push(e):J(e)&&(i=!0,o.push(function e(n,t){return new Promise(a=>{let o=n.createReader(),i=()=>{o.readEntries(n=>{if(0===n.length){a();return}let o=[];for(let a of n)Z(a)?t.push(a):J(a)&&o.push(e(a,t));Promise.all(o).then(()=>{i()})})};i()})}(e,a))))}else if("file"===n.kind){let e=n.getAsFile();e&&a.push({file:n=>n(e)})}await Promise.all(o),f.az.trackDefinedEvent("figmake.file_upload",{fileKey:p.zl.get(v.ze)??void 0,fileCount:a.length,hasDirectories:i}),await ee(a,n,t)}async function ei(e,n,t){let a=Array.from(e);if(f.az.trackDefinedEvent("figmake.file_upload",{fileKey:p.zl.get(v.ze)??void 0,fileCount:a.length,hasDirectories:!1}),a.length>100){let e=(0,h.t)("figmake.filesystem.file_upload.error_too_many_files",{count:a.length,max:100});t?.(x.F.enqueue({message:e,error:!0,timeoutOverride:3e3}));return}for(let e of a)await et(e,e.name,n,t)}function er({manager:e,file:n,handleRename:t,featureType:i}){let s=(0,c.UN)().get(n.guid),d=(0,k.l)(),u=(0,r.QK)(s,i);return o.useEffect(()=>{e.isOpen&&f.az.trackDefinedEvent("figmake.filesystem_open_context_menu",{fileKey:p.zl.get(v.ze)??void 0,targetType:"file",codeFileGuid:n.guid})},[e.isOpen,n]),(0,a.jsx)(l.bL,{manager:e,children:(0,a.jsxs)(l.mc,{children:[(0,a.jsx)($,{path:n.codeFilePath?n.codeFilePath+"/"+n.name:n.name}),(0,a.jsx)(X,{fileOrFolder:n}),!d&&(0,a.jsx)(Q,{handleRename:t,disabled:u}),!d&&s&&(0,a.jsx)(q,{node:s,disabled:u})]})})}let el={fileItemLabel:{k1xSpc:"x78zum5",kGNEyG:"x6s0dn4",kmVPX3:"x7qmaab",kaIpWk:"x12oqio5",kMwMTN:"x1akne3o","--color-icon":"xtlvio2",k9WMMc:"xdpxx8g",kWkggS:"xjbqb8w x12tve8b",khDVqt:"xuxw1ft",kXHlph:"x6ikm8r",kg5iWk:"xlyipyv",kzqmXN:"xh8yej3",$$css:!0},fileItemLabelRenaming:{kWkggS:"xjbqb8w",$$css:!0},fileItemLabelActive:{kWkggS:"xcr9a89",kMwMTN:"x1akne3o",k63SB2:"x6xwguf","--color-icon":"xtlvio2",$$css:!0},disabled:{kMwMTN:"xge78cn",kWkggS:"x1yjdb4r",$$css:!0}};function es({selectedNode:e,file:n,indentLevel:t,codeIsStreaming:i,featureType:s}){let d=(0,o.useRef)(null),{getContextMenuTriggerProps:f,manager:x}=l.b(),{newlyCreatedFileGuid:m,onNewFileFocused:y}=z(),{selectedDsLibraryFolderPath:v}=(0,E.oA)(),[b,w]=o.useState(!1),[j]=(0,p.fp)(_.ES),[T]=(0,p.fp)(_.KO),M=(0,c.UN)().get(n.guid),O=m===n.guid,D=(0,k.l)(),P=(0,r.QK)(M,s),V=o.useCallback(()=>{w(!0),y()},[y]);return(0,a.jsxs)("button",{"aria-label":(0,h.t)("figmake.filesystem.file.description",{name:n.name}),onClick:()=>{let e=(0,c.UN)().get(n.guid);e&&(0,G.nU)(e,!0)},className:"x10w6t97 x78zum5 x6s0dn4 xjbqb8w xj8oexa xnjsko4",disabled:i,...f(),children:[(0,a.jsxs)("div",{...g.Ay.props(el.fileItemLabel,e?.guid!==n.guid||b||null!==j||T||v&&(0,u.kc)().bake_byods_extraction_showcase?void 0:el.fileItemLabelActive,i?el.disabled:void 0,b?el.fileItemLabelRenaming:void 0),style:{paddingLeft:8+16*t},children:[(0,a.jsx)("span",{style:{flexShrink:0,...(0,G.Ql)(i)},children:(0,a.jsx)(C.i,{})}),(0,a.jsx)(L.p,{fileName:n.name,onChange:e=>{w(!1),M&&N.l7.user("edit-code-file-name",()=>{M.setHasBeenManuallyRenamed(!0),M.name=e,I.glU?.commit()})},disabled:i,readOnly:D||P,onFocus:V,ref:d,path:n.codeFilePath,autoFocus:O}),n.isLarge&&(0,a.jsx)("span",{className:"x1iog12x x2lah0s x78zum5 x6s0dn4 x1gxdvn5","data-tooltip":(0,h.t)("sites.code_components.code_file_size_warning"),"data-tooltip-type":S.Ib.TEXT,children:(0,a.jsx)(A.R,{})})]}),(0,u.kc)().bake_context_menu&&(0,a.jsx)(er,{manager:x,file:n,handleRename:()=>d.current?.focus(),featureType:s})]},n.guid)}var ed=t(620480),ec=t(780312),eu=t(388054),ep=t(772963),eg=t(533144);function ef(e,n,t){let a=(0,i.wA)(),[r,l]=(0,p.fp)(_.ES),[s]=(0,p.fp)(_.KO),d=r===e&&!s;return{isDragOver:d,handleDragOver:o.useCallback(n=>{n.preventDefault(),n.stopPropagation(),n.dataTransfer.dropEffect=t?.disabled?"none":"copy",s||l(e)},[e,l,s,t?.disabled]),handleDragLeave:o.useCallback(e=>{e.preventDefault(),e.stopPropagation(),e.currentTarget.contains(e.relatedTarget)||l(null)},[l]),handleDrop:o.useCallback(async e=>{if(e.preventDefault(),e.stopPropagation(),l(null),t?.disabled)return;let o=e.dataTransfer;o?.items&&o.items.length>0?await ea(Array.from(o.items),n,a):await ea(o?.files,n,a)},[n,a,l,t?.disabled])}}function eh({manager:e,folder:n,rootPath:t}){let i=(0,k.l)();return o.useEffect(()=>{e.isOpen&&f.az.trackDefinedEvent("figmake.filesystem_open_context_menu",{fileKey:p.zl.get(v.ze)??void 0,targetType:"folder",codeFileGuid:void 0})},[e.isOpen,n]),(0,a.jsx)(l.bL,{manager:e,children:(0,a.jsxs)(l.mc,{children:[!i&&(0,a.jsx)(U,{path:(t?t+"/":"")+n.path.slice(1)}),(0,a.jsx)($,{path:n.path.slice(1)}),(0,a.jsx)(X,{fileOrFolder:n})]})})}let ex={folderItemContainerDragOver:{kWkggS:"xcr9a89",kVAEAm:"x1n2onr6",kgeoSG:"x1cpjm7i",kEoFBp:"x1hmns74",k96MEf:"x1y3wzot",k75S9Q:"x1wlytlt",kLBHJ3:"xb0dqd5",k5Ofw7:"xhq5o37",k5Ohv7:"xpmqpgo",kj4x2v:"x1fo1fc9",kfXFYZ:"x1vzh1im",kPB484:"xb52w3a",km8f2m:"xkk1bqk",kxmVGU:"x12maryy",$$css:!0},folderItemLabelActive:{kMwMTN:"x1akne3o",k63SB2:"x6xwguf","--color-icon":"xtlvio2",kWkggS:"xcr9a89",$$css:!0},folderItemLabel:{kzQI83:"x1iyjqo2",kmuXW:"xs83m0k",kCS8Yb:"x1t1x2f9",k1xSpc:"x78zum5",kGNEyG:"x6s0dn4",kOIVth:"x195vfkc",kaIpWk:"x12oqio5",kWkggS:"xjbqb8w x12tve8b",$$css:!0},folderItemLabelDragActive:{kWkggS:"xjbqb8w",$$css:!0},disabled:{kMwMTN:"xge78cn",kWkggS:"x1yjdb4r",$$css:!0}};function em({selectedNode:e,folder:n,indentLevel:t,codeIsStreaming:i,openFolderPaths:r,toggleFolder:s,featureType:d,rootPath:c}){let x=r.has(n.path),{getContextMenuTriggerProps:m,manager:y}=l.b(),{selectedDsLibraryFolderPath:b}=(0,E.oA)(),[w]=(0,p.fp)(_.ES),[j]=(0,p.fp)(_.KO),C=null!==w||j,A=o.useRef(),I=o.useCallback(e=>{C&&!x&&!i&&e.dataTransfer?.items.length>0&&(A.current&&clearTimeout(A.current),A.current=setTimeout(()=>{s(n.path)},250))},[C,x,i,s,n.path]),N=o.useCallback(e=>{!e.currentTarget.contains(e.relatedTarget)&&A.current&&clearTimeout(A.current)},[]);o.useEffect(()=>()=>{A.current&&clearTimeout(A.current)},[]);let S=o.useMemo(()=>(0,G.w_)([...n.children]),[n.children]),L=(0,k.l)(),T=c?`${c}/${n.path.replace(/^\//,"")}`:n.path.replace(/^\//,""),{isDragOver:M,handleDragOver:O,handleDragLeave:D,handleDrop:P}=ef(`folder-${c||"root"}-${n.path}`,T,{disabled:i||L}),V=o.useCallback(e=>{N(e),D(e)},[N,D]);return(0,a.jsxs)("div",{className:"x78zum5 xdt5ytf x195vfkc xkh2ocl xjbqb8w x12oqio5 xj8oexa xnjsko4",onDragOver:O,onDragEnter:I,onDragLeave:V,onDrop:P,"data-folder-item":!0,children:[(0,a.jsx)("div",{...g.Ay.props(M&&!L?ex.folderItemContainerDragOver:void 0),children:(0,a.jsxs)("div",{className:"x10w6t97 x78zum5 x6s0dn4 xjbqb8w",children:[(0,a.jsxs)("button",{...m(),"aria-label":(0,h.t)("figmake.filesystem.folder.description",{name:n.name}),"aria-expanded":x,onClick:()=>{s(n.path),f.az.trackDefinedEvent("figmake.toggle_folder",{fileKey:p.zl.get(v.ze)??void 0,isOpening:!x}),(0,u.kc)().bake_byods_extraction_showcase&&n.isDsImportedLibrary&&(p.zl.set(eg.ww,n.path),p.zl.set(eg.$X,null))},...g.Ay.props(ex.folderItemLabel,i?ex.disabled:void 0,C?ex.folderItemLabelDragActive:void 0,(0,u.kc)().bake_byods_extraction_showcase&&b===n.path&&!C?ex.folderItemLabelActive:void 0),disabled:i,children:[(0,a.jsxs)("div",{style:{paddingLeft:16*t,display:"flex",alignItems:"center",...(0,G.Ql)(i)},children:[(0,a.jsx)("span",{style:{flexShrink:0},children:x?(0,a.jsx)(ed.r,{}):(0,a.jsx)(ec.R,{})}),(0,a.jsx)("span",{style:{flexShrink:0},children:(0,a.jsx)(eu.e,{})})]}),(0,a.jsx)(ep.G,{text:n.name})]}),(0,u.kc)().bake_context_menu&&(0,a.jsx)(eh,{manager:y,folder:n,rootPath:c})]})}),x?S.map(n=>"file"===n.type?(0,a.jsx)(es,{selectedNode:e,file:n,indentLevel:t+1,codeIsStreaming:i,featureType:d},n.guid):(0,a.jsx)(em,{selectedNode:e,folder:n,indentLevel:t+1,codeIsStreaming:i,openFolderPaths:r,toggleFolder:s,featureType:d,rootPath:c},n.name)):null]})}function ey({isDragActive:e,canScrollUp:n,canScrollDown:t,onScrollTriggerEnter:o,onScrollTriggerLeave:i}){return e?(0,a.jsxs)(a.Fragment,{children:[n&&(0,a.jsx)("div",{className:"x10l6tqk xu96u03 x3m8u43 xh8yej3 x1lasm2m xsaw067 x13vifvy x67bb7w",onDragEnterCapture:e=>{e.preventDefault(),e.stopPropagation(),o("up",e)},onDragOverCapture:e=>{e.preventDefault(),e.stopPropagation(),o("up",e)},onDragLeaveCapture:e=>{e.preventDefault(),e.stopPropagation(),i()}}),t&&(0,a.jsx)("div",{className:"x10l6tqk xu96u03 x3m8u43 xh8yej3 x1lasm2m xsaw067 x1ey2m1c x67bb7w",onDragEnterCapture:e=>{e.preventDefault(),e.stopPropagation(),o("down",e)},onDragOverCapture:e=>{e.preventDefault(),e.stopPropagation(),o("down",e)},onDragLeaveCapture:e=>{e.preventDefault(),e.stopPropagation(),i()}})]}):null}let ev=3;function eb({manager:e,rootPath:n,codeProject:t}){let i=(0,k.l)();return o.useEffect(()=>{e.isOpen&&f.az.trackDefinedEvent("figmake.filesystem_open_context_menu",{fileKey:p.zl.get(v.ze)??void 0,targetType:"root",codeFileGuid:void 0})},[e.isOpen,n]),(0,a.jsx)(l.bL,{manager:e,children:(0,a.jsxs)(l.mc,{children:[!i&&(0,a.jsx)(U,{path:n}),(0,a.jsx)(X,{fileOrFolder:t})]})})}function ew({selectedCodeFileNode:e,nodeWithChatMessages:n,featureType:t,rootPath:i}){let{getContextMenuTriggerProps:s,manager:d}=l.b(),[g,f]=(0,o.useState)(null),x=(0,b.Fk)((e,n)=>(0,r.Ns)(e,n),i),[m,y]=(0,p.fp)(_.wy),[v]=(0,p.fp)(_.ES),[C]=(0,p.fp)(_.KO),A=null!==v||C,I=o.useCallback(e=>{y(n=>{let t=new Set(n);return t.has(e)?t.delete(e):t.add(e),t})},[y]),N=o.useCallback(()=>{let e=x.children.find(e=>"file"===e.type&&"App.tsx"===e.name)?.guid;if(e||(e=x.children.find(e=>"file"===e.type)?.guid),e){let n=(0,c.UN)().get(e);n&&(0,G.nU)(n)}},[x]);(0,o.useEffect)(()=>{(0,r.kv)(e)||N()},[e,x,N]);let S=o.useMemo(()=>(0,G.w_)([...x.children]),[x.children]),E=function(e){let{exchange:n}=(0,j.$W)(e?.guid);return Object.values(n?.fileUpdates??{}).length>0}(n),L=(0,k.l)(),T=`file-tree-${i||"root"}`,M=(0,o.useRef)(null),{isDragOver:O,handleDragOver:D,handleDragLeave:P,handleDrop:V}=ef(T,i,{disabled:E||L}),{handleScrollTriggerEnter:R,handleScrollTriggerLeave:F,canScrollUp:W,canScrollDown:z}=function(e){let n=(0,o.useRef)(null),t=(0,o.useRef)(null),a=(0,o.useRef)(ev),i=(0,o.useRef)(null),[,r]=(0,p.fp)(_.KO),[l,s]=o.useState(!1),[d,c]=o.useState(!1),u=o.useCallback(()=>{if(!e.current)return;let n=e.current,t=n.scrollTop<=1,a=n.scrollTop>=n.scrollHeight-n.clientHeight-1;s(!t),c(!a)},[e]);o.useEffect(()=>{let n=e.current;if(!n)return;u();let t=()=>{u()};return n.addEventListener("scroll",t),()=>n.removeEventListener("scroll",t)},[e,u]);let g=o.useCallback(()=>{n.current&&(cancelAnimationFrame(n.current),n.current=null,t.current=null,r(!1)),i.current&&(clearTimeout(i.current),i.current=null)},[r]),f=o.useCallback((o,i=ev)=>{if(a.current=i,t.current===o&&n.current||(n.current&&(cancelAnimationFrame(n.current),n.current=null),!e.current))return;t.current=o;let l=e.current;if("up"===o&&l.scrollTop<=1||"down"===o&&l.scrollTop>=l.scrollHeight-l.clientHeight-1)return;r(!0);let s=()=>{if(!e.current||!t.current)return;let o=a.current,i="up"===t.current?-o:o,r=e.current.scrollTop+i;if("up"===t.current&&r<=0){e.current.scrollTop=0,g(),u();return}let l=e.current.scrollHeight-e.current.clientHeight;if("down"===t.current&&r>=l){e.current.scrollTop=l,g(),u();return}e.current.scrollTop=r,n.current=requestAnimationFrame(s)};n.current=requestAnimationFrame(s)},[e,r,u,g]),h=o.useCallback((n,t)=>{i.current&&(clearTimeout(i.current),i.current=null);let a=ev;if(t&&e.current){let o=e.current.getBoundingClientRect(),i=t.clientY;a="up"===n?Math.max(1,Math.min(16,Math.round(16-(i-o.top)/50*15))):Math.max(1,Math.min(16,Math.round(16-(o.bottom-i)/50*15)))}f(n,a)},[f,e]),x=o.useCallback(()=>{i.current&&clearTimeout(i.current),i.current=window.setTimeout(()=>{g()},50)},[g]);return(0,o.useEffect)(()=>()=>{g()},[g]),{canScrollUp:l,canScrollDown:d,handleScrollTriggerEnter:h,handleScrollTriggerLeave:x}}(M),H=o.useCallback(e=>{f(e);let n=(0,c.UN)().get(e);if(n?.codeFilePath){let e="/"+n.codeFilePath;m.has(e)||y(n=>new Set([...n,e]))}},[m,y]),U=o.useCallback(()=>{f(null)},[]),$=o.useMemo(()=>({newlyCreatedFileGuid:g,onNewFileCreated:H,onNewFileFocused:U}),[g,H,U]);return(0,a.jsx)(B,{value:$,children:(0,a.jsxs)("div",{className:"x1n2onr6 x5yr21d x1vjfegm x78zum5 xdt5ytf",children:[(0,u.kc)().make_foundry_files_menu&&(0,a.jsx)("div",{className:"x2lah0s",children:(0,a.jsx)(w.r,{titleTx:(0,a.jsx)(a.Fragment,{children:(0,h.t)("figmake.filesystem.file_header_menu.label")}),icon:(0,a.jsx)(e_,{})})}),(0,a.jsxs)("div",{ref:M,...{0:{className:"xysyzu8 x6ikm8r x1n2onr6 x1iyjqo2 x12oqio5"},2:{className:"xysyzu8 x6ikm8r x1iyjqo2 x12oqio5 xcr9a89 x1n2onr6 x1cpjm7i x1hmns74 x1y3wzot x1wlytlt xb0dqd5 xhq5o37 xpmqpgo x1fo1fc9 x1vzh1im xb52w3a xkk1bqk x12maryy"},1:{className:"xysyzu8 x6ikm8r x1n2onr6 x1iyjqo2 x12oqio5"},3:{className:"xysyzu8 x6ikm8r x1iyjqo2 x12oqio5 xcr9a89 x1n2onr6 x1cpjm7i x1hmns74 x1y3wzot x1wlytlt xb0dqd5 xhq5o37 xpmqpgo x1fo1fc9 x1vzh1im xb52w3a xkk1bqk x12maryy"}}[!!(O&&!L)<<1|!!A<<0],...s(),onDragOver:D,onDragLeave:P,onDrop:V,children:[(0,u.kc)().bake_context_menu&&(0,a.jsx)(eb,{manager:d,rootPath:i,codeProject:x}),(0,a.jsx)("div",{className:"x12ulsxz xdqyycr x78zum5 xdt5ytf xlqzeqv x1qjc9v5 x1nd3289 xrxpjvj",children:S.map(n=>"file"===n.type?(0,a.jsx)(es,{selectedNode:e,file:n,indentLevel:0,codeIsStreaming:E,featureType:t},n.guid):(0,a.jsx)(em,{selectedNode:e,folder:n,indentLevel:0,codeIsStreaming:E,openFolderPaths:m,toggleFolder:I,featureType:t,rootPath:i},n.name))})]}),(0,a.jsx)(ey,{isDragActive:A,canScrollUp:W,canScrollDown:z,onScrollTriggerEnter:R,onScrollTriggerLeave:F})]})})}function e_(){let{getTriggerProps:e,manager:n}=l.b(),t=(0,i.wA)(),r=o.useCallback(async()=>{try{await m.Ay.foundry.install({dryRun:!1,autoUpdatePackages:!0},(0,y.Ay)()),await m.Ay.foundry.restart({},(0,y.Ay)()),t(x.F.enqueue({message:(0,h.t)("figmake.filesystem.file_header_menu.hard_refresh_complete_toast")}))}catch(e){console.error("Hard refresh error",e),t(x.F.enqueue({message:(0,h.t)("figmake.filesystem.file_header_menu.hard_refresh_error_toast"),error:!0}))}},[t]);return(0,a.jsxs)(l.bL,{manager:n,children:[(0,a.jsx)(s.d,{...e(),"aria-label":(0,h.t)("figmake.filesystem.file_header_menu.aria_label"),children:(0,a.jsx)(d.J,{})}),(0,a.jsx)(l.mc,{children:(0,a.jsx)(l.q7,{onClick:r,"data-tooltip":(0,h.t)("figmake.filesystem.file_header_menu.hard_refresh_tooltip"),children:(0,h.t)("figmake.filesystem.file_header_menu.hard_refresh")})})]})}},588402:(e,n,t)=>{t.d(n,{U:()=>C});var a=t(104076),o=t(716976),i=t(151823),r=t(967325),l=t(542653),s=t(266808),d=t(812714),c=t(824570),u=t(211862),p=t(141524),g=t(577932),f=t(107799),h=t(930753),x=t(743558),m=t(385446),y=t.n(m),v=t(289172),b=t(580276);function w(e,n,t={}){return(0,o.useMemo)(()=>{let a=[],o=!1;for(let l=0;l<e.length;l++){let c=e[l];switch(c.type){case s.K$p.USER_MESSAGE:let u=n.usersById?.[c.userId];if(u){let e=(0,i.MK)(c.textContent||""),n=(0,r.gG)(e);e.hidden||a.push({type:"user",user:u,id:c.id,plainText:e.plainText||"",imports:e.imports,inspectedElement:e.inspectedElement,inspectedComponent:e.inspectedComponent,selectedNodeIds:e.selectedNodeIds,libraryKey:e.libraryKey}),o=n}continue;case s.K$p.SYSTEM_MESSAGE:let p=function(e){let n=(0,i.U1)(e.textContent||"");if(!n)return null;let t={type:"system",id:e.id,systemMessageType:n.type,title:"title"in n?n.title:void 0};switch(n.type){case"restore":return{...t,systemMessageType:"restore",codeSnapshotKey:n.codeSnapshot?.codeSnapshotKey,fileVersionId:n.codeSnapshot?.fileVersionId};case"manual_edit":return{...t,systemMessageType:"manual_edit",changedFiles:n.changedFiles,codeSnapshotKey:n.codeSnapshot?.codeSnapshotKey,fileVersionId:n.codeSnapshot?.fileVersionId};case"duplicated_file":return{...t,systemMessageType:"duplicated_file",fileKeyHash:n.fileKeyHash};case"deleted_chat_history":return{...t,systemMessageType:"deleted_chat_history",userId:n.userId,timestamp:n.timestamp};default:return{...t,systemMessageType:"generic",plainText:n.plainText||""}}}(c);p&&a.push(p),o=!1;continue;case s.K$p.ASSISTANT_MESSAGE:let g=[(0,v.A)(c)],f=(0,i.lr)(c.textContent||"").title,h=l,x=!1;for(let n=l+1;n<e.length;n++){let t=e[n];if(!t)break;let a=(0,i.lr)(t.textContent||"");f||=a.title;let o=!0===a.hidden,r=t.type===s.K$p.SYSTEM_MESSAGE,l=t.type===s.K$p.ASSISTANT_MESSAGE,d=t.type===s.K$p.TOOL_MESSAGE;if(l||o&&r||d)h=n;else break;if(d){let e=t.toolResults;if(!e||0===e.length)continue;let n=g[g.length-1];if(!n)continue;for(let t of e)if(n.toolCalls.find(e=>e.toolCallId===t.toolCallId&&e.toolName===t.toolName)&&(n.toolResults.push(t),(0,b.d4)(t.toolName))){x=!0;break}if(x)break}else g.push((0,v.A)(t))}let m=function(e,n={}){let{hideTextBetweenToolCalls:t=!1}=n,a=[],o=new Set,r=new Map;return(e.forEach(e=>{(e.type===s.K$p.ASSISTANT_MESSAGE||e.type===s.K$p.TOOL_MESSAGE)&&e.toolResults?.forEach(e=>{r.set(e.toolCallId,e)})}),e.forEach(e=>{if(e.type===s.K$p.ASSISTANT_MESSAGE){let t=(0,i.lr)(e.textContent),l={id:e.id,sentAt64:e.sentAt64},s=[];switch(t.signedReasoning&&s.push({...l,type:"reasoning",reasoning:t.signedReasoning.text}),t.mode){case"code":t.codeFilePath&&s.push({...l,type:"code",code:t.code,file:t.codeFilePath});break;case"message":s.push({...l,type:"message",message:t.plainText});break;case"visible_message":var n;s.push({...l,type:"visible_message",message:(n=t.plainText)?n.replace(/<figma[^>]*>([\s\S]*?)<\/figma>/g,(e,n)=>e.includes("\n")?"":e):n,codeSnapshot:t.codeSnapshot});break;case"plan":s.push({...l,type:"plan",plan:t.plainText,title:t.title||""});break;case"summary":s.push({...l,type:"summary",summary:t.plainText,codeSnapshot:t.codeSnapshot});break;case"work":s.push({...l,type:"work",work:t.plainText});break;default:t.plainText.length>0&&s.push({...l,type:"message",message:t.plainText})}if(e.toolCalls){if((0,d.kc)().bake_mcp_client){let n=function(e,n,t){let a=[],o=[];for(let r of e)if((0,i.Eb)(r.toolName)&&r.toolName.startsWith(i.lh)&&!n.has(r.toolCallId)){let e=(0,i.Vm)(r);e&&a.push(e);let n=t.get(r.toolCallId);if(n){let e=(0,i.Xy)(n);e&&o.push(e)}}if(a.length>0)return{type:"mcpClientSideToolCall",toolCalls:a,toolResults:o}}(e.toolCalls,o,r);n&&(s.push({...l,...n}),n.toolCalls.forEach(e=>{o.add(e.toolCallId)}))}e.toolCalls.forEach(e=>{if((0,i.Eb)(e.toolName)){if(o.has(e.toolCallId))return;o.add(e.toolCallId);let n=(0,i.Vm)(e);if(!n)return;let t={...l,type:"clientSideToolCall",toolCall:n},a=r.get(e.toolCallId);if(a){let e=(0,i.Xy)(a);e&&(t.toolResult=e)}s.push(t)}else s.push({...l,type:"toolCall",name:e.toolName})})}a.push(...s)}}),t&&(0,d.kc)().bake_condense_tool_text)?function(e){let n=-1;for(let t=e.length-1;t>=0;t--)if(e[t]?.type==="visible_message"){n=t;break}return e.filter((t,a)=>{if("visible_message"!==t.type||n===a)return!0;let o=e[a-1],i=e[a+1],r=o?.type==="toolCall"||o?.type==="clientSideToolCall",l=i?.type==="toolCall"||i?.type==="clientSideToolCall";return!r||!l})}(a):a}(g,t);a.push({type:"assistant",messages:m,isAutoErrorFix:o,title:f}),o=!1,l=h;continue;case s.K$p.TOOL_MESSAGE:continue}}return a},[e,n,t])}var _=t(254362);let k={hideTextBetweenToolCalls:!0},j={hideTextBetweenToolCalls:!1};function C({setInput:e,chatMessagesNode:n,chatController:t,chatMessagesNodeGuid:m,codeInstanceGuid:v,layerDisplayName:b,sendMessage:C,emptyState:A,sendDisabled:I,enableAssetImport:N=!1,enableImageAttachment:S=!1,showChatHeader:E=!1,featureType:L,enableDragUpload:T=!1,enableDsImport:M=!1,enableConnections:O=!1,isResizingPanel:D,showCodeStreaming:P,rootPath:V,onChatInputBlur:R,onChatInputFocus:F,forceReadOnly:W,hideChatBox:B}){let z=(0,u.tS)(),G=t.getMessages(),H=function(e){let[n,t]=(0,o.useState)([]),{exchange:a}=(0,f.$W)(e?.guid),i=(0,o.useRef)([]);return o.useEffect(()=>{let e=a?.messages||[];y()(e,i.current)||(i.current=e,t(e))},[a?.messages]),n}(n),U=(0,f.s0)(m),$=(0,x.E)(n,t,L,{shouldIncludeFile:L===i.lV.FIGMAKE?l.ru:void 0}),q=(0,o.useMemo)(()=>{if(!G)return null;for(let e=G.length-1;e>=0;e--){let n=G[e];if(n?.type===s.K$p.USER_MESSAGE)return n}return null},[G]),K=(0,o.useMemo)(()=>!!q&&q.type===s.K$p.USER_MESSAGE&&(0,r.gG)((0,i.MK)(q.textContent)),[q]),{allMessagesDeduped:X,exchangeMessagesDeduped:Q}=(0,o.useMemo)(()=>{let e=new Set,n=[],t=[],a=e=>`${e.id}-${Number(e.sentAt64)>0?e.sentAt64:e.sentAt}`;for(let t of G)n.push(t),e.add(a(t));for(let o of H){let i=a(o);e.has(i)||(n.push(o),t.push(o))}return{allMessagesDeduped:n,exchangeMessagesDeduped:t}},[G,H]),Y=(0,o.useMemo)(()=>G.map(e=>e.userId)||[],[G]),Z=w(G,(0,c.zN)((0,p.zy)(Y)),k),J=(0,o.useMemo)(()=>Q.map(e=>e.userId)||[],[Q]),ee=w(Q,(0,c.zN)((0,p.zy)(J)),j),en=(0,o.useMemo)(()=>[...Z,...ee],[Z,ee]),et=(0,o.useMemo)(()=>{let{changedFiles:e,hasBaseline:n,error:t}=$;return e.length>0&&n&&!t&&(0,d.kc)().bake_manual_edits&&0===H.length?[...en,{type:"system",id:_.ct,systemMessageType:"manual_edit",changedFiles:e,codeSnapshotKey:void 0,fileVersionId:void 0,title:void 0}]:en},[en,$,H.length]),ea=(0,o.useMemo)(()=>{let e,n;let t=new Map;return X.forEach(a=>{switch(a.type){case s.K$p.ASSISTANT_MESSAGE:case s.K$p.SYSTEM_MESSAGE:n=a.id;break;case s.K$p.USER_MESSAGE:n&&e&&t.set(n,(0,g.Pd)(z,m,e)),n=void 0,e=a.id}}),n&&e&&t.set(n,(0,g.Pd)(z,m,e)),t},[X,z,m]),eo=(0,o.useMemo)(()=>new Set(H.map(e=>e.id)),[H]);return(0,a.jsx)(h.r,{chatController:t,chatMessagesNodeGuid:m,clientLifecycleIdMap:ea,codeFileChanges:$,codeInstanceGuid:v,emptyState:A,enableAssetImport:N,enableConnections:O,enableDragUpload:T,enableDsImport:M,enableImageAttachment:S,exchangeMessageIds:eo,featureType:L,forceReadOnly:W,hideChatBox:B,isLastUserMessageAutoErrorFix:K,isResizingPanel:D,layerDisplayName:b,messagesForRendering:et,onChatInputBlur:R,onChatInputFocus:F,rootPath:V,sendDisabled:I,sendMessage:C,setInput:e,showChatHeader:E,showCodeStreaming:P,typingUsers:U})}},803120:(e,n,t)=>{t.d(n,{u:()=>y});var a=t(716976),o=t(151823),i=t(967325),r=t(266808),l=t(812714),s=t(795033),d=t(173955),c=t(211862),u=t(592726),p=t(293172),g=t(580276),f=t(107799),h=t(635533),x=t(121363),m=t(732791);function y({chatMessagesNode:e,chatController:n,disabled:t=!1,featureType:y}){let[v,b]=a.useState(!1),{exchange:w}=(0,f.$W)(e?.guid||"");a.useEffect(()=>{w&&!v&&b(!0)},[w,v]);let[_,k]=(0,s.fp)((0,h.o0)(e?.guid||"")),j=(0,s.md)((0,h.Nm)(e?.guid||"")),C=n.getMessages(),A=(0,s.md)(p.Xl),I=(0,s.md)(p.p7),N=(0,u.iZ)(),S=(0,c.tS)(),E=a.useMemo(()=>C?(0,i.EY)(C):null,[C]),[L,T]=a.useState(new Map),M=a.useMemo(()=>{if(C&&C.length>0){let e=C[C.length-1];if(e?.type===r.K$p.TOOL_MESSAGE&&e?.toolCalls.some(e=>o.AD.includes(e.toolName)))return!0}if(w?.messages&&w?.messages.length>0){let e=w.messages[w.messages.length-1];if(e?.type===r.K$p.TOOL_MESSAGE&&e?.toolCalls.some(e=>o.AD.includes(e.toolName)))return!0}return!1},[C,w]),O=y===o.lV.FIGMAKE?(0,x.P)():void 0,D=(0,g.Xu)(),P=(0,l.kc)().make_fewer_error_fix_attempts?1:2;return{triggerSelfHeal:a.useCallback(async(e,a,r)=>{let l=await (0,d.ly)("auto-error-fix");if(l)try{if(_||t||!v||!n.isInitialized||!r||D&&(A||I===p.Ut.DEPLOYING||M)||0===a.length||!E||!j||"user"===j||Date.now()-r>2e3||(L.get(E)||0)>=P)return;await function({chatController:e,lastUserMessageId:n,errors:t,onStart:a,handleSubmitMessage:o}){let r=Array.from(new Set(t));a();let l=n;if(!l){let n=e.getMessages();l=(0,i.EY)(n)??null}return o({userMessageContent:{plainText:"",hidden:!0,errors:r},rawUserChatDetails:void 0,autoFixingUserMessageId:l,changedFiles:[]})}({chatController:n,lastUserMessageId:E,errors:a,onStart:()=>{k(!0),T(e=>(e.set(E,(e.get(E)||0)+1),e))},handleSubmitMessage:({userMessageContent:t,autoFixingUserMessageId:a,rawUserChatDetails:i,changedFiles:r})=>(0,m.O)({userMessageContent:t,user:N,chatMessagesNode:e,chatController:n,rawUserChatDetails:i,featureType:y,setInput:()=>{},fileKey:S,autoFixingUserMessageId:a,onFinish:()=>{k(!1)},canUseSupabase:D,changedFiles:r,model:O,requestInitiator:o.bG.SYSTEM})})}finally{await l.release()}},[_,t,v,D,E,j,L,n,A,I,M,k,N,y,S,O,P])}}},855492:(e,n,t)=>{t.d(n,{p:()=>s});var a=t(104076),o=t(859120);t(120440);let i=e=>`var(${e})`,r={bg:"--animation-bg",fill:"--animation-fill",stroke:"--animation-stroke",strokeLight:"--animation-stroke-light"},l={light:{[r.strokeLight]:i("--ramp-violet-200"),[r.stroke]:i("--ramp-violet-300"),[r.fill]:i("--ramp-violet-100"),[r.bg]:i("--color-bg")},dark:{[r.strokeLight]:i("--color-border"),[r.stroke]:i("--color-border"),[r.fill]:i("--color-bg-secondary"),[r.bg]:i("--color-bg")}};function s(){let e=(0,o.G)(),n=(0,a.jsxs)("svg",{width:"417",height:"321",viewBox:"0 0 417 321",fill:"none",children:[(0,a.jsxs)("g",{clipPath:"url(#clip0_8424_179506)",children:[(0,a.jsx)("line",{x1:"0.5",y1:"2.0461e-08",x2:"0.499987",y2:"321",stroke:i(r.strokeLight)}),(0,a.jsx)("line",{x1:"32.5",y1:"1",x2:"32.5",y2:"321",stroke:i(r.strokeLight)}),(0,a.jsx)("line",{x1:"64.5",y1:"1",x2:"64.5",y2:"321",stroke:i(r.strokeLight)}),(0,a.jsx)("line",{x1:"96.5",y1:"1",x2:"96.5",y2:"321",stroke:i(r.strokeLight)}),(0,a.jsx)("line",{x1:"128.5",y1:"1",x2:"128.5",y2:"321",stroke:i(r.strokeLight)}),(0,a.jsx)("line",{x1:"160.5",y1:"1",x2:"160.5",y2:"321",stroke:i(r.strokeLight)}),(0,a.jsx)("line",{x1:"192.5",y1:"1",x2:"192.5",y2:"321",stroke:i(r.strokeLight)}),(0,a.jsx)("line",{x1:"224.5",y1:"1",x2:"224.5",y2:"321",stroke:i(r.strokeLight)}),(0,a.jsx)("line",{x1:"256.5",y1:"1",x2:"256.5",y2:"321",stroke:i(r.strokeLight)}),(0,a.jsx)("line",{x1:"288.5",y1:"1",x2:"288.5",y2:"321",stroke:i(r.strokeLight)}),(0,a.jsx)("line",{x1:"320.5",y1:"1",x2:"320.5",y2:"321",stroke:i(r.strokeLight)}),(0,a.jsx)("line",{x1:"352.5",y1:"1",x2:"352.5",y2:"321",stroke:i(r.strokeLight)}),(0,a.jsx)("line",{x1:"384.5",y1:"1",x2:"384.5",y2:"321",stroke:i(r.strokeLight)}),(0,a.jsx)("line",{x1:"416.5",y1:"1",x2:"416.5",y2:"321",stroke:i(r.strokeLight)}),(0,a.jsx)("line",{x1:"416",y1:"0.5",x2:"-9.081e-08",y2:"0.499983",stroke:i(r.strokeLight)}),(0,a.jsx)("line",{x1:"416",y1:"32.5",x2:"-9.081e-08",y2:"32.5",stroke:i(r.strokeLight)}),(0,a.jsx)("line",{x1:"416",y1:"64.5",x2:"-9.081e-08",y2:"64.5",stroke:i(r.strokeLight)}),(0,a.jsx)("line",{x1:"416",y1:"96.5",x2:"-9.081e-08",y2:"96.5",stroke:i(r.strokeLight)}),(0,a.jsx)("line",{x1:"416",y1:"128.5",x2:"-9.081e-08",y2:"128.5",stroke:i(r.strokeLight)}),(0,a.jsx)("line",{x1:"416",y1:"160.5",x2:"-9.081e-08",y2:"160.5",stroke:i(r.strokeLight)}),(0,a.jsx)("line",{x1:"416",y1:"192.5",x2:"-9.081e-08",y2:"192.5",stroke:i(r.strokeLight)}),(0,a.jsx)("line",{x1:"416",y1:"224.5",x2:"-9.081e-08",y2:"224.5",stroke:i(r.strokeLight)}),(0,a.jsx)("line",{x1:"416",y1:"256.5",x2:"-9.081e-08",y2:"256.5",stroke:i(r.strokeLight)}),(0,a.jsx)("line",{x1:"416",y1:"288.5",x2:"-9.081e-08",y2:"288.5",stroke:i(r.strokeLight)}),(0,a.jsx)("line",{x1:"416",y1:"320.5",x2:"-9.081e-08",y2:"320.5",stroke:i(r.strokeLight)}),(0,a.jsx)("rect",{width:"573",height:"441",transform:"translate(-79 -61)",fill:"url(#paint0_radial_8424_179506)"}),(0,a.jsx)("rect",{x:"138.1",y:"98.4353",width:"133",height:"91",rx:"13.5",transform:"rotate(8 138.1 98.4353)",fill:i(r.bg),stroke:i(r.stroke),strokeDasharray:"4 4"}),(0,a.jsx)("rect",{x:"141.5",y:"114.5",width:"133",height:"91",rx:"13.5",fill:i(r.bg),stroke:i(r.stroke)}),(0,a.jsx)("rect",{x:"150",y:"123",width:"74",height:"74",rx:"5",fill:i(r.fill)}),(0,a.jsx)("rect",{x:"232",y:"123",width:"34",height:"74",rx:"5",fill:i(r.fill)})]}),(0,a.jsxs)("defs",{children:[(0,a.jsxs)("radialGradient",{id:"paint0_radial_8424_179506",cx:"0",cy:"0",r:"1",gradientUnits:"userSpaceOnUse",gradientTransform:"translate(286.5 220.5) rotate(90) scale(220.5 286.5)",children:[(0,a.jsx)("stop",{stopColor:i(r.bg),stopOpacity:"0"}),(0,a.jsx)("stop",{offset:"0.117896",stopColor:i(r.bg),stopOpacity:"0.0737185"}),(0,a.jsx)("stop",{offset:"0.213837",stopColor:i(r.bg),stopOpacity:"0.153748"}),(0,a.jsx)("stop",{offset:"0.2912",stopColor:i(r.bg),stopOpacity:"0.2384"}),(0,a.jsx)("stop",{offset:"0.353363",stopColor:i(r.bg),stopOpacity:"0.325985"}),(0,a.jsx)("stop",{offset:"0.403704",stopColor:i(r.bg),stopOpacity:"0.414815"}),(0,a.jsx)("stop",{offset:"0.4456",stopColor:i(r.bg),stopOpacity:"0.5032"}),(0,a.jsx)("stop",{offset:"0.48243",stopColor:i(r.bg),stopOpacity:"0.589452"}),(0,a.jsx)("stop",{offset:"0.51757",stopColor:i(r.bg),stopOpacity:"0.671881"}),(0,a.jsx)("stop",{offset:"0.5544",stopColor:i(r.bg),stopOpacity:"0.7488"}),(0,a.jsx)("stop",{offset:"0.596296",stopColor:i(r.bg),stopOpacity:"0.818519"}),(0,a.jsx)("stop",{offset:"0.646637",stopColor:i(r.bg),stopOpacity:"0.879348"}),(0,a.jsx)("stop",{offset:"0.7088",stopColor:i(r.bg),stopOpacity:"0.9296"}),(0,a.jsx)("stop",{offset:"0.786163",stopColor:i(r.bg),stopOpacity:"0.967585"}),(0,a.jsx)("stop",{offset:"0.882104",stopColor:i(r.bg),stopOpacity:"0.991615"}),(0,a.jsx)("stop",{offset:"1",stopColor:i(r.bg)})]}),(0,a.jsx)("clipPath",{id:"clip0_8424_179506",children:(0,a.jsx)("rect",{width:"417",height:"321",fill:i(r.bg)})})]})]});return(0,a.jsx)("div",{className:"x78zum5 xdt5ytf x6s0dn4 x1n2onr6",style:l[e.color],children:n})}},652931:(e,n,t)=>{t.d(n,{Ay:()=>x});var a=t(104076),o=t(716976),i=t(286138),r=t(859120);t(120440);var l=t(858959),s=t(784220),d=t(192075);let c={ENTER_TO_LOOP:600,LAYOUT_STEP:600,EXPAND_TO_ICON:300,ICON_TO_CODE:300,CODE_DURATION:6e3,CODE_EXIT:300,ICONS_DURATION:6e3,ICONS_EXIT:300,RESET_PAUSE:800},u=e=>`var(${e})`,p={bg:"--animation-bg",stroke:"--animation-stroke",strokeLight:"--animation-stroke-light",fill:"--animation-fill",icon:"--animation-icon"},g={light:{[p.bg]:u("--color-bg"),[p.stroke]:u("--ramp-violet-400"),[p.strokeLight]:u("--ramp-violet-300"),[p.fill]:u("--ramp-violet-100"),[p.icon]:u("--color-icon-brand")},dark:{[p.bg]:u("--color-bg"),[p.stroke]:u("--color-border"),[p.strokeLight]:u("--color-border"),[p.fill]:u("--color-bg-secondary"),[p.icon]:u("--color-icon-secondary")}};function f(e,n="top"){let t="light"===e?"255, 255, 255":"44, 44, 44",a=[{position:0,alpha:1},{position:.1179,alpha:.991615},{position:.2138,alpha:.967585},{position:.2912,alpha:.9296},{position:.3534,alpha:.879348},{position:.4037,alpha:.818519},{position:.4456,alpha:.7488},{position:.4824,alpha:.671881},{position:.5176,alpha:.589452},{position:.5544,alpha:.5032},{position:.5963,alpha:.414815},{position:.6466,alpha:.325985},{position:.7088,alpha:.2384},{position:.7862,alpha:.153748},{position:.8821,alpha:.0737185},{position:1,alpha:0}].map(e=>`rgba(${t}, ${e.alpha}) ${100*e.position}%`).join(", ");return`linear-gradient(${"top"===n?"to bottom":"to top"}, ${a})`}let h={light:{top:f("light","top"),bottom:f("light","bottom")},dark:{top:f("dark","top"),bottom:f("dark","bottom")}};function x({frozenPhase:e}){let[n,t]=(0,o.useState)(e||"enter"),[i,s]=(0,o.useState)(0),d=(0,o.useRef)(0),f=(0,r.G)();(0,o.useEffect)(()=>{let a;if(e)return;let o=e=>{t(()=>e)};return({enter:()=>{a=setTimeout(()=>o("loop"),c.ENTER_TO_LOOP)},loop:()=>{a=setTimeout(()=>{s(e=>{let n=(e+1)%5;return 0===n&&(d.current+=1,d.current>=1&&setTimeout(()=>o("exit"),200)),n})},c.LAYOUT_STEP)},exit:()=>o("expand"),expand:()=>{a=setTimeout(()=>o("icon"),c.EXPAND_TO_ICON)},icon:()=>{a=setTimeout(()=>o("code"),c.ICON_TO_CODE)},code:()=>{a=setTimeout(()=>o("codeExit"),c.CODE_DURATION)},codeExit:()=>{a=setTimeout(()=>o("fallingIcons"),c.CODE_EXIT)},fallingIcons:()=>{a=setTimeout(()=>o("fallingIconsExit"),c.ICONS_DURATION)},fallingIconsExit:()=>{a=setTimeout(()=>o("reset"),c.ICONS_EXIT)},reset:()=>{a=setTimeout(()=>o("enter"),c.RESET_PAUSE)},fixingErrors:()=>{}})[n](),()=>clearTimeout(a)},[n,i,e]),(0,o.useEffect)(()=>{e||(t(()=>"enter"),s(0),d.current=0)},[e]);let h={initial:{width:79},step1:{width:120,transition:{duration:.4,ease:"easeOut"}},step2:{width:79,transition:{duration:.4,ease:"easeOut"}},expand:{width:250,height:170,x:1,y:1,transition:{duration:.6,type:"spring",bounce:0}},reset:{width:79,height:79.0029,x:0,y:0,transition:{duration:.6,type:"spring"}}},x={initial:{width:79,x:172.499},step1:{width:120,x:131.499},step2:{width:79,x:172.499}},v={initial:{width:159,x:0},step1:{width:118,x:0},step2:{width:159,x:0}},_=()=>{switch(i){case 0:default:return"initial";case 1:return"step1";case 2:return"step2"}},k=()=>{switch(i){case 3:return"step1";case 4:return"step2";default:return"initial"}},j={hidden:{opacity:0,scale:1,y:8},show:{opacity:1,scale:1,y:0,transition:{duration:.4,type:"spring"}},exit:{opacity:0,scale:.6,y:8,transition:{duration:.4,type:"spring"}}},C={...j,exit:{opacity:0,scale:.6,y:-8,transition:{duration:.4,type:"spring"}}},A={...j,exit:{width:250,height:170,x:1,y:1,scale:1,opacity:1,transition:{ease:"easeOut",duration:.3}}},I=()=>{switch(n){case"exit":case"expand":return"exit";case"icon":case"code":case"codeExit":case"fixingErrors":case"fallingIcons":case"fallingIconsExit":return"hidden";case"reset":return"show";default:return}};return(0,a.jsx)("div",{className:"xdpfuu1 x1jn0hjm x1yjdb4r x78zum5 xdt5ytf x6s0dn4 xl56j7k",style:g[f.color],children:(0,a.jsx)("div",{className:"xwzcjdk xs4flsr xe8ttls x1rea2x4",children:(0,a.jsxs)("div",{className:"x78zum5 xdt5ytf x6s0dn4 x1rea2x4",children:[(0,a.jsxs)("div",{className:"x1ymmuzg x1ri49h8 x1n2onr6 x1rea2x4",children:["expand"===n||"icon"===n||"fixingErrors"===n||"code"===n||"codeExit"===n||"fallingIcons"===n||"fallingIconsExit"===n?(0,a.jsx)(l.P.div,{className:"x10l6tqk xqyf9gi x1a842fp x4pepcl x1yjdb4r xoegz02",initial:{opacity:0},animate:{opacity:"fallingIconsExit"===n||"reset"===n?0:1},transition:{duration:.3}}):null,(0,a.jsxs)(l.P.svg,{width:"252",height:"172",viewBox:"0 0 252 172",fill:"none",xmlns:"http://www.w3.org/2000/svg",variants:{hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.15,delayChildren:.1,type:"spring",duration:.4}}},initial:"hidden",animate:"show",style:{position:"relative",zIndex:9},children:[(0,a.jsx)(l.P.g,{variants:A,children:(0,a.jsx)(l.P.rect,{animate:"loop"===n?h[_()]:"expand"===n||"icon"===n||"code"===n||"codeExit"===n||"fallingIcons"===n||"fallingIconsExit"===n||"fixingErrors"===n?h.expand:"reset"===n?h.reset:h.initial,height:"79.0029",initial:h.initial,rx:"12.5015",stroke:u(p.stroke),strokeDasharray:"6 6",strokeWidth:"0.997067",transition:{type:"spring",stiffness:300,damping:25,duration:.3},x:"0.498534",y:"0.498534"})}),(0,a.jsx)(l.P.g,{variants:C,animate:I(),children:(0,a.jsx)(l.P.rect,{y:"0.498534",height:"79.0029",rx:"12.5015",stroke:u(p.stroke),strokeWidth:"0.997067",strokeDasharray:"6 6",initial:{x:92.4985,width:159.003},animate:"loop"===n?{x:1===i?132.4985:92.4985,width:({initial:{width:159,x:0},step1:{width:118,x:12},step2:{width:159,x:0}})[_()].width}:{x:92.4985,width:159.003},transition:{duration:.4,ease:"easeOut"}})}),(0,a.jsx)(l.P.g,{variants:C,animate:I(),children:(0,a.jsx)(l.P.rect,{animate:"loop"===n?{width:v[k()].width}:v.initial,height:"79.0029",initial:v.initial,rx:"12.5015",stroke:u(p.stroke),strokeDasharray:"6 6",strokeWidth:"0.997067",transition:{duration:.4,ease:"easeOut"},x:"0.498534",y:"92.4985"})}),(0,a.jsx)(l.P.g,{variants:C,animate:I(),children:(0,a.jsx)(l.P.rect,{y:"92.4985",height:"79.0029",rx:"12.5015",stroke:u(p.stroke),strokeWidth:"0.997067",strokeDasharray:"6 6",initial:{x:172.499,width:79},animate:"loop"===n?{x:x[k()].x,width:x[k()].width}:{x:172.499,width:79},transition:{duration:.4,ease:"easeOut"}})})]}),(0,a.jsx)(b,{animationPhase:n}),(0,a.jsx)(y,{animationPhase:n}),(0,a.jsx)(w,{animationPhase:n})]}),(0,a.jsx)(m,{animationPhase:n})]})})})}function m({animationPhase:e}){let[n,t]=(0,o.useState)(0);(0,o.useEffect)(()=>{let e=setInterval(()=>{t(e=>(e+1)%4)},350);return()=>clearInterval(e)},[]);let r=e=>"fixingErrors"===e?(0,d.t)("figmake.thinking_state.fixing_errors"):"expand"===e||"icon"===e||"code"===e?(0,d.t)("figmake.thinking_state.label_3"):"codeExit"===e||"fallingIcons"===e||"fallingIconsExit"===e?(0,d.t)("figmake.thinking_state.label_2"):(0,d.t)("figmake.thinking_state.label_1"),c=(0,o.useMemo)(()=>r(e),[e]);return(0,a.jsxs)("div",{className:"xqui205 xemv814 xno9bf3 x1betce5 x1n0bwc9 x1kpxq89 x78zum5 xl56j7k x87ps6o",style:{display:"flex",alignItems:"baseline"},children:[(0,a.jsx)(i.E,{"aria-live":"polite",children:c}),(0,a.jsx)("div",{"aria-hidden":"true",children:(0,a.jsx)(s.N,{mode:"wait",children:(0,a.jsxs)(l.P.span,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},exit:{opacity:0,y:-8},transition:{duration:.3,ease:"easeOut"},children:[(0,a.jsx)("span",{children:c}),(0,a.jsx)(l.P.span,{style:{display:"inline-block",width:"0.3em",textAlign:"left",marginLeft:"0"},"aria-hidden":"true",children:".".repeat(n)})]},c)})})]})}function y({animationPhase:e}){let n="code"===e||"fixingErrors"===e,t="codeExit"===e,o=(0,r.G)();return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(l.P.div,{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"200px",height:"140px",overflow:"hidden",zIndex:7},variants:{initial:{opacity:0},show:{opacity:1,transition:{duration:.4}},exit:{opacity:0,transition:{duration:.4}}},initial:"initial",animate:t?"exit":n?"show":"initial",children:(0,a.jsx)(l.P.div,{style:{position:"absolute",width:"100%"},variants:{initial:{y:128,opacity:1,transition:{duration:.4,type:"spring"}},animate:{y:-300,opacity:1,transition:{duration:8,ease:"linear",repeat:1/0,repeatType:"loop"}},exit:{y:-300,opacity:0,transition:{duration:.4,type:"spring"}}},initial:"initial",animate:t?"exit":n?"animate":"initial",children:(0,a.jsxs)("svg",{width:"189",height:"400",viewBox:"0 0 189 400",fill:"none",children:[(0,a.jsx)("rect",{x:"0.5",y:"0.5",width:"110",height:"11",rx:"3.5",fill:u(p.fill),stroke:u(p.strokeLight),strokeDasharray:"4 4"}),(0,a.jsx)("rect",{x:"0.5",y:"23.5",width:"159",height:"11",rx:"3.5",fill:u(p.fill),stroke:u(p.strokeLight),strokeDasharray:"4 4"}),(0,a.jsx)("rect",{x:"0.5",y:"47.5",width:"77",height:"11",rx:"3.5",fill:u(p.fill),stroke:u(p.strokeLight),strokeDasharray:"4 4"}),(0,a.jsx)("rect",{x:"0.5",y:"70.5",width:"188",height:"11",rx:"3.5",fill:u(p.fill),stroke:u(p.strokeLight),strokeDasharray:"4 4"}),(0,a.jsx)("rect",{x:"0.5",y:"94.5",width:"141",height:"11",rx:"3.5",fill:u(p.fill),stroke:u(p.strokeLight),strokeDasharray:"4 4"}),(0,a.jsx)("rect",{x:"0.5",y:"117.5",width:"110",height:"11",rx:"3.5",fill:u(p.fill),stroke:u(p.strokeLight),strokeDasharray:"4 4"}),(0,a.jsx)("rect",{x:"0.5",y:"140.5",width:"165",height:"11",rx:"3.5",fill:u(p.fill),stroke:u(p.strokeLight),strokeDasharray:"4 4"}),(0,a.jsx)("rect",{x:"0.5",y:"170.5",width:"110",height:"11",rx:"3.5",fill:u(p.fill),stroke:u(p.strokeLight),strokeDasharray:"4 4"}),(0,a.jsx)("rect",{x:"0.5",y:"193.5",width:"159",height:"11",rx:"3.5",fill:u(p.fill),stroke:u(p.strokeLight),strokeDasharray:"4 4"}),(0,a.jsx)("rect",{x:"0.5",y:"217.5",width:"77",height:"11",rx:"3.5",fill:u(p.fill),stroke:u(p.strokeLight),strokeDasharray:"4 4"}),(0,a.jsx)("rect",{x:"0.5",y:"240.5",width:"188",height:"11",rx:"3.5",fill:u(p.fill),stroke:u(p.strokeLight),strokeDasharray:"4 4"}),(0,a.jsx)("rect",{x:"0.5",y:"264.5",width:"141",height:"11",rx:"3.5",fill:u(p.fill),stroke:u(p.strokeLight),strokeDasharray:"4 4"}),(0,a.jsx)("rect",{x:"0.5",y:"287.5",width:"110",height:"11",rx:"3.5",fill:u(p.fill),stroke:u(p.strokeLight),strokeDasharray:"4 4"}),(0,a.jsx)("rect",{x:"0.5",y:"310.5",width:"165",height:"11",rx:"3.5",fill:u(p.fill),stroke:u(p.strokeLight),strokeDasharray:"4 4"})]})})}),(0,a.jsx)(l.P.div,{style:{position:"absolute",width:"238px",height:"82px",left:"8px",top:"4px",background:h[o.color].top,zIndex:8,pointerEvents:"none"},initial:{opacity:0},animate:{opacity:n?1:0},transition:{duration:.4}}),(0,a.jsx)(l.P.div,{style:{position:"absolute",width:"238px",height:"62px",left:"8px",top:"110px",background:h[o.color].bottom,zIndex:8,pointerEvents:"none"},initial:{opacity:0},animate:{opacity:n?1:0},transition:{duration:.4}})]})}let v={duration:.4,type:"spring"};function b({animationPhase:e}){let n={initial:{opacity:0,scale:0,x:12,y:124,transition:v},show:{opacity:1,scale:1,x:12,y:124,transition:v},exit:{opacity:0,scale:.6,x:12,y:124,transition:{...v,delay:.1}}};return(0,a.jsxs)(l.P.svg,{width:"36",height:"36",viewBox:"0 0 36 36",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{position:"absolute",top:0,left:0,zIndex:9,background:u(p.bg),borderRadius:36,transformOrigin:"center"},variants:n,initial:"initial",animate:"codeExit"===e?"exit":"icon"===e||"code"===e||"fixingErrors"===e?"show":"initial",children:[(0,a.jsx)("rect",{x:"0.5",y:"0.5",width:"35",height:"35",rx:"17.5",fill:u(p.bg),fillOpacity:"0.3"}),(0,a.jsx)("rect",{x:"0.5",y:"0.5",width:"35",height:"35",rx:"17.5",stroke:u(p.strokeLight)}),(0,a.jsx)("path",{d:"M14.8779 13.0316C15.0963 12.8874 15.3927 12.9116 15.585 13.1038C15.777 13.2961 15.8014 13.5926 15.6572 13.8109L15.585 13.8988L11.4824 18.0013L15.585 22.1038C15.8044 22.3235 15.8045 22.6792 15.585 22.8988C15.3654 23.1181 15.0096 23.1181 14.79 22.8988L10.29 18.3988C10.1847 18.2934 10.1251 18.1503 10.125 18.0013C10.125 17.8894 10.1585 17.7805 10.2197 17.6888L10.29 17.6038L14.79 13.1038L14.8779 13.0316ZM20.415 13.1029C20.6073 12.9107 20.9037 12.8864 21.1221 13.0306L21.21 13.1029L25.71 17.6029L25.7803 17.6878C25.8416 17.7796 25.875 17.8883 25.875 18.0003C25.875 18.1494 25.8154 18.2923 25.71 18.3978L21.21 22.8978C20.9903 23.1174 20.6347 23.1174 20.415 22.8978C20.1954 22.6781 20.1955 22.3225 20.415 22.1029L24.5176 18.0003L20.415 13.8978L20.3428 13.8099C20.1986 13.5916 20.2229 13.2951 20.415 13.1029Z",fill:u(p.icon)})]})}function w({animationPhase:e}){let n=(e,n,t,a,o)=>({initial:{x:e,y:-50,rotate:n,opacity:1,scale:1},animate:{x:e,y:[-64,236],rotate:t,opacity:1,scale:1,transition:{duration:2.2,ease:"linear",repeat:1/0,repeatDelay:0,repeatType:"loop",delay:a,times:[0,1]}},exit:{x:e,y:[-64,236],opacity:0,rotate:t,scale:.6,transition:{duration:.4,type:"spring"}}}),t=n(34,0,-5,0,0),o=n(138,-5,5,.2,0),i=n(75,0,-15,.5,.1),s=n(183,-5,5,.7,.15),d=n(20,0,15,1,.2),c=n(128,-5,5,1.2,.25),u=n(70,0,-12,1.5,.25),p=n(164,-6,6,1.7,.3),g=()=>{switch(e){case"fallingIcons":return"animate";case"fallingIconsExit":case"reset":return"exit";default:return"initial"}},f=(0,r.G)();return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(l.P.div,{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:252,height:172,zIndex:7,overflow:"hidden"},animate:{opacity:"fallingIconsExit"===e||"reset"===e?0:1},transition:{duration:.3},children:[(0,a.jsx)(l.P.div,{style:{position:"absolute"},variants:d,initial:"initial",animate:g(),children:(0,a.jsx)(_,{})}),(0,a.jsx)(l.P.div,{style:{position:"absolute"},variants:o,initial:"initial",animate:g(),children:(0,a.jsx)(k,{})}),(0,a.jsx)(l.P.div,{style:{position:"absolute"},variants:u,initial:"initial",animate:g(),children:(0,a.jsx)(C,{})}),(0,a.jsx)(l.P.div,{style:{position:"absolute"},variants:t,initial:"initial",animate:g(),children:(0,a.jsx)(A,{})}),(0,a.jsx)(l.P.div,{style:{position:"absolute"},variants:c,initial:"initial",animate:g(),children:(0,a.jsx)(j,{})}),(0,a.jsx)(l.P.div,{style:{position:"absolute"},variants:i,initial:"initial",animate:g(),children:(0,a.jsx)(N,{})}),(0,a.jsx)(l.P.div,{style:{position:"absolute"},variants:s,initial:"initial",animate:g(),children:(0,a.jsx)(S,{})}),(0,a.jsx)(l.P.div,{style:{position:"absolute"},variants:p,initial:"initial",animate:g(),children:(0,a.jsx)(I,{})})]}),(0,a.jsx)(l.P.div,{style:{position:"absolute",width:"238px",height:"92px",left:"8px",top:"-10px",background:h[f.color].top,zIndex:7,pointerEvents:"none"}}),(0,a.jsx)(l.P.div,{style:{position:"absolute",width:"238px",height:"62px",left:"8px",top:"110px",background:h[f.color].bottom,zIndex:7,pointerEvents:"none"}})]})}function _(){return(0,a.jsxs)("svg",{width:"40",height:"40",viewBox:"0 0 40 40",fill:"none",children:[(0,a.jsxs)("g",{clipPath:"url(#clip0_7376_774364)",children:[(0,a.jsx)("path",{d:"M6.66699 19.9998C6.66699 19.5089 7.06496 19.1109 7.55588 19.1109H32.4448C32.9357 19.1109 33.3337 19.5089 33.3337 19.9998C33.3337 20.4908 32.9357 20.8887 32.4448 20.8887H7.55588C7.06496 20.8887 6.66699 20.4908 6.66699 19.9998Z",fill:u(p.icon)}),(0,a.jsx)("path",{d:"M20.0003 6.6665C20.4912 6.6665 20.8892 7.06447 20.8892 7.55539L20.8892 32.4443C20.8892 32.9352 20.4912 33.3332 20.0003 33.3332C19.5094 33.3332 19.1114 32.9352 19.1114 32.4443L19.1114 7.55539C19.1114 7.06447 19.5094 6.6665 20.0003 6.6665Z",fill:u(p.icon)}),(0,a.jsx)("path",{d:"M29.4284 10.5717C29.7755 10.9189 29.7755 11.4817 29.4284 11.8288L11.8293 29.4279C11.4822 29.7751 10.9194 29.7751 10.5722 29.4279C10.2251 29.0808 10.2251 28.518 10.5722 28.1708L28.1713 10.5717C28.5185 10.2246 29.0813 10.2246 29.4284 10.5717Z",fill:u(p.icon)}),(0,a.jsx)("path",{d:"M10.5729 10.5718C10.92 10.2246 11.4828 10.2246 11.83 10.5718L29.4291 28.1709C29.7762 28.518 29.7762 29.0808 29.4291 29.4279C29.0819 29.7751 28.5191 29.7751 28.172 29.4279L10.5729 11.8288C10.2258 11.4817 10.2258 10.9189 10.5729 10.5718Z",fill:u(p.icon)})]}),(0,a.jsx)("defs",{children:(0,a.jsx)("clipPath",{id:"clip0_7376_774364",children:(0,a.jsx)("rect",{width:"26.6667",height:"26.6667",fill:"white",transform:"translate(6.66699 6.6665)"})})})]})}function k(){return(0,a.jsxs)("svg",{width:"40",height:"40",viewBox:"0 0 40 40",fill:"none",children:[(0,a.jsx)("g",{clipPath:"url(#clip0_7376_774366)",children:(0,a.jsx)("path",{d:"M13.333 7.49951H26.667C28.0474 7.49969 29.1668 8.61906 29.167 9.99951V29.5815C29.167 30.3037 28.3103 30.6848 27.7744 30.2007L21.1172 24.187C20.4827 23.6139 19.5173 23.6139 18.8828 24.187L12.2256 30.2007C11.6897 30.6848 10.833 30.3037 10.833 29.5815V9.99951C10.8332 8.61906 11.9526 7.49969 13.333 7.49951Z",stroke:u(p.icon),strokeWidth:"1.66667"})}),(0,a.jsx)("defs",{children:(0,a.jsx)("clipPath",{id:"clip0_7376_774366",children:(0,a.jsx)("rect",{width:"26.6667",height:"26.6667",fill:u(p.bg),transform:"translate(6.66699 6.6665)"})})})]})}function j(){return(0,a.jsxs)("svg",{width:"40",height:"40",viewBox:"0 0 40 40",fill:"none",children:[(0,a.jsx)("mask",{id:"path-1-inside-1_7376_774367",fill:"white",children:(0,a.jsx)("path",{d:"M20 6.6665C27.3636 6.6665 33.3327 12.6359 33.333 19.9995C33.333 27.3633 27.3638 33.3335 20 33.3335C17.6248 33.3335 15.3954 32.7111 13.4639 31.6226L8.99609 33.1128C7.69316 33.5471 6.45339 32.3073 6.8877 31.0044L8.37695 26.5347C7.28885 24.6034 6.66699 22.3741 6.66699 19.9995C6.66726 12.6359 12.6364 6.6665 20 6.6665Z"})}),(0,a.jsx)("path",{d:"M20 6.6665L20 4.99984H20V6.6665ZM33.333 19.9995L34.9997 19.9995L34.9997 19.9995L33.333 19.9995ZM20 33.3335L20 35.0002H20L20 33.3335ZM13.4639 31.6226L14.2822 30.1706L13.638 29.8076L12.9365 30.0415L13.4639 31.6226ZM8.99609 33.1128L9.52314 34.6939L9.52345 34.6938L8.99609 33.1128ZM6.8877 31.0044L8.46883 31.5314L8.4689 31.5312L6.8877 31.0044ZM8.37695 26.5347L9.95816 27.0615L10.1918 26.3604L9.829 25.7165L8.37695 26.5347ZM6.66699 19.9995L5.00033 19.9995V19.9995H6.66699ZM20 6.6665L20 8.33317C26.4431 8.33317 31.6661 13.5564 31.6663 19.9996L33.333 19.9995L34.9997 19.9995C34.9994 11.7155 28.2842 4.99984 20 4.99984L20 6.6665ZM33.333 19.9995H31.6663C31.6663 26.443 26.4432 31.6668 20 31.6668L20 33.3335L20 35.0002C28.2844 35.0002 34.9997 28.2836 34.9997 19.9995H33.333ZM20 33.3335V31.6668C17.9196 31.6668 15.9711 31.1224 14.2822 30.1706L13.4639 31.6226L12.6456 33.0745C14.8197 34.2998 17.33 35.0002 20 35.0002V33.3335ZM13.4639 31.6226L12.9365 30.0415L8.46874 31.5318L8.99609 33.1128L9.52345 34.6938L13.9912 33.2036L13.4639 31.6226ZM8.99609 33.1128L8.46905 31.5317L8.46883 31.5314L6.8877 31.0044L5.30656 30.4773C4.43794 33.0832 6.91728 35.5626 9.52314 34.6939L8.99609 33.1128ZM6.8877 31.0044L8.4689 31.5312L9.95816 27.0615L8.37695 26.5347L6.79575 26.0078L5.30649 30.4776L6.8877 31.0044ZM8.37695 26.5347L9.829 25.7165C8.87765 24.028 8.33366 22.0796 8.33366 19.9995H6.66699H5.00033C5.00033 22.6687 5.70006 25.1789 6.9249 27.3528L8.37695 26.5347ZM6.66699 19.9995L8.33366 19.9996C8.33389 13.5564 13.5569 8.33317 20 8.33317V6.6665V4.99984C11.7158 4.99984 5.00062 11.7155 5.00033 19.9995L6.66699 19.9995Z",fill:u(p.icon),mask:"url(#path-1-inside-1_7376_774367)"})]})}function C(){return(0,a.jsx)("svg",{width:"40",height:"40",viewBox:"0 0 40 40",fill:"none",children:(0,a.jsx)("path",{d:"M20.3008 8.3374C26.6049 8.49711 31.666 13.6578 31.666 20.0005L31.6621 20.3013C31.5022 26.6052 26.3424 31.6663 20 31.6665L19.6982 31.6626C13.4947 31.5049 8.49424 26.5049 8.33691 20.3013L8.33301 20.0005C8.33301 13.5574 13.557 8.33385 20 8.3335L20.3008 8.3374ZM20 10.0005C14.4775 10.0008 10 14.4779 10 20.0005C10.0004 25.5228 14.4777 30.0001 20 30.0005C25.5225 30.0003 29.9996 25.5229 30 20.0005C30 14.4777 25.5227 10.0007 20 10.0005ZM25.3779 21.6733C25.622 21.7048 25.842 21.8433 25.9756 22.0542C26.1282 22.2957 26.1468 22.5989 26.0244 22.8569C24.9887 25.0369 22.8027 26.5682 20.248 26.6616L20 26.6655C17.4227 26.6654 15.1891 25.203 14.0801 23.0659L13.9756 22.8569C13.8533 22.5989 13.8719 22.2956 14.0244 22.0542C14.1771 21.8129 14.443 21.6666 14.7285 21.6665H25.2715L25.3779 21.6733ZM16.2744 23.3325C17.1903 24.3557 18.5203 24.9994 20 24.9995L20.3701 24.9858C21.7008 24.8885 22.8867 24.2697 23.7256 23.3325H16.2744ZM16.667 14.9995C17.5873 14.9997 18.3329 15.7462 18.333 16.6665C18.333 17.5869 17.5873 18.3333 16.667 18.3335C15.7465 18.3335 15 17.587 15 16.6665C15.0001 15.7461 15.7466 14.9995 16.667 14.9995ZM23.333 14.9995C24.2534 14.9995 24.9999 15.7461 25 16.6665C25 17.587 24.2535 18.3335 23.333 18.3335C22.4127 18.3333 21.667 17.5869 21.667 16.6665C21.6671 15.7462 22.4127 14.9997 23.333 14.9995Z",fill:u(p.icon)})})}function A(){return(0,a.jsx)("svg",{width:"40",height:"40",viewBox:"0 0 40 40",fill:"none",children:(0,a.jsx)("path",{d:"M21.3291 11.0493C23.8048 8.61828 27.7764 8.54181 30.3457 10.8208L30.5898 11.0493C33.0574 13.4725 33.1348 17.348 30.8213 19.8618L30.5898 20.1001L20 30.4976L9.41113 20.1001C6.86394 17.5989 6.86394 13.5505 9.41113 11.0493C11.8869 8.61826 15.8585 8.54168 18.4277 10.8208L18.6719 11.0493L19.416 11.7808L20 12.354L20.584 11.7808L21.3291 11.0493Z",stroke:u(p.icon),strokeWidth:"1.66667"})})}function I(){return(0,a.jsx)("svg",{width:"40",height:"40",viewBox:"0 0 40 40",fill:"none",children:(0,a.jsx)("path",{d:"M19.0352 5.30728C19.6528 4.86836 20.4988 4.89969 21.084 5.40103L32.751 15.401C33.1204 15.7177 33.333 16.1801 33.333 16.6667V31.6667C33.3328 32.587 32.5864 33.3336 31.666 33.3336H25C24.0798 33.3335 23.3332 32.5869 23.333 31.6667V21.6667H16.666V31.6667C16.6658 32.5869 15.9202 33.3335 15 33.3336H8.33301C7.41279 33.3335 6.66619 32.5869 6.66602 31.6667V16.6667C6.66602 16.1803 6.8789 15.7177 7.24805 15.401L18.915 5.40103L19.0352 5.30728ZM8.33301 16.6667V31.6667H15V19.9997H25V31.6667H31.666V16.6667L20 6.66666L8.33301 16.6667Z",fill:u(p.icon)})})}function N(){return(0,a.jsx)("svg",{width:"40",height:"40",viewBox:"0 0 40 40",fill:"none",children:(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M29.5131 13.2457C30.8458 15.1227 31.5882 17.3443 31.6611 19.6277C31.6648 19.7453 31.6668 19.863 31.667 19.9809C31.667 19.9873 31.6671 19.9936 31.6672 19.9998C31.6672 21.8408 30.1747 23.3332 28.3337 23.3332C27.3381 23.3332 26.4445 22.8967 25.8337 22.2047V14.9998C25.8337 14.5396 25.4606 14.1665 25.0003 14.1665C24.5401 14.1665 24.167 14.5396 24.167 14.9998V15.9174C23.1082 14.8369 21.6326 14.1665 20.0003 14.1665C16.7787 14.1665 14.167 16.7782 14.167 19.9998C14.167 23.2215 16.7787 25.8332 20.0003 25.8332C21.9338 25.8332 23.6476 24.8925 24.709 23.4439C25.6199 24.4023 26.907 24.9998 28.3337 24.9998C31.0475 24.9998 33.2563 22.8379 33.3317 20.1424C33.3327 20.1275 33.3332 20.1125 33.3333 20.0973C33.3335 20.0729 33.3336 20.0485 33.3337 20.0241C33.3337 20.016 33.3337 20.0079 33.3337 19.9998C33.3337 19.9927 33.3337 19.9855 33.3337 19.9783C33.3293 17.2275 32.4736 14.5365 30.8721 12.2808C29.0862 9.76561 26.4835 7.9474 23.5074 7.13601C20.5313 6.32463 17.3659 6.57028 14.5506 7.8311C11.7353 9.09192 9.44429 11.2899 8.06788 14.0505C6.69148 16.8112 6.31487 19.9637 7.00223 22.9708C7.68958 25.978 9.39837 28.6538 11.8374 30.5424C14.2765 32.4309 17.2949 33.4153 20.3784 33.3278C23.1437 33.2494 25.8078 32.3133 28.0073 30.6613C28.039 30.6375 28.0707 30.6135 28.1022 30.5894C28.4677 30.3097 28.503 29.7811 28.2011 29.4337C27.9222 29.1129 27.4532 29.0593 27.0933 29.2708C27.0781 29.2797 27.063 29.2891 27.0482 29.299C27.0341 29.3085 27.0201 29.3183 27.0064 29.3286C25.0818 30.7741 22.7507 31.5932 20.3312 31.6618C17.6331 31.7384 14.992 30.877 12.8578 29.2246C10.7236 27.5721 9.22843 25.2307 8.62699 22.5995C8.02556 19.9682 8.35509 17.2098 9.55944 14.7942C10.7638 12.3786 12.7684 10.4554 15.2318 9.35219C17.6952 8.24897 20.4649 8.03403 23.069 8.74399C25.6731 9.45395 27.9505 11.0449 29.5131 13.2457ZM24.167 19.9998C24.167 22.301 22.3015 24.1665 20.0003 24.1665C17.6992 24.1665 15.8337 22.301 15.8337 19.9998C15.8337 17.6987 17.6992 15.8332 20.0003 15.8332C22.3015 15.8332 24.167 17.6987 24.167 19.9998Z",fill:u(p.icon)})})}function S(){return(0,a.jsx)("svg",{width:"40",height:"40",viewBox:"0 0 40 40",fill:"none",children:(0,a.jsx)("path",{d:"M20 6.6665C12.6364 6.6665 6.66699 12.6358 6.66699 19.9998C6.66699 27.3639 12.6364 33.3332 20 33.3332C27.3637 33.3332 33.3337 27.3639 33.3337 19.9998C33.3337 12.6358 27.3637 6.6665 20 6.6665ZM20 8.33317C26.4431 8.33317 31.667 13.5564 31.667 19.9998C31.667 22.8207 30.5955 25.3998 28.8223 27.3332C27.6031 25.1332 25.3337 23.6665 22.7087 23.4332C24.3753 22.4998 25.4837 20.7332 25.4837 18.7498C25.4837 15.7498 23.0003 13.3332 20.0003 13.3332C17.0003 13.3332 14.517 15.7498 14.517 18.7498C14.517 20.7332 15.6253 22.4998 17.292 23.4332C14.667 23.6665 12.3976 25.1332 11.1784 27.3332C9.40521 25.3998 8.33366 22.8207 8.33366 19.9998C8.33366 13.5564 13.5569 8.33317 20 8.33317ZM16.1837 18.7498C16.1837 16.6665 17.9003 14.9998 20.0003 14.9998C22.1003 14.9998 23.817 16.6665 23.817 18.7498C23.817 20.8332 22.1003 22.4998 20.0003 22.4998C17.9003 22.4998 16.1837 20.8332 16.1837 18.7498ZM12.9587 28.6665C13.9587 26.1665 16.7503 24.1665 20.0003 24.1665C23.2503 24.1665 26.042 26.1665 27.042 28.6665C24.9587 30.4998 22.6003 31.6665 20 31.6665C17.3997 31.6665 15.042 30.4998 12.9587 28.6665Z",fill:u(p.icon)})})}},126968:(e,n,t)=>{t.d(n,{A:()=>i});var a=t(104076),o=t(224781);function i({selectedValue:e,value:n,IconComponent:t,text:i}){let r=(0,a.jsxs)("div",{className:"x78zum5 x6s0dn4 xl56j7k x1cmmqis",children:[(0,a.jsx)(t,{...{0:{className:"xvkybfu"},1:{className:"x52n8ys"}}[!(e!==n)<<0],style:e===n?{}:{"--color-icon":"var(--color-icon-secondary)"}}),i]});return(0,a.jsx)(o.RT,{value:n,label:r,htmlAttributes:{"data-testid":`segmented-control-${n}`}})}t(120440)},429033:(e,n,t)=>{t.d(n,{m:()=>g});var a=t(151823),o=t(266808),i=t(170627),r=t(134873),l=t(354114),s=t(211862),d=t(592726),c=t(234429),u=t(963433),p=t(580276);function g({chatController:e}){let n=(0,s.q5)(),t=n?.key,g=(0,d.iZ)(),f=n?.trackTags,h=f?.isDuplicatedFromSupabaseConnectedFile,x=h?.status==="loaded"&&h.data,{codeLibraryInstance:m}=(0,u.oA)(),y=e.getMessages();(0,p.p3)()&&t&&m&&(async()=>{let n=await (0,r.qV)(t),s=y.some(e=>{if(e.type!==o.K$p.SYSTEM_MESSAGE)return!1;let t=(0,a.U1)(e.textContent);return t?.type==="duplicated_file"&&t.fileKeyHash===n});if(x&&!s&&n&&g){let t=(0,c.IO)(g,n);i.Hq.ai("add-duplicated-file-system-message",()=>{e.appendMessages([t]),l.Y5.commit()})}})()}},876315:(e,n,t)=>{t.d(n,{k:()=>i});var a=t(716976),o=t(104076);let i=(0,a.memo)(function(e){return(0,o.jsx)("svg",{width:"16",height:"16",fill:"none",viewBox:"0 0 16 16",...e,children:(0,o.jsx)("path",{fill:"var(--fpl-icon-color, var(--color-icon))",d:"M4.465 8a.5.5 0 0 1 .707.708l-.732.732a1.5 1.5 0 1 0 2.121 2.121l.732-.732a.5.5 0 0 1 .707.707l-.732.732a2.5 2.5 0 0 1-3.535-3.535zm7.307 3.772a.5.5 0 0 1 .629-.064l.078.064.375.375.064.078a.5.5 0 0 1-.693.694l-.078-.065-.375-.375-.065-.078a.5.5 0 0 1 .065-.629m-2.25-2.25a.5.5 0 0 1 .629-.064l.078.064.75.75.064.078a.5.5 0 0 1-.693.694l-.078-.065-.75-.75-.065-.078a.5.5 0 0 1 .065-.629m-2.25-2.25a.5.5 0 0 1 .629-.064l.078.064.75.75.064.078a.5.5 0 0 1-.693.694l-.078-.065-.75-.75-.065-.078a.5.5 0 0 1 .065-.629m1.46-3.539a2.5 2.5 0 1 1 3.536 3.535l-.732.733a.5.5 0 0 1-.707-.707l.732-.733A1.5 1.5 0 0 0 9.44 4.44l-.733.732A.5.5 0 0 1 8 4.465zm-3.71 1.29a.5.5 0 0 1 .629-.065l.078.064.75.75.064.078a.5.5 0 0 1-.693.694l-.078-.065-.75-.75-.065-.078a.5.5 0 0 1 .065-.629M3.147 3.146a.5.5 0 0 1 .629-.064l.078.064.375.375.064.078a.5.5 0 0 1-.693.694l-.078-.065-.375-.375-.065-.078a.5.5 0 0 1 .065-.629"})})})}}]);

//# debugId=996f5a10-185a-52c6-a5bf-f3f1c9f97370

//# sourceMappingURL=https://admin.figma.com/admin/webpack-artifacts/c34789c6e7830e2675e9885b3cd0f5be87e5c55c/3481-42d524f831e51f2e.min.js.map